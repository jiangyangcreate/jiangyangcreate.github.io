---
sidebar_position: 0
title: 基础语法
---
:::info
优美优于丑陋，明了优于隐晦简单优于复杂，复杂优于繁杂

扁平优于嵌套，稀疏优于稠密

可读性很重要!

特例亦不可违背原则，即使实用比纯粹更优。错误绝不能悄悄忽略，除非它明确需要如此

面对不确定性，拒绝妄加猜测。

任何问题应有一种，且最好只有一种，显而易见的解决方法。

做优于不做，然而不假思索还不如不做。

很难解释的，必然是坏方法。

很好解释的，可能是好方法。

[PEP 20 – The Zen of Python](https://peps.python.org/pep-0020/)

中文翻译为Python之禅，可以理解为**Python语言的设计哲学**。
:::

## 缩进

Python 最具特色的就是使用缩进来表示代码块。不需要使用大括号 {} 。

缩进的空格数是可变的，常见的有2个空格、4个空格、8个空格。但是同一个代码块的语句必须包含相同的缩进空格数。

后来出台的代码规范PEP 8，建议使用4个空格作为缩进。

```python showLineNumbers {2,4} title="test.py"
if True:
    print ("True")
else:
    print ("False")
```

:::info
PEP由社区讨论、起草 PEP、社区公开评议和修改、指导委员会决策、开发者编码实现。

查看[官方PEP索引](https://www.python.org/dev/peps/)，你可以回到过去，了解当年开发者们的想法。

[PEP 8](https://peps.python.org/pep-0008/) 即 Python Enhancement Proposal 8，直译是Python增强提案第8号，规定了Python代码的**编写规范**，是必读PEP之一。
:::

## 注释

注释是代码中不会被Python解释器执行的文本。用于解释代码，方便阅读。

Python 支持单行注释和多行注释。

```python showLineNumbers title="test.py"
#!/usr/bin/env python
# -*- coding: utf-8 -*-

# 在过去，需要py文件编码声明utf-8才能正常显示中文，不过现在只有使用其他编码（如 GBK）时才需要声明。

# 单行注释使用#号，可以单独一行写在代码上方 
a = 1 

b = 2 # 也可以写在代码后面

"""
多行注释使用三个双引号。
通常写在代码文件的最上方，描述这个代码文件的用途。
或者写在函数、方法内，描述这个函数、方法的用途。
"""

# 在函数、类、方法中，可以使用三个双引号添加注释，这样的注释称为文档字符串（docstring）。
# 可以被正确解析为函数的属性。
# 在 docstring 前后都没有空行。
# 即便只有一行，也推荐这样写，这使得以后扩展它变得容易。
# 单行文档字符串不应是重复函数/方法参数的“签名”，最好写一些有用的信息，例如功能、参数的含义、返回值的含义。

def add_numbers(a,b):
    """
    实现一个求和的函数
    :param a: 第一个数
    :param b: 第二个数
    :return: 两数之和
    """
    return a+b

print(add_numbers.__doc__)

# 输出：
# 实现一个求和的函数
# :param a: 第一个数
# :param b: 第二个数
# :return: 两数之和

class Person:
    """Person类，描述一个Person对象"""
    def __init__(self, name, age):
        """初始化一个Person对象"""
        pass 
print(Person.__doc__)
# 输出：
# Person类
print(Person.__init__.__doc__)
# 输出：
# 初始化一个Person对象
```

:::info
如果你违反这些惯例，最坏的结果也不过是招来一些不友好的目光。

但有些软件（如 PEP 256 和 PEP 258 的 Docutils 文档字符串处理系统）会知晓这些惯例，因此遵循它们将为你带来最佳效果。

[PEP 257 – 文档字符串规范](https://peps.python.org/pep-00257/)
:::

## 丰富的内置内容

Python易于学习的另外一个原因，就是丰富的内置内容。所有的内置对象在代码编辑器中都会有<HoverText text="Code Highlight" explanation="代码高亮,在Vscode中，关键字（保留字）是紫色，模块和类是绿色，函数是黄色，变量是蓝色,不同主体或IDE的代码高亮规则有所不同"/>。

### 内置保留字

保留字即关键字，是Python语言中预先定义的标识符。

我们把它们用作标识符名称会引发错误或导致其功能失效。

Python 的标准库提供了一个 keyword module，可以输出当前版本的所有保留字，后续我们会深入学习每一个保留字的作用。

```python showLineNumbers
import keyword 
print(keyword.kwlist)

# ['False', 'None', 'True', 'and', 'as', 'assert', 'async', 'await', 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'nonlocal', 'not', 'or', 'pass', 'raise', 'return', 'try', 'while', 'with', 'yield']
```

<MarkmapHooks initialMarkdown={`

## Python保留字

### 数据类型和值
- False, None, True: 基本的常量值

### 逻辑运算
- and, or, not: 逻辑运算符
- is, in: 身份和成员运算符

### 控制流
- if, elif, else: 条件判断
- for, while: 循环控制
- break, continue: 循环控制
- try, except, finally: 异常处理
- raise: 抛出异常

### 函数和类
- def: 定义函数
- class: 定义类
- return: 函数返回
- yield: 生成器
- lambda: 匿名函数

### 模块和导入
- import, from: 模块导入
- as: 别名

### 变量作用域
- global: 全局变量声明
- nonlocal: 非局部变量声明

### 异步编程
- async, await: 异步编程关键字

### 其他
- pass: 空操作占位符
- del: 删除对象
- with: 上下文管理器
- assert: 断言语句

`} />


### 内置数据类型

有部分教材会归纳为六类基础数据类型：数字、字符串、列表、元组、字典、集合。
> 如果只追求学习Python基础语法，确实可以只学习这六类基础数据类型。

事实上，Python3.12内置有数据类型非常多。
> 注意：Python中，`bool` 是 `int` 的子类。

而且Python中你自己创建一个新类，设置一下实例，就是一种新的数据类型。

<MarkmapHooks initialMarkdown={`

# Python3.12 内置数据类型

## 基础数据类型
### 数值类型
- int: 整数类型，任意精度
- float: 浮点数类型，双精度
- complex: 复数类型，实部+虚部
- bool: 布尔类型，True/False

### 文本类型
- str: 字符串类型，Unicode文本序列

### 空值类型
- type(None): None的类型，表示空值

## 容器类型
### 序列类型
- list: 可变有序列表
- tuple: 不可变有序元组
- range: 数字序列生成器

### 集合类型
- set: 可变无序不重复集合
- frozenset: 不可变无序不重复集合

### 映射类型
- dict: 可变键值对字典

### 二进制序列
- bytes: 不可变字节序列
- bytearray: 可变字节数组
- memoryview: 内存视图对象

## 函数和类相关
### 方法装饰器
- classmethod: 类方法装饰器
- staticmethod: 静态方法装饰器
- property: 属性装饰器

### 基础类型
- object: 所有类的基类
- type: 类型对象，用于创建类
- super: 访问父类的代理对象

## 迭代器和生成器
### 迭代工具
- enumerate: 枚举迭代器，返回索引和值
- zip: 并行迭代多个序列
- reversed: 反向迭代器
- map: 映射迭代器，对序列应用函数
- filter: 过滤迭代器，筛选满足条件的元素

### 切片对象
- slice: 切片对象，用于序列切片操作

`} />


### 内置异常

异常是Python中用于处理错误和异常情况的关键机制。

<MarkmapHooks initialMarkdown={`
# Python异常继承体系

## BaseException (所有异常的基类)
### SystemExit
- 系统退出异常

### KeyboardInterrupt  
- 键盘中断异常

### GeneratorExit
- 生成器退出异常

### Exception (常规异常基类)
#### ArithmeticError (算术错误基类)
- FloatingPointError: 浮点运算错误
- OverflowError: 数值溢出错误  
- ZeroDivisionError: 除零错误

#### LookupError (查找错误基类)
- IndexError: 索引超出范围
- KeyError: 字典键不存在

#### EnvironmentError/OSError (系统错误基类)
##### ConnectionError (连接错误基类)
- ConnectionAbortedError: 连接中止
- ConnectionRefusedError: 连接被拒绝
- ConnectionResetError: 连接重置
- BrokenPipeError: 管道中断

##### OSError子类
- BlockingIOError: 阻塞IO错误
- ChildProcessError: 子进程错误
- FileExistsError: 文件已存在
- FileNotFoundError: 文件未找到
- InterruptedError: 系统调用中断
- IsADirectoryError: 是目录错误
- NotADirectoryError: 不是目录错误
- PermissionError: 权限错误
- ProcessLookupError: 进程查找错误
- TimeoutError: 超时错误
- WindowsError: Windows系统错误

#### ValueError (值错误)
- 传入无效参数

#### TypeError (类型错误)
- 类型不匹配错误

#### AttributeError (属性错误)
- 对象没有指定属性

#### NameError (名称错误)
- UnboundLocalError: 局部变量未绑定

#### SyntaxError (语法错误基类)
- IndentationError: 缩进错误
  - TabError: Tab和空格混用错误

#### ImportError (导入错误基类)
- ModuleNotFoundError: 模块未找到

#### RuntimeError (运行时错误)
- NotImplementedError: 未实现错误
- RecursionError: 递归深度错误

#### StopIteration (迭代停止)
- 迭代器耗尽

#### StopAsyncIteration (异步迭代停止)
- 异步迭代器耗尽

#### AssertionError (断言错误)
- assert语句失败

#### EOFError (文件结束错误)
- 意外的文件结束

#### MemoryError (内存错误)
- 内存不足

#### ReferenceError (引用错误)
- 弱引用对象已被回收

#### SystemError (系统错误)
- Python解释器内部错误

#### BufferError (缓冲区错误)
- 缓冲区相关错误

#### Warning (警告基类)
##### DeprecationWarning
- 废弃功能警告

##### PendingDeprecationWarning  
- 即将废弃警告

##### RuntimeWarning
- 运行时警告

##### SyntaxWarning
- 语法警告

##### UserWarning
- 用户警告

##### FutureWarning
- 未来变更警告

##### ImportWarning
- 导入警告

##### UnicodeWarning
- Unicode警告

##### BytesWarning
- 字节警告

##### ResourceWarning
- 资源警告

##### EncodingWarning
- 编码警告

#### BaseExceptionGroup (异常组基类)
- ExceptionGroup: 异常组

## 已废弃异常
- EnvironmentError: 已合并到OSError
- IOError: 已合并到OSError
`} />

### 内置函数

内置函数指的是Python解释器自带的函数，不需要导入模块、不需要定义就可以使用。

<MarkmapHooks initialMarkdown={`
## Python内置函数

### 数学运算
- abs(): 绝对值
- divmod(): 商和余数
- max(): 最大值
- min(): 最小值
- pow(): 幂运算
- round(): 四舍五入
- sum(): 求和

### 类型转换
- bin(): 转二进制字符串
- bool(): 转布尔值
- bytearray(): 可变字节数组
- bytes(): 不可变字节序列
- chr(): ASCII码转字符
- complex(): 复数
- dict(): 字典
- float(): 浮点数
- frozenset(): 不可变集合
- hex(): 转十六进制字符串
- int(): 转整数
- list(): 列表
- oct(): 转八进制字符串
- ord(): 字符转ASCII码
- set(): 集合
- str(): 字符串
- tuple(): 元组

### 序列操作
- all(): 所有元素为真
- any(): 任一元素为真
- enumerate(): 枚举索引和值
- filter(): 过滤序列
- len(): 长度
- map(): 映射函数到序列
- range(): 数字序列
- reversed(): 反向迭代器
- slice(): 切片对象
- sorted(): 排序
- zip(): 并行迭代

### 迭代器相关
- aiter(): 异步迭代器
- anext(): 异步next
- iter(): 创建迭代器
- next(): 获取下一个元素

### 对象操作
- callable(): 是否可调用
- delattr(): 删除属性
- dir(): 对象属性列表
- getattr(): 获取属性
- globals(): 全局变量字典
- hasattr(): 是否有属性
- hash(): 哈希值
- id(): 对象标识
- isinstance(): 类型检查
- issubclass(): 子类检查
- locals(): 局部变量字典
- memoryview(): 内存视图
- object(): 基础对象
- property(): 属性装饰器
- repr(): 对象表示
- setattr(): 设置属性
- super(): 父类引用
- type(): 对象类型
- vars(): 对象属性字典

### 输入输出
- format(): 格式化字符串
- input(): 用户输入
- open(): 打开文件
- print(): 输出

### 代码执行与调试
- breakpoint(): 调试断点
- compile(): 编译代码
- eval(): 执行表达式
- exec(): 执行代码
- __ import __(): 动态导入模块

### 面向对象编程
- classmethod(): 类方法装饰器
- staticmethod(): 静态方法装饰器

### 其他
- ascii(): ASCII表示
- help(): 帮助文档
`} />


#### 输入输出

为了学习曲线更加平滑，我们先简单学习下Python的输入输出。

Python 的输入输出使用 `input()`函数来捕获用户的键盘输入，使用`print()`函数来输出（默认输出到终端控制台）。

```python showLineNumbers
name = input("请输入你的名字：") # 输入
print(f"你好，{name}！") # 输出
# 等价于
print("你好，" + name + "！")
# 等价于
print("你好，",name,"！")
```

接下来我们尝试打开一个文件，将数据输出到文件中。

```python showLineNumbers
f = open("test.txt", "w") # 打开文件
print('Hello, World!', file=f) # 输出到文件
f.close() # 关闭文件
```

运行后，我们可以在当前目录下看到一个`test.txt`文件，内容为`Hello, World!`。


### 内置常量

Python3.12中，内置常量有：

- `Ellipsis`: 用于切片操作，等价于`...`。
- `False`: 布尔值False。
- `None`: 空值。
- `NotImplemented`: 用于在类中重载运算符，表示该运算符未实现。
- `True`: 布尔值True。
- `__debug__`: 用于判断是否为开发模式(注意与调试模式区分)。

对于常量我们倾向用`is`判断是否相等，而不是`==`。

对于`Ellipsis`，我们实际使用中，一般使用`...`来代替。

```python showLineNumbers
import numpy as np

a = np.array([[1,2,3,4,5],[6,7,8,9,10]])

print(a[Ellipsis])  # 输出整个列表
# 等价于
print(a[...])
# 判断...是否是Ellipsis
print(... is Ellipsis) # 输出True
```

## 运算符

运算符和内置部分一样，可以直接使用。我们假设`a = 10`，`b = 20`。

### 算术运算符

| 运算符 | 描述                                            | 实例                                                     |
| ------ | ----------------------------------------------- | -------------------------------------------------------- |
| +      | 加 - 两个对象相加                               | a + b 输出结果 30                                        |
| -      | 减 - 得到负数或是一个数减去另一个数             | a - b 输出结果 -10                                       |
| *      | 乘 - 两个数相乘或是返回一个被重复若干次的字符串 | a * b 输出结果 200                                        |
| /      | 除 - x 除以 y                                   | b / a 输出结果 2                                         |
| //     | 整除 - 返回商的整数部分（地板除法，向下取整）   | 9 // 2 输出结果 4                                        |
| %      | 取模 - 返回除法的余数                           | b % a 输出结果 0                                         |
| **     | 幂 - 返回 x 的 y 次幂                           | a**b 为 10 的 20 次方， 输出结果 100000000000000000000   |


### 比较（关系）运算符

| 运算符 | 描述                                                                                                                                  | 实例                                         |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- |
| `==`     | 等于 - 比较对象是否相等                                                                                                               | (a == b) 返回 False。                        |
| `!=`     | 不等于 - 比较两个对象是否不相等                                                                                                       | (a != b) 返回 True.                          |
| `>`      | 大于 - 返回 x 是否大于 y                                                                                                              | (a > b) 返回 False。                         |
| `<`  | 小于 - 返回 x 是否小于 y。返回True或False。 | (a `<` b) 返回 True。                      |
| `>=`     | 大于等于 - 返回 x 是否大于等于 y。                                                                                                    | (a >= b) 返回 False。                        |
| `<=` | 小于等于 - 返回 x 是否小于等于 y。                                                                                                    | (a `<=` b) 返回 True。                     |

### 赋值运算符

| 运算符 | 描述             | 实例                                  |
| ------ | ---------------- | ------------------------------------- |
| =      | 简单的赋值运算符 | c = a + b 将 a + b 的运算结果赋值为 c |
| +=     | 加法赋值运算符   | c += a 等效于 c = c + a               |
| -=     | 减法赋值运算符   | c -= a 等效于 c = c - a               |
| *=     | 乘法赋值运算符   | c *= a 等效于 c = c * a                |
| /=     | 除法赋值运算符   | c /= a 等效于 c = c / a               |
| %=     | 取模赋值运算符   | c %= a 等效于 c = c % a               |
| **=    | 幂赋值运算符     | c **= a 等效于 c = c ** a             |
| //=    | 取整除赋值运算符 | c //= a 等效于 c = c // a             |

### 逻辑运算符

| 运算符 | 逻辑表达式 | 描述                                                                    | 实例                    |
| ------ | ---------- | ----------------------------------------------------------------------- | ----------------------- |
| and    | x and y    | 布尔"与" - 如果 x 为 False，x and y 直接返回 False，否则它返回 y 的计算值。 | (a and b) 返回 20。     |
| or     | x or y     | 布尔"或" - 如果 x 为 True 或真值，它返回 x 的值，否则它返回 y 的计算值。 | (a or b) 返回 10。      |
| not    | not x      | 布尔"非" - 如果 x 为 True，返回 False 。如果 x 为 False，它返回 True。  | not(a and b) 返回 False |

### 位运算符

| 运算符 | 描述           | 实例                                                                        |
| ------ | -------------- | --------------------------------------------------------------------------- |
| &      | 按位与运算符   | a & b 输出结果 12 ，二进制解释： 0000 1100                                  |
| \|     | 按位或运算符   | a \| b 输出结果 61 ，二进制解释： 0011 1101                                 |
| ^      | 按位异或运算符 | a ^ b 输出结果 49 ，二进制解释： 0011 0001                                  |
| ~      | 按位取反运算符 | ~a 输出结果 -61 ，二进制解释： 1100 0011 ，在一个有符号二进制数的补码形式。 |
| `<<` | 左移动运算符   | a `<<` 2 输出结果 240 ，二进制解释： 1111 0000                            |
| `>>` | 右移动运算符   | a `>>` 2 输出结果 15 ，二进制解释： 0000 1111                             |

### 成员运算符

| 运算符 | 描述                                                    | 实例                                              |
| ------ | ------------------------------------------------------- | ------------------------------------------------- |
| in     | 如果在指定的序列中找到值返回 True，否则返回 False。     | x 在 y 序列中 , 如果 x 在 y 序列中返回 True。     |
| not in | 如果在指定的序列中没有找到值返回 True，否则返回 False。 | x 不在 y 序列中 , 如果 x 不在 y 序列中返回 True。 |

### 身份运算符

| 运算符 | 描述                                        | 实例                                                                                         |
| ------ | ------------------------------------------- | -------------------------------------------------------------------------------------------- |
| is     | is 是判断两个标识符是不是引用自一个对象     | x is y, 类似 id(x) == id(y) , 如果引用的是同一个对象则返回 True，否则返回 False              |
| is not | is not 是判断两个标识符是不是引用自不同对象 | x is not y ， 类似 id(a) != id(b)。如果引用的不是同一个对象则返回结果 True，否则返回 False。 |

### 运算符优先级

| 运算符                     | 描述                                                   |
| -------------------------- | ------------------------------------------------------ |
| **                         | 指数 (最高优先级)                                      |
| ~ + -                      | 按位翻转, 一元加号和减号 (最后两个的方法名为 +@ 和 -@) |
| * / % //                   | 乘，除，取模和取整除                                   |
| + -                        | 加法减法                                               |
| `>> <<`                  | 右移，左移运算符                                       |
| &                          | 位 'AND'                                               |
| ^\|                        | 位运算符                                               |
| `<= < > >=`              | 比较运算符                                             |
| `== !=`              | 等于运算符                                             |
| `= %= /= //= -= += *= **=` | 赋值运算符                                             |
| is is not                  | 身份运算符                                             |
| in not in                  | 成员运算符                                             |
| not or and                 | 逻辑运算符                                             |
