# æ•°æ®ç±»å‹

## ğŸ‘enum æ¨¡å—

åŸºæœ¬ç¤ºä¾‹

```python showLineNumbers
from enum import Enum

class TrafficLight(Enum):
    RED = 1
    YELLOW = 2
    GREEN = 3
    # GREEN = 4 # é”™è¯¯ï¼šæšä¸¾æˆå‘˜çš„å€¼ä¸æ”¯æŒé‡æ–°å®šä¹‰

    # ä¸æ¨èçš„å†™æ³•ï¼Œä¸ç¬¦åˆä½¿ç”¨æšä¸¾çš„ç›®çš„
    A = None # å°†æšä¸¾æˆå‘˜çš„å€¼è®¾ç½®ä¸ºNoneã€Falseã€Trueç­‰
    B = [255, 0, 0] # å°†æšä¸¾æˆå‘˜çš„å€¼è®¾ç½®ä¸ºå¯å˜ç±»å‹
    C = 1 # å°†æšä¸¾æˆå‘˜çš„å€¼è®¾ç½®ä¸ºä¸å…¶ä»–æšä¸¾æˆå‘˜çš„å€¼ç›¸åŒ

# ä½¿ç”¨æšä¸¾
light = TrafficLight.RED

# if light == 1   å¸¸è§é”™è¯¯ï¼šé”™è¯¯åœ°ä½¿ç”¨Enumæˆå‘˜è¿›è¡Œæ¯”è¾ƒ
if light == TrafficLight.RED:
    print("çº¢ç¯ï¼Œåœè½¦")
elif light == TrafficLight.YELLOW:
    print("é»„ç¯ï¼Œå‡†å¤‡")
else:
    print("ç»¿ç¯ï¼Œé€šè¡Œ")
```

æ˜¯å¦ä½¿ç”¨`Enum`å–å†³äºä½ é¡¹ç›®çš„éœ€æ±‚å’Œä»£ç çš„å¤æ‚åº¦ã€‚ä½ å¯èƒ½è§‰å¾—ä¸éœ€è¦å®ƒï¼Œå°¤å…¶æ˜¯åœ¨ç®€å•çš„åœºæ™¯ä¸‹ï¼Œç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–æ•´æ•°å¸¸é‡çœ‹ä¼¼è¶³å¤Ÿã€‚ä½†æ˜¯ï¼Œ`Enum`æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼š

#### 1. **å¢åŠ å¯è¯»æ€§**
   å½“ä½ çœ‹åˆ°`Color.RED`æ—¶ï¼Œæ¯”ç›´æ¥çœ‹åˆ°ä¸€ä¸ª`1`æˆ–`'red'`æ›´å®¹æ˜“ç†è§£ã€‚`Enum`èƒ½è®©ä½ çš„ä»£ç æ›´å…·è¯­ä¹‰åŒ–ï¼Œé¿å…ç¡¬ç¼–ç çš„å¸¸é‡å€¼ã€‚
   
   ä¾‹å¦‚ï¼š
   ```python
   status = Status.SUCCESS  # ä¸€ç›®äº†ç„¶ï¼šçŠ¶æ€æ˜¯æˆåŠŸ
   ```
   ç›¸æ¯”ï¼š
   ```python
   status = 1  # éœ€è¦é¢å¤–åˆ¤æ–­ 1 æ˜¯ä»€ä¹ˆæ„ä¹‰
   ```

#### 2. **å‡å°‘é”™è¯¯**
   ä½¿ç”¨`Enum`å¯ä»¥é¿å…å¸¸è§çš„é”™è¯¯ï¼Œæ¯”å¦‚ä¸å°å¿ƒä½¿ç”¨äº†é”™è¯¯çš„å€¼æˆ–è€…å­—ç¬¦ä¸²æ‹¼å†™é”™è¯¯ã€‚`Enum`æˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸å¯å˜çš„ï¼Œèƒ½å¤Ÿé˜²æ­¢æ— æ„é—´æ”¹å˜å®ƒä»¬çš„å€¼ã€‚
   
   æ¯”å¦‚ï¼Œå¦‚æœä½ ç”¨äº†`Status.SUCCESS = 1`ï¼Œç„¶ååœ¨åç»­ä»£ç ä¸­æŸå¤„é”™è¯¯åœ°è®¾ç½®äº†`Status.SUCCESS = 2`ï¼Œä½ ä¼šæ”¶åˆ°è­¦å‘Šæˆ–æŠ¥é”™ï¼Œè€Œä¸æ˜¯é»˜é»˜è¦†ç›–ï¼Œäº§ç”Ÿæ½œåœ¨çš„ bugã€‚

#### 3. **ç±»å‹å®‰å…¨**
   ä½¿ç”¨`Enum`å¯ä»¥ç¡®ä¿å˜é‡çš„å€¼åªæ¥è‡ªäºæšä¸¾æˆå‘˜ï¼Œè€Œä¸ä¼šè¯¯ç”¨å…¶ä»–ç±»å‹çš„å€¼ï¼ˆå¦‚æ™®é€šçš„æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚è¿™å¯¹äºå¤§å‹é¡¹ç›®æ¥è¯´å°¤å…¶é‡è¦ï¼Œå› ä¸ºå®ƒèƒ½æœ‰æ•ˆåœ°é¿å…ä¸€äº›å¥‡æ€ªçš„ bugã€‚
   
   æ¯”å¦‚ï¼š
   ```python
   def set_color(color: Color):
       if not isinstance(color, Color):
           raise ValueError("Invalid color")
   ```

#### 4. **æ˜“äºæ‰©å±•å’Œç»´æŠ¤**
   éšç€é¡¹ç›®çš„æ‰©å±•ï¼Œä½ å¯èƒ½ä¼šæœ‰æ›´å¤šçš„å¸¸é‡å€¼éœ€è¦æ·»åŠ ï¼Œ`Enum`è®©è¿™ç§æ‰©å±•å˜å¾—æ›´æ¸…æ™°ã€æ›´ç³»ç»ŸåŒ–ã€‚ä½ ä¸å†éœ€è¦åœ¨å¤šä¸ªåœ°æ–¹å®šä¹‰ç›¸åŒçš„å¸¸é‡ï¼Œæ‰€æœ‰çš„å¸¸é‡éƒ½é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚
   
   æ¯”å¦‚ï¼Œéšç€ç³»ç»Ÿéœ€æ±‚å˜åŒ–ï¼Œä½ å¯èƒ½éœ€è¦æ‰©å±•äº¤é€šç¯çš„çŠ¶æ€ï¼š
   ```python
   class TrafficLight(Enum):
       RED = 1
       YELLOW = 2
       GREEN = 3
       FLASHING = 4  # æ–°å¢çŠ¶æ€
   ```

#### 5. **é›†æˆä¸åä½œçš„ä¼˜åŠ¿**
   åœ¨å¤šäººå¼€å‘çš„å›¢é˜Ÿä¸­ï¼Œä½¿ç”¨`Enum`å¯ä»¥æé«˜åä½œæ€§ã€‚å®ƒä½¿å¾—æ¯ä¸ªæˆå‘˜çš„ä»£ç ä¸­å¸¸é‡çš„å«ä¹‰æ›´åŠ æ¸…æ™°ï¼Œå‡å°‘è¯¯è§£æˆ–é‡å¤å®šä¹‰çš„é—®é¢˜ã€‚

#### 6. **å¯è¿­ä»£ã€å¯æ¯”è¾ƒ**
   `Enum`æ”¯æŒè¿­ä»£ã€æ¯”è¾ƒç­‰æ“ä½œï¼Œå…è®¸ä½ çµæ´»å¤„ç†ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥éå†æ‰€æœ‰çš„`Enum`æˆå‘˜ï¼Œæˆ–è€…æ¯”è¾ƒå®ƒä»¬çš„é¡ºåºã€‚
   
   ```python
   for state in TrafficLight:
       print(state)
   ```


## typing æ¨¡å—

`typing` æ¨¡å—æä¾›é«˜çº§ç±»å‹æ”¯æŒï¼š

```python
from typing import List, Dict, Tuple, Optional, Union

# å®¹å™¨ç±»å‹
names: List[str] = ["Alice", "Bob"]
person: Dict[str, Union[str, int]] = {"name": "Alice", "age": 30}

# å¯é€‰ç±»å‹
def get_age(name: str) -> Optional[int]:
    if name == "Alice":
        return 30
    return None

# ç±»å‹åˆ«å
UserId = int
user_id: UserId = 1001
```

### æ³›å‹ (Generic)

åˆ›å»ºå¯å¤ç”¨çš„ç±»å‹å®‰å…¨å®¹å™¨ï¼š

```python
from typing import TypeVar, Generic, List

T = TypeVar('T')

class Stack(Generic[T]):
    def __init__(self) -> None:
        self._items: List[T] = []
    
    def push(self, item: T) -> None:
        self._items.append(item)
    
    def pop(self) -> T:
        return self._items.pop()

# ä½¿ç”¨
int_stack: Stack[int] = Stack()
int_stack.push(42)
```

### Literal å­—é¢é‡ç±»å‹

é™åˆ¶å€¼åªèƒ½æ˜¯ç‰¹å®šçš„å­—é¢é‡ï¼š

```python
from typing import Literal

def set_mode(mode: Literal["read", "write", "append"]) -> None:
    print(f"Mode set to: {mode}")

set_mode("read")    # æ­£ç¡®
set_mode("delete")  # ç±»å‹æ£€æŸ¥å™¨ä¼šæŠ¥é”™

# å¤šç§ç±»å‹çš„å­—é¢é‡
def process_flag(flag: Literal[True, False, 0, 1]) -> None:
    pass
```



