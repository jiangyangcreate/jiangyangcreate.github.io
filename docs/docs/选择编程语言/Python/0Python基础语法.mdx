---
sidebar_position: 0
title: Python基础语法
---

## 输入输出

Python 的输入输出使用 `input()`函数来捕获用户的键盘输入，使用`print()`函数来输出（默认输出到终端控制台）。

```python showLineNumbers
name = input("请输入你的名字：") # 输入
print(f"你好，{name}！") # 输出
# 等价于
print("你好，" + name + "！")
# 等价于
print("你好，",name,"！")
```

## 缩进

Python 最具特色的就是使用缩进来表示代码块。不需要使用大括号 {} 。

缩进的空格数是可变的，常见的有2个空格、4个空格、8个空格。但是同一个代码块的语句必须包含相同的缩进空格数。

后来出台的代码规范（非强制的建议），建议使用4个空格作为缩进。

```python showLineNumbers {2,4}
if True:
    print ("True")
else:
    print ("False")
```

## 注释

注释是代码中不会被Python解释器执行的文本。用于解释代码，方便阅读。

Python 支持单行注释和多行注释。

```python showLineNumbers
# 单行注释使用#号，可以单独一行写在代码上方，也可以写在代码后面

# 这是变量a
a = 1 

b = 2 # 这是变量b

"""
多行注释使用三个双引号。
通常写在代码文件的最上方，描述这个代码文件的用途。
或者写在函数、方法内，描述这个函数、方法的用途。
"""

# 函数内的注释使用三个单引号，可以被正确解析为函数的属性。
def sum(a,b):
    '''
    实现一个求和的函数
    :param a:
    :param b:
    :return:
    '''
    return a+b

print(sum.__doc__)

实现一个求和的函数
:param a:
:param b:
:return:
```

## Python保留字

保留字即关键字，是Python语言中预先定义的标识符。

我们把它们用作标识符名称会引发错误或导致其功能失效。

Python 的标准库提供了一个 keyword module，可以输出当前版本的所有保留字，后续我们会深入学习每一个保留字的作用。

```python showLineNumbers
import keyword 
print(keyword.kwlist)

# ['False', 'None', 'True', 'and', 'as', 'assert', 'async', 'await', 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'nonlocal', 'not', 'or', 'pass', 'raise', 'return', 'try', 'while', 'with', 'yield']
```

<MarkmapHooks initialMarkdown={`

## Python保留字

### 数据类型和值
- False, None, True: 基本的常量值

### 逻辑运算
- and, or, not: 逻辑运算符
- is, in: 身份和成员运算符

### 控制流
- if, elif, else: 条件判断
- for, while: 循环控制
- break, continue: 循环控制
- try, except, finally: 异常处理
- raise: 抛出异常

### 函数和类
- def: 定义函数
- class: 定义类
- return: 函数返回
- yield: 生成器
- lambda: 匿名函数

### 模块和导入
- import, from: 模块导入
- as: 别名

### 变量作用域
- global: 全局变量声明
- nonlocal: 非局部变量声明

### 异步编程
- async, await: 异步编程关键字

### 其他
- pass: 空操作占位符
- del: 删除对象
- with: 上下文管理器
- assert: 断言语句

`} />


## 变量

### 变量的创建

这是一个变量创建的示例。

```python showLineNumbers
# 变量名 = 数据
a = 1
```
<Highlight>数据`1`被创建，后被引用，并被标注为变量名`a`。</Highlight>

### 变量命名规则

```text
1. 变量名只能包含字母、数字和下划线。变量名可以字母或下划线打头，但不能以数字打头，例如，可将变量命名为 `message_1`，但不能将其命名为 `1_message`。
2. 变量名不能包含空格，但可使用下划线来分隔其中的单词。例如，变量名 `greeting_message` 可行，但变量名 `greeting message` 会引发错误。
3. 不要将 Python 关键字和函数名用作变量名，即不要使用 Python 保留用于特殊用途的单词，如 `print` `list` `dict`等。
4. 变量名应既简短又具有描述性。例如，`name` 比 `n` 好，`student_name` 比 `s_n` 好，`name_length` 比 `length_of_persons_name` 好。
5. 约定：全大写字母表示这个变量通常不会发生改变，表示常量。
6. 约定：变量名前加`_`表示这个变量为程序过程中间私有变量，不建议使用。
7. 驼峰命名法：变量名由多个单词组成，每个单词的首字母大写。如`StudentName`。
8. 蛇形命名法：变量名由多个单词组成，每个单词的小写，单词之间用下划线连接。如`student_name`。
```

### 别名 相等性 一致性

举个通俗的例子:变量是一个标签，用于标记数据。变量名是标签的名字，数据是标签指向的内容。语法示例：

```python showLineNumbers
# 变量名 = 变量名 2 = 变量名 3 = 数据 
# 这种写法表示 数据 有多个名字，好比某人又叫张三、又叫Bob

# 此时该数值的任意修改都会影响a，b，c的值，因为他们表示的都是同一个数据的内存指向
# 多出来的x和y是z的别名
x = y = z = [0,1]

e = [0,1]
f = e # 变量e和变量f绑定的是同一个值,多出来的f是e的别名

# 一次性给多个变量赋值
a = 1 
b = 2
# 可以写为：
a,b = 1,2
# a,b 交换值可写为：
a,b = b,a


# 变量可以重新指向新的数据,此时旧的数据1由于缺少引用，会被Python的垃圾回收机制自动回收。
a = 1
a = [1,2,3]

# 此时g虽然也是[1,2,3]，但是g和a是两个不同的变量，他们指向不同的内存地址。即a和g值相等,但不是同一个对象。
g = [1,2,3]

print(a == g) # True
print(a is g) # False

# 比较特别是None,None是Python中表示空值。且为单例，即整个程序中只有一个 None 对象
a = None
b = None
print(a is b)  # True - 它们指向同一个对象
print(id(a) == id(b))  # True - 内存地址相同
```
### 驻留机制

驻留是一种数据缓存机制，对不可变数据类型( 字符串、数字、布尔值等)使用同一个内存地址，防止重复创建热门对象，例如：0、1等，有效的节省了空间。使用不同的环境时，代码的优化方式不同。

#### 在交互控制台中
-5~256 之间整数对象，会被驻留不会创建新的整数对象。
满足标识符命名规范的字符串都会被驻留，长度不限。
空字符串会驻留
使用乘法得到的字符串且满足标识符命名规范的字符串：长度小于等于20会驻留（peephole优化），Python 3.7改为4096（AST优化器）。
长度为1的特殊字符（ASCII 字符中的）会驻留
空元组或者只有一个元素且元素范围为-5~256的元组会驻留

#### 在非交互环境中
所有数字对象都会驻留，即便是是`a = 1 -10`这样的表达式，也会驻留。
默认字符串都会驻留
使用乘法运算得到的字符串与在控制台相同
元组类型（元组内数据为不可变数据类型）会驻留，但是元组内数据为可变数据类型时，不会驻留。
函数、类、变量、参数等的名称以及关键字都会驻留
注意：字符串是在编译时进行驻留，也就是说，如果字符串的值不能在编译时进行计算，将不会驻留。比如`a = '1' + '2'`不会驻留，而`a = '12'`会驻留。

```python showLineNumbers
a = 'ABC'
b = 'ABC'
print(a is b) # True
```

数据一旦被创建，其内存地址不会改变。因为如果内存地址发生了改变，变量的指向就会异常。

```python showLineNumbers
a = [1,2,3]
print(id(a)) # 2060220698944

a.append(4)
print(a) # [1, 2, 3, 4]
print(id(a)) # 2060220698944

b = [1,2,3,4]
print(a == b) # True
print(id(a) == id(b)) # False
```

此时`a`的内存地址没有改变（一致性不变），但是`a`的值发生了改变（相等性改变）。

新创建的变量`b`的内存地址与`a`不同，但是`a`和`b`的值相等。即`a`和`b`相等但不一致。

### 对象类型的判断

| 方法 | 用途 | 示例与说明 |
|------|------|------------|
| `==` | 判断两个对象的值是否相等 | 对应对象内的 `__eq__` 方法。即`a == b`等价于`a.__eq__(b)`。注意 `True == 1`、`False == 0` 都是 True |
| `is` | 判断两个对象是否是同一个对象 | `a is b` 等价于 `id(a) == id(b)`，比较的是对象的内存地址 |
| `type()` | 判断对象的类型 | `type(a) == type(b)` 两个都是同个类的实例则相等。如 `type(1) == int` |
| `isinstance()` | 判断对象是否是某个类型 | `isinstance(a, type)`，如果 type 是实例 a 的父类也会返回 True。如 `isinstance(1, object)` 是 True，因为 `object` 是所有类的父类 |

Python 官方编码规范 PEP 8 明确建议：使用 is 和 is not 来比较单例对象（如 None），而不是 ==。不会被 `__eq__`重写影响。

## 数据类型概述

Python 的**数据类型**无数，你自己创建一个新类的实例就是一种新的数据类型，以下是Python内置的数据类型：

### 数字类型
1. 整型（int）：Python 可以处理任意大小的整数，当然包括负整数，在程序中的表示方法和数学上的写法一模一样，例如：1，100，-8080，0，等等。
2. 浮点型（float）：浮点数也就是小数，因为浮点数也可能表示为科学计数法（如 1.23e9，或者 12.3e8），所以，浮点数运算结果也可能有误差。
3. 复数（complex）：复数由实数部分和虚数部分构成，可以用a+bj，或者complex(a,b)表示，复数的实部a和虚部b都是浮点数。
4. 布尔值(bool)：布尔类型是整数的子类，和布尔代数的表示完全一致，一个布尔值只有 True、False 两种值，要么是 True，要么是 False，在 Python 中，可以直接用 True、False 表示布尔值（请注意大小写），也可以通过布尔运算计算出来：
   - and 运算是与运算，只有所有都为 True，and 运算结果才是 True
   - or 运算是或运算，只要其中有一个为 True，or 运算结果就是 True
   - not 运算是非运算，它是一个单目运算符，把 True 变成 False，False 变成 True
   - 布尔值可以转换为整数，True 转换为 1，False 转换为 0，甚至可以直接与整型进行算术运算

### 字符串（str）
字符串是以单引号'或双引号"括起来的任意文本，比如'abc'，"xyz"等等。字符串还有一些特殊字符，可以通过转义字符\来表示，比如：
   - \n 表示换行
   - \t 表示制表符
   - \\表示的字符就是\
   - \u 表示 Unicode 编码
   - \U 表示 Unicode 编码
   - \x 表示十六进制数
   - \0 表示八进制数

### 序列类型
1. 列表（List）：可变的有序序列，用方括号 [] 表示，元素可以是不同类型。如 `[1, 'hello', 3.14]`，支持增删改查操作。
2. 元组（Tuple）：不可变的有序序列，用`,`创建，圆括号 () 表示，元素可以是不同类型。如 `(1, 'hello', 3.14)`。
3. 字典（Dict）：可变的键值对集合，用花括号 {} 表示，键必须是不可变类型。如 `{'name': 'Alice', 'age': 25}`，通过键访问值。
4. 集合（Set）：可变的无序不重复元素集合，用花括号 {} 表示或 `set()` 创建。如 `{1, 2, 3}`，自动去重，支持集合运算。
5. 数组（Array）：需要导入 array 模块，存储相同类型的数值，比列表更节省内存。如 `array.array('i', [1, 2, 3])`。
6. 队列（Queue）：需要导入 queue 模块，实现先进先出（FIFO）的数据结构。如 `queue.Queue()`，常用于多线程编程。

### 其他类型
1. 空值(None)：空值是 Python 里一个特殊的值，用 None 表示。None 不能理解为 0，因为 0 是有意义的，而 None 是一个特殊的空值。
