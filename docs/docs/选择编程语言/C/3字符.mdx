---
sidebar_position: 3
title: 字符
---


## char类型

**字符常量**

- 用单引号括起来：例如 `'a'`, `'1'`, `'$'`
- 转义字符：例如 `'\n'`（换行）, `'\t'`（制表符）, `'\\'`（反斜杠）

```c showLineNumbers
#include <stdio.h>
int main(){
    const char letter = 'A';
    const char newline = '\n';
    const char tab = '\t';
    
    printf("字符: %c\n", letter);
    printf("换行前%c换行后\n", newline);
    printf("制表符前%c制表符后\n", tab);
    return 0;
}
```

**字符串常量**

- 用双引号括起来：例如 `"Hello"`, `"C语言"`
- <Highlight>系统会自动在字符串末尾添加 '\0' 作为结束标志</Highlight>

```c showLineNumbers
#include <stdio.h>
#include <string.h>
int main(){
    const char greeting[] = "Hello World";
    const char empty[] = "";
    
    printf("问候语: %s\n", greeting);
    printf("空字符串长度: %lu\n", strlen(empty));
    return 0;
}
```

### 字符串的基本概念

- 字符串是位于双引号中的字符序列

* 在内存中以“\0”结束,所占字节比实际多一个
  ![](https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/img_convert/e0f0831ff1b110569a7e34440ab62e9e.png)

### 字符串的初始化

- 在 C 语言中没有专门的字符串变量,通常用一个字符数组来存放一个字符串。
- 当把一个字符串存入一个数组时,会把结束符‘\0’存入数组,并以此作为该字符串是否结束的标志。
- 有了‘\0’标志后,就不必再用字符数组 的长度来判断字符串的长度了
- 初始化

```c showLineNumbers
    char name[9] = "lnj"; //在内存中以“\0”结束， \0ASCII码值是0
    char name1[9] = {'l','n','j','\0'};
    char name2[9] = {'l','n','j',0};
    // 当数组元素个数大于存储字符内容时, 未被初始化的部分默认值是0, 所以下面也可以看做是一个字符串
    char name3[9] = {'l','n','j'};
```

- 错误的初始化方式

```c showLineNumbers
    //省略元素个数时, 不能省略末尾的\n
    // 不正确地写法，结尾没有\0 ，只是普通的字符数组
    char name4[] = {'l','n','j'};

     //   "中间不能包含\0", 因为\0是字符串的结束标志
     //    \0的作用：字符串结束的标志
    char name[] = "c\0ool";
     printf("name = %s\n",name);
输出结果: c
```

---

### 字符串输出

- 如果字符数组中存储的是一个字符串, 那么字符数组的输入输出将变得简单方便。

* 不必使用循环语句逐个地输入输出每个字符
* 可以使用 printf 函数和 scanf 函数一次性输出输入一个字符数组中的字符串

- 使用的格式字符串为“%s”,表示输入、输出的是一个字符串 字符串的输出

---

- **输出**

* %s 的本质就是根据传入的 name 的地址逐个去取数组中的元素然后输出，直到遇到\0 位置

```c showLineNumbers
char chs[] = "lnj";
printf("%s\n", chs);
```

- 注意点:

* \0 引发的脏读问题

```c showLineNumbers
char name[] = {'c', 'o', 'o', 'l' , '\0'};
char name2[] = {'l', 'n', 'j'};
printf("name2 = %s\n", name2); // 输出结果: lnjcool
```

---

- **输入**

```c showLineNumbers
char ch[10];
scanf("%s",ch);
```

- 注意点:

* 对一个字符串数组, 如果不做初始化赋值, 必须指定数组长度
* ch 最多存放由 9 个字符构成的字符串，其中最后一个字符的位置要留给字符串的结尾标示‘\0’
* 当用 scanf 函数输入字符串时,字符串中不能含有空格,否则将以空格作为串的结束符

### 字符串常用方法

- C 语言中供了丰富的字符串处理函数,大致可分为字符串的输入、输出、合并、修改、比较、转 换、复制、搜索几类。

* 使用这些函数可大大减轻编程的负担。
* 使用输入输出的字符串函数,在使用前应包含头文件"stdio.h"
* 使用其它字符串函数则应包含头文件"string.h"

---

- 字符串输出函数:puts
- 格式: puts(字符数组名)
- 功能:把字符数组中的字符串输出到显示器。即在屏幕上显示该字符串。
- 优点:

* 自动换行
* 可以是数组的任意元素地址

- 缺点

* 不能自定义输出格式, 例如 puts("hello %i");

```c showLineNumbers
char ch[] = "lnj";
puts(ch); //输出结果: lnj
```

> - puts 函数完全可以由 printf 函数取代。当需要按一定格式输出时,通常使用 printf 函数

---

- 字符串输入函数:gets
- 格式: gets (字符数组名)
- 功能:从标准输入设备键盘上输入一个字符串。

```c showLineNumbers
char ch[30];
gets(ch); // 输入:lnj
puts(ch); // 输出:lnj
```

> - 可以看出当输入的字符串中含有空格时,输出仍为全部字符串。说明 gets 函数并不以空格作为字符串输入结束的标志,而只以回车作为输入结束。这是与 scanf 函数不同的。
> - 注意 gets 很容易导致数组下标越界，是一个不安全的字符串操作函数

---

- 字符串长度
- 利用 sizeof 字符串长度

* 因为字符串在内存中是逐个字符存储的,一个字符占用一个字节,所以字符串的结束符长度也是占用的内存单元的字节数。

```c showLineNumbers
    char name[] = "it666";
    int size = sizeof(name);// 包含\0
    printf("size = %d\n", size); //输出结果:6
```

---

- 利用系统函数

* 格式: strlen(字符数组名)
* 功能:测字符串的实际长度(不含字符串结束标志‘\0’)并作为函数返回值。

```c showLineNumbers
    char name[] = "it666";
    size_t len = strlen(name2);
    printf("len = %lu\n", len); //输出结果:5
```

---

- 以“\0”为字符串结束条件进行统计

```c showLineNumbers
/**
 *  自定义方法计算字符串的长度
 *  @param name 需要计算的字符串
 *  @return 不包含\0的长度
 */
int myStrlen2(char str[])
{
    //    1.定义变量保存字符串的长度
    int length = 0;
    while (str[length] != '\0')
    {
        length++;//1 2 3 4
    }
    return length;
}
/**
 *  自定义方法计算字符串的长度
 *  @param name  需要计算的字符串
 *  @param count 字符串的总长度
 *  @return 不包含\0的长度
 */
int myStrlen(char str[], int count)
{
//    1.定义变量保存字符串的长度
    int length = 0;
//    2.通过遍历取出字符串中的所有字符逐个比较
    for (int i = 0; i < count; i++) {
//        3.判断是否是字符串结尾
        if (str[i] == '\0') {
            return length;
        }
        length++;
    }
    return length;
}
```

---

- 字符串连接函数:strcat
- 格式: strcat(字符数组名 1,字符数组名 2)
- 功能:把字符数组 2 中的字符串连接到字符数组 1 中字符串的后面,并删去字符串 1 后的串标志 “\0”。本函数返回值是字符数组 1 的首地址。

```c showLineNumbers
char oldStr[100] = "welcome to";
char newStr[20] = " lnj";
strcat(oldStr, newStr);
puts(oldStr); //输出: welcome to lnj"
```

> - 本程序把初始化赋值的字符数组与动态赋值的字符串连接起来。要注意的是,字符数组 1 应定义足 够的长度,否则不能全部装入被连接的字符串。

---

- 字符串拷贝函数:strcpy
  `- 格式: strcpy(字符数组名1,字符数组名2)
`- 功能:把字符数组 2 中的字符串拷贝到字符数组 1 中。串结束标志“\0”也一同拷贝。字符数名 2, 也可以是一个字符串常量。这时相当于把一个字符串赋予一个字符数组。

```c showLineNumbers
char oldStr[100] = "welcome to";
char newStr[50] = " lnj";
strcpy(oldStr, newStr);
puts(oldStr); // 输出结果:  lnj // 原有数据会被覆盖
```

> - 本函数要求字符数组 1 应有足够的长度,否则不能全部装入所拷贝的字符串。

---

- 字符串比较函数:strcmp
- 格式: strcmp(字符数组名 1,字符数组名 2)
- 功能:按照 ASCII 码顺序比较两个数组中的字符串,并由函数返回值返回比较结果。

* 字符串 1=字符串 2,返回值=0;
* 字符串 1`>`字符串 2,返回值`>`0;
* 字符串 1`<`字符串 2,返回值`<`0。

```c showLineNumbers
    char oldStr[100] = "0";
    char newStr[50] = "1";
    printf("%d", strcmp(oldStr, newStr)); //输出结果:-1
    char oldStr[100] = "1";
    char newStr[50] = "1";
    printf("%d", strcmp(oldStr, newStr));  //输出结果:0
    char oldStr[100] = "1";
    char newStr[50] = "0";
    printf("%d", strcmp(oldStr, newStr)); //输出结果:1
```

## 练习

- 编写一个函数 char_contains(char str[],char key)， 如果字符串 str 中包含字符 key 则返回数值 1，否则返回数值 0

## 字符串数组基本概念

- 字符串数组其实就是定义一个数组保存所有的字符串

* 1.一维字符数组中存放一个字符串，比如一个名字 char name[20] = “nj”
* 2.如果要存储多个字符串，比如一个班所有学生的名字，则需要二维字符数组，char names[15][20]可以存放 15 个学生的姓名(假设姓名不超过 20 字符)
* 如果要存储两个班的学生姓名，那么可以用三维字符数组 char names[2][15][20] ##字符串数组的初始化

```c showLineNumbers
char names[2][10] = { {'l','n','j','\0'}, {'l','y','h','\0'} };
char names2[2][10] = { {"lnj"}, {"lyh"} };
char names3[2][10] = { "lnj", "lyh" };
```

## char 类型内存存储细节

- char 类型基本概念

* char 是 C 语言中比较灵活的一种数据类型，称为“字符型”
* char 类型变量占 1 个字节存储空间，共 8 位
* 除单个字符以外, C 语言的的转义字符也可以利用 char 类型存储

| 字符 | 意义                              |
| ---- | --------------------------------- |
| \b   | 退格(BS)当前位置向后回退一个字符  |
| \r   | 回车(CR),将当前位置移至本行开头   |
| \n   | 换行(LF),将当前位置移至下一行开头 |
| \t   | 水平制表(HT),跳到下一个 TAB 位置  |
| \\0  | 用于表示字符串的结束标记          |
| `\`  | 代表一个反斜线字符 \\             |
| \\"  | 代表一个双引号字符"               |
| \\'  | 代表一个单引号字符'               |

- char 型数据存储原理

* 计算机只能识别 0 和 1, 所以 char 类型存储数据并不是存储一个字符, 而是将字符转换为 0 和 1 之后再存储
* 正是因为存储字符类型时需要将字符转换为 0 和 1, 所以为了统一, 老美就定义了一个叫做 ASCII 表的东东
* ASCII 表中定义了每一个字符对应的整数
  ![](https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/img_convert/b519ba9d45ab584c43c991777d8e978a.png)

```c showLineNumbers
    char ch1 = 'a';     printf("%i\n", ch1); // 97    char ch2 = 97;    printf("%c\n", ch2); // a
```

- char 类型注意点

* char 类型占一个字节, 一个中文字符占 3 字节(unicode 表),所有 char 不可以存储中文

  ```c showLineNumbers
  char c = '我'; // 错误写法
  ```

* 除转义字符以外, 不支持多个字符

  ```c showLineNumbers
  char ch = 'ab'; // 错误写法
  ```

* char 类型存储字符时会先查找对应的 ASCII 码值, 存储的是 ASCII 值, 所以字符 6 和数字 6 存储的内容不同

  ```c showLineNumbers
  char ch1 = '6'; // 存储的是ASCII码 64char ch2 = 6; //  存储的是数字 6
  ```

- 练习

* 定义一个函数, 实现输入一个小写字母,要求转换成大写输出