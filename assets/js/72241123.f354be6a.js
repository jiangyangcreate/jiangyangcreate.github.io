"use strict";(self.webpackChunkjiangmiemie=self.webpackChunkjiangmiemie||[]).push([[1869],{39262:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1/urllib","title":"urllib","description":"urllib \u6a21\u5757","source":"@site/docs/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1/urllib.mdx","sourceDirName":"\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1","slug":"/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1/urllib","permalink":"/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1/urllib","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"socket","permalink":"/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1/socket"},"next":{"title":"webbrowser","permalink":"/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python\u6807\u51c6\u5e93/13\u7f51\u7edc\u548c\u8fdb\u7a0b\u95f4\u901a\u4fe1/webbrowser"}}');var l=n(74848),i=n(28453);const s={},o=void 0,u={},c=[{value:"urllib \u6a21\u5757",id:"urllib-\u6a21\u5757",level:2},{value:"urllib \u53d1\u9001\u8bf7\u6c42",id:"urllib-\u53d1\u9001\u8bf7\u6c42",level:3},{value:"urllib \u5f02\u5e38\u5904\u7406",id:"urllib-\u5f02\u5e38\u5904\u7406",level:3},{value:"urllib \u89e3\u6790 URL",id:"urllib-\u89e3\u6790-url",level:3},{value:"urllib \u89e3\u6790 robots.txt \u6587\u4ef6",id:"urllib-\u89e3\u6790-robotstxt-\u6587\u4ef6",level:3}];function a(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.h2,{id:"urllib-\u6a21\u5757",children:"urllib \u6a21\u5757"}),"\n",(0,l.jsx)(r.p,{children:"urllib \u662f\u4e00\u4e2a\u6536\u96c6\u4e86\u591a\u4e2a\u6d89\u53ca URL \u7684\u6a21\u5757\u7684\u81ea\u5e26\u5305\uff1a\u53ef\u4ee5\u6253\u5f00\u548c\u8bfb\u53d6 URL\u3001 \u629b\u51fa\u5f02\u5e38\u3001\u89e3\u6790 URL\u3001\u89e3\u6790 robots.txt \u6587\u4ef6\u662f\u6700\u5e95\u5c42\u7684\u6a21\u5757\u3002\u867d\u7136\u4ec5\u652f\u6301 HTTP1.0 \u4ec5\u540c\u6b65 \uff0c\u4f46\u662f\u89e3\u7801\u548c\u89e3\u6790\u529f\u80fd\u662f\u771f\u7684\u5f88\u597d\u7528"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.a,{href:"https://docs.python.org/zh-cn/3/library/urllib.html?highlight=urllib#module-urllib",children:"urllib \u6a21\u5757\u4ee3\u7801\u6587\u6863"})}),"\n",(0,l.jsx)(r.h3,{id:"urllib-\u53d1\u9001\u8bf7\u6c42",children:"urllib \u53d1\u9001\u8bf7\u6c42"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-python",metastring:"showLineNumbers",children:"import urllib.request\n\nurl = 'https://www.python.org'\n# \u65b9\u5f0f\u4e00\nresponse = urllib.request.urlopen(url)\nprint(type(response))  # <class 'http.client.HTTPResponse'>\n# \u65b9\u5f0f\u4e8c\nrequest = urllib.request.Request(url)\nres = urllib.request.urlopen(url)\nprint(type(res))  # <class 'http.client.HTTPResponse'>\nprint(response.read())                  # \u83b7\u53d6\u54cd\u5e94\u4f53 \u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\nprint(response.getheaders())\n# \u7ed3\u679c\u4e3a\n[('Connection', 'close'), ('Content-Length', '50064'), ('Server', 'nginx'), ('Content-Type', 'text/html; charset=utf-8'), ('X-Frame-Options', 'DENY'), ('Via', '1.1 vegur, 1.1 varnish, 1.1 varnish'), ('Accept-Ranges', 'bytes'), ('Date', 'Tue, 17 Jan 2023 14:37:33 GMT'), ('Age', '1938'), ('X-Served-By', 'cache-iad-kiad7000025-IAD, cache-nrt-rjtf7700057-NRT'), ('X-Cache', 'HIT, HIT'), ('X-Cache-Hits', '263, 1190'), ('X-Timer', 'S1673966254.566369,VS0,VE0'), ('Vary', 'Cookie'), ('Strict-Transport-Security', 'max-age=63072000; includeSubDomains')]\n"})}),"\n",(0,l.jsx)(r.h3,{id:"urllib-\u5f02\u5e38\u5904\u7406",children:"urllib \u5f02\u5e38\u5904\u7406"}),"\n",(0,l.jsx)(r.p,{children:"URLError \u662f OSError \u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u6240\u6709\u8bf7\u6c42\u95ee\u9898\u90fd\u4f1a\u88ab\u6355\u83b7\u3002"}),"\n",(0,l.jsx)(r.p,{children:"HTTPError \u662f URLError \u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u670d\u52a1\u5668\u4e0a HTTP \u7684\u54cd\u5e94\u4f1a\u8fd4\u56de\u4e00\u4e2a\u72b6\u6001\u7801\uff0c\u6839\u636e\u8fd9\u4e2a HTTP \u72b6\u6001\u7801\u6765\u51b3\u5b9a\u662f\u5426\u6355\u83b7\uff0c\u6bd4\u5982\u5e38\u89c1\u7684 404 \u9519\u8bef\u7b49\u3002"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-python",metastring:"showLineNumbers",children:'from urllib import request\nfrom urllib import error\n\nif __name__ == "__main__":\n    url = "http://www.iloveyou.com/"#\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u8fde\u63a5\n    req = request.Request(url)\n    try:\n        response = request.urlopen(req)\n        print(response.read())\n    except error.URLError as e:\n        print(e) # <urlopen error [Errno 11002] getaddrinfo failed>\n'})}),"\n",(0,l.jsx)(r.h3,{id:"urllib-\u89e3\u6790-url",children:"urllib \u89e3\u6790 URL"}),"\n",(0,l.jsx)(r.p,{children:"\u4f60\u80af\u5b9a\u7ecf\u5386\u8fc7\u590d\u5236\u7f51\u5740\u51fa\u73b0\u4e71\u7801\uff0c\u8fd9\u662f\u56e0\u4e3a\u7f51\u5740\u5fc5\u987b\u4ee5\u901a\u7528\u7801\u7684\u5f62\u5f0f\u4f20\u9001\uff0c\u800c\u4e14\u8fd8\u8981\u907f\u514d\u51e0\u4e2a\u7279\u6b8a\u5b57\u7b26\uff0c\u56e0\u6b64\u7f51\u5740\u8981\u7ecf\u7f16\u7801\uff0c\u6c49\u5b57\u7ecf\u8fc7\u7f16\u7801\u540e\u81ea\u7136\u5c31\u662f\u4e0d\u53ef\u8fa8\u8ba4\u7684\u4e71\u7801\u4e86\u3002"}),"\n",(0,l.jsx)(r.p,{children:"\u90a3\u4e48\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u4e2d\uff0c\u7f51\u5740\u4e3a\u4ec0\u4e48\u770b\u8d77\u6765\u662f\u4e2d\u6587\u5462\uff1f\u8fd9\u5927\u6982\u662f\u6d4f\u89c8\u5668\u7684\u201c\u4eba\u6027\u5316\u201d\u5904\u7406\uff0c\u5c06\u7f16\u7801\u597d\u7684\u4e2d\u6587\u7f51\u5740\u8fd8\u539f\u51fa\u6765\u201c\u6682\u65f6\u201d\u663e\u793a\u5728\u5730\u5740\u680f\u4e2d\u3002"}),"\n",(0,l.jsx)(r.p,{children:"\u77e5\u9053\u539f\u7406\u5c31\u80fd\u6e05\u695a\u7684\u89e3\u7801\u5566\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 encode \u548c decode \u65b9\u6cd5\u8fdb\u884c\u64cd\u4f5c\u89e3\u7801\u548c\u8f6c\u7801\uff0c\u53ea\u4e0d\u8fc7\u8981\u8003\u8651\u6c49\u5b57\u4e2d\u6709%\u7b49\u7279\u6b8a\u5b57\u7b26\u548c/x \u4e0e%\u4e92\u8f6c\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\uff0c\u76f4\u63a5\u7528 quote \u51fd\u6570\u5427\uff0c\u522b\u91cd\u590d\u9020\u8f6e\u5b50\u3002"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-python",metastring:"showLineNumbers",children:"from urllib.parse import unquote\nfrom urllib.parse import quote\n\nurl = 'https://www.baidu.com/s?ie=UTF-8&wd=%E7%A7%91%E6%8A%80&%E6%8A%80%E6%9C%AF'\nprint(unquote(url))\n# \u7ed3\u679c\u4e3ahttps://www.baidu.com/s?ie=UTF-8&wd=\u79d1\u6280&\u6280\u672f\n\n\nprint( 'https://www.baidu.com/s?ie=UTF-8&wd='+quote('\u79d1\u6280&\u6280\u672f'))\n# \u7ed3\u679c\u4e3a'https://www.baidu.com/s?ie=UTF-8&wd=%E7%A7%91%E6%8A%80&%E6%8A%80%E6%9C%AF'\n"})}),"\n",(0,l.jsx)(r.h3,{id:"urllib-\u89e3\u6790-robotstxt-\u6587\u4ef6",children:"urllib \u89e3\u6790 robots.txt \u6587\u4ef6"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-python",metastring:"showLineNumbers",children:'import urllib.robotparser\nrp = urllib.robotparser.RobotFileParser()\nrp.set_url("http://www.musi-cal.com/robots.txt")\nrp.read()\n\nprint(rp.can_fetch("*", "http://www.musi-cal.com/")) #\u5224\u65ad\u7f51\u9875\u662f\u5426\u53ef\u4ee5\u6293\u53d6\uff0c\'*\'\u8868\u793a\u9002\u7528\u4e8e\u6240\u6709\u722c\u866b\n# True\n'})})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>o});var t=n(96540);const l={},i=t.createContext(l);function s(e){const r=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);