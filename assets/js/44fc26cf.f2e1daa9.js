"use strict";(self.webpackChunkjiangmiemie=self.webpackChunkjiangmiemie||[]).push([[5697],{96049:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1/inspect","title":"inspect","description":"inspect \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u51fd\u6570\u5e2e\u52a9\u83b7\u53d6\u5bf9\u8c61\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u6a21\u5757\u3001\u7c7b\u3001\u65b9\u6cd5\u3001\u51fd\u6570\u3001\u56de\u6eaf\u3001\u5e27\u5bf9\u8c61\u4ee5\u53ca\u4ee3\u7801\u5bf9\u8c61\u3002\u4f8b\u5982\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u68c0\u67e5\u7c7b\u7684\u5185\u5bb9\uff0c\u83b7\u53d6\u67d0\u4e2a\u65b9\u6cd5\u7684\u6e90\u4ee3\u7801\uff0c\u53d6\u5f97\u5e76\u683c\u5f0f\u5316\u67d0\u4e2a\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\uff0c\u6216\u8005\u83b7\u53d6\u4f60\u9700\u8981\u663e\u793a\u7684\u56de\u6eaf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002","source":"@site/docs/docs/Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1/inspect.mdx","sourceDirName":"Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1","slug":"/Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1/inspect","permalink":"/docs/Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1/inspect","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"sidebar_position":23,"title":"inspect"},"sidebar":"tutorialSidebar","previous":{"title":"Python \u8fd0\u884c\u65f6\u670d\u52a1","permalink":"/docs/Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1/"},"next":{"title":"abc","permalink":"/docs/Python\u6807\u51c6\u5e93/23Python \u8fd0\u884c\u65f6\u670d\u52a1/abc"}}');var s=t(74848),r=t(28453);const a={sidebar_position:23,title:"inspect"},c=void 0,l={},o=[{value:"\u7c7b\u578b\u68c0\u67e5",id:"\u7c7b\u578b\u68c0\u67e5",level:2},{value:"\u57fa\u672c\u7c7b\u578b\u5224\u65ad",id:"\u57fa\u672c\u7c7b\u578b\u5224\u65ad",level:3},{value:"\u83b7\u53d6\u5bf9\u8c61\u6210\u5458",id:"\u83b7\u53d6\u5bf9\u8c61\u6210\u5458",level:3},{value:"\u5e38\u7528\u7c7b\u578b\u68c0\u67e5\u51fd\u6570",id:"\u5e38\u7528\u7c7b\u578b\u68c0\u67e5\u51fd\u6570",level:3},{value:"\u83b7\u53d6\u6e90\u4ee3\u7801",id:"\u83b7\u53d6\u6e90\u4ee3\u7801",level:2},{value:"\u83b7\u53d6\u51fd\u6570\u548c\u7c7b\u7684\u6e90\u4ee3\u7801",id:"\u83b7\u53d6\u51fd\u6570\u548c\u7c7b\u7684\u6e90\u4ee3\u7801",level:3},{value:"\u83b7\u53d6\u6587\u6863\u5b57\u7b26\u4e32",id:"\u83b7\u53d6\u6587\u6863\u5b57\u7b26\u4e32",level:3},{value:"\u4f7f\u7528 Signature \u5bf9\u8c61\u8fdb\u884c\u5185\u7701",id:"\u4f7f\u7528-signature-\u5bf9\u8c61\u8fdb\u884c\u5185\u7701",level:3},{value:"\u68c0\u67e5\u7c7b\u4e0e\u51fd\u6570",id:"\u68c0\u67e5\u7c7b\u4e0e\u51fd\u6570",level:2},{value:"\u83b7\u53d6\u51fd\u6570\u53c2\u6570\u4fe1\u606f",id:"\u83b7\u53d6\u51fd\u6570\u53c2\u6570\u4fe1\u606f",level:3},{value:"\u68c0\u67e5\u7c7b\u5c42\u6b21\u7ed3\u6784",id:"\u68c0\u67e5\u7c7b\u5c42\u6b21\u7ed3\u6784",level:3},{value:"\u83b7\u53d6\u8c03\u7528\u8005\u4fe1\u606f",id:"\u83b7\u53d6\u8c03\u7528\u8005\u4fe1\u606f",level:3},{value:"\u68c0\u67e5\u89e3\u91ca\u5668\u7684\u8c03\u7528\u5806\u6808",id:"\u68c0\u67e5\u89e3\u91ca\u5668\u7684\u8c03\u7528\u5806\u6808",level:2},{value:"\u83b7\u53d6\u8c03\u7528\u6808",id:"\u83b7\u53d6\u8c03\u7528\u6808",level:3},{value:"\u83b7\u53d6\u5f53\u524d\u5e27\u4fe1\u606f",id:"\u83b7\u53d6\u5f53\u524d\u5e27\u4fe1\u606f",level:3},{value:"\u83b7\u53d6\u56de\u6eaf\u4fe1\u606f",id:"\u83b7\u53d6\u56de\u6eaf\u4fe1\u606f",level:3},{value:"\u9759\u6001\u5730\u83b7\u53d6\u5c5e\u6027",id:"\u9759\u6001\u5730\u83b7\u53d6\u5c5e\u6027",level:3},{value:"\u68c0\u67e5\u751f\u6210\u5668\u72b6\u6001",id:"\u68c0\u67e5\u751f\u6210\u5668\u72b6\u6001",level:3},{value:"\u68c0\u67e5\u534f\u7a0b\u72b6\u6001",id:"\u68c0\u67e5\u534f\u7a0b\u72b6\u6001",level:3}];function p(n){const e={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"inspect"})," \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u51fd\u6570\u5e2e\u52a9\u83b7\u53d6\u5bf9\u8c61\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u6a21\u5757\u3001\u7c7b\u3001\u65b9\u6cd5\u3001\u51fd\u6570\u3001\u56de\u6eaf\u3001\u5e27\u5bf9\u8c61\u4ee5\u53ca\u4ee3\u7801\u5bf9\u8c61\u3002\u4f8b\u5982\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u68c0\u67e5\u7c7b\u7684\u5185\u5bb9\uff0c\u83b7\u53d6\u67d0\u4e2a\u65b9\u6cd5\u7684\u6e90\u4ee3\u7801\uff0c\u53d6\u5f97\u5e76\u683c\u5f0f\u5316\u67d0\u4e2a\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\uff0c\u6216\u8005\u83b7\u53d6\u4f60\u9700\u8981\u663e\u793a\u7684\u56de\u6eaf\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u8be5\u6a21\u5757\u63d0\u4f9b\u4e864\u79cd\u4e3b\u8981\u7684\u529f\u80fd\uff1a\u7c7b\u578b\u68c0\u67e5\u3001\u83b7\u53d6\u6e90\u4ee3\u7801\u3001\u68c0\u67e5\u7c7b\u4e0e\u51fd\u6570\u3001\u68c0\u67e5\u89e3\u91ca\u5668\u7684\u8c03\u7528\u5806\u6808\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u7c7b\u578b\u68c0\u67e5",children:"\u7c7b\u578b\u68c0\u67e5"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"getmembers()"}),' \u51fd\u6570\u83b7\u53d6\u5bf9\u8c61\u5982\u7c7b\u6216\u6a21\u5757\u7684\u6210\u5458\u3002\u540d\u79f0\u4ee5 "is" \u6253\u5934\u7684\u51fd\u6570\u4e3b\u8981\u7528\u4e8e\u5224\u65ad\u5bf9\u8c61\u7c7b\u578b\u3002']}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u672c\u7c7b\u578b\u5224\u65ad",children:"\u57fa\u672c\u7c7b\u578b\u5224\u65ad"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\n\nclass MyClass:\n    def method(self):\n        pass\n\ndef my_function():\n    pass\n\n# \u5224\u65ad\u5bf9\u8c61\u7c7b\u578b\nprint(inspect.isclass(MyClass))        # True\nprint(inspect.ismethod(MyClass().method))  # True\nprint(inspect.isfunction(my_function))  # True\nprint(inspect.ismodule(inspect))        # True\nprint(inspect.isbuiltin(print))         # True\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u5bf9\u8c61\u6210\u5458",children:"\u83b7\u53d6\u5bf9\u8c61\u6210\u5458"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\n\nclass Person:\n    """\u4eba\u5458\u7c7b"""\n\n    name = "\u5f20\u4e09"\n\n    def __init__(self, age):\n        self.age = age\n\n    @staticmethod\n    def a():\n        pass\n\n    @classmethod\n    def b(cls):\n        pass\n\n    def c(self):\n        pass\n\n# \u83b7\u53d6\u7c7b\u7684\u6240\u6709\u6210\u5458\uff08\u5c5e\u6027\u3001\u65b9\u6cd5\uff09\nmembers = inspect.getmembers(Person)\nfor name, value in members:\n    # \u6392\u9664\u9b54\u6cd5\u65b9\u6cd5\n    if not name.startswith(\'__\'):\n        print(f"{name}: {value}")\n"""\na: <function Person.a at 0x00000250F315B9C0>\nb: <bound method Person.b of <class \'__main__.Person\'>>\nc: <function Person.c at 0x00000250F315BA60>\nname: \u5f20\u4e09\n"""\n\n# \u53ea\u83b7\u53d6\u7c7b\u65b9\u6cd5\nmethods = inspect.getmembers(Person, predicate=inspect.ismethod)\nprint(methods)\n"""\n[(\'b\', <bound method Person.b of <class \'__main__.Person\'>>)]\n"""\n\n# \u53ea\u83b7\u53d6\u51fd\u6570\uff08\u5305\u62ec\u672a\u7ed1\u5b9a\u7684\u65b9\u6cd5\uff09\nfunctions = inspect.getmembers(Person, predicate=inspect.isfunction)\nprint(functions)\n"""\n[(\'__init__\', <function Person.__init__ at 0x000001976EF48D60>),\n (\'a\', <function Person.a at 0x000001976F0BB9C0>), \n (\'c\', <function Person.c at 0x000001976F0BBA60>)\n]\n"""\n\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u5e38\u7528\u7c7b\u578b\u68c0\u67e5\u51fd\u6570",children:"\u5e38\u7528\u7c7b\u578b\u68c0\u67e5\u51fd\u6570"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\nimport types\n\ndef example():\n    pass\n\nclass Example:\n    def method(self):\n        pass\n\n# \u68c0\u67e5\u662f\u5426\u4e3a\u751f\u6210\u5668\ndef gen():\n    yield 1\n\nprint(inspect.isgeneratorfunction(gen))  # True\nprint(inspect.isgenerator(gen()))        # True\n\n# \u68c0\u67e5\u662f\u5426\u4e3a\u534f\u7a0b\nimport asyncio\nasync def coro():\n    await asyncio.sleep(1)\n\nprint(inspect.iscoroutinefunction(coro))  # True\nprint(inspect.iscoroutine(coro()))        # True\n\n# \u68c0\u67e5\u662f\u5426\u4e3a\u62bd\u8c61\u57fa\u7c7b\nimport abc\nclass Abstract(abc.ABC):\n    @abc.abstractmethod\n    def method(self):\n        pass\n\nprint(inspect.isabstract(Abstract))  # True\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u83b7\u53d6\u6e90\u4ee3\u7801",children:"\u83b7\u53d6\u6e90\u4ee3\u7801"}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u51fd\u6570\u548c\u7c7b\u7684\u6e90\u4ee3\u7801",children:"\u83b7\u53d6\u51fd\u6570\u548c\u7c7b\u7684\u6e90\u4ee3\u7801"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\n\n\ndef foo(x: int, y: int) -> int:\n    """\u8ba1\u7b97\u4e24\u6570\u4e4b\u548c"""\n    return x + y\n\n# \u83b7\u53d6\u6e90\u4ee3\u7801\nprint(inspect.getsource(foo))\n# \u8f93\u51fa:\n# def foo(x: int, y: int) -> int:\n#     """\u8ba1\u7b97\u4e24\u6570\u4e4b\u548c"""\n#     return x + y\n\n# \u83b7\u53d6\u6e90\u4ee3\u7801\u884c\u53f7\u8303\u56f4\nlines = inspect.getsourcelines(foo)\nprint(f"\u884c\u53f7: {lines[1]}, \u603b\u884c\u6570: {len(lines[0])}")\n# \u884c\u53f7: 4, \u603b\u884c\u6570: 3\n\n# \u83b7\u53d6\u6587\u4ef6\u4f4d\u7f6e\nprint(inspect.getfile(foo))  # \u6587\u4ef6\u8def\u5f84\n# d:\\test\\test.py\nprint(inspect.getmodule(foo))  # \u6a21\u5757\u5bf9\u8c61\n# <module \'__main__\' from \'d:\\\\test\\\\test.py\'>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u6587\u6863\u5b57\u7b26\u4e32",children:"\u83b7\u53d6\u6587\u6863\u5b57\u7b26\u4e32"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\n\ndef documented_function():\n    """\u8fd9\u662f\u4e00\u4e2a\u6709\u6587\u6863\u7684\u51fd\u6570\n    \n    \u8fd9\u662f\u8be6\u7ec6\u8bf4\u660e\u3002\n    """\n    pass\n\nprint(inspect.getdoc(documented_function))\n# \u8f93\u51fa: \u8fd9\u662f\u4e00\u4e2a\u6709\u6587\u6863\u7684\u51fd\u6570\\n\\n\u8fd9\u662f\u8be6\u7ec6\u8bf4\u660e\u3002\n'})}),"\n",(0,s.jsxs)(e.admonition,{title:"\u83b7\u53d6\u6e90\u4ee3\u7801\u7684\u9650\u5236",type:"tip",children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"getsource()"})," \u53ea\u80fd\u83b7\u53d6\u5728 Python \u6e90\u4ee3\u7801\u4e2d\u5b9a\u4e49\u7684\u5bf9\u8c61\u7684\u6e90\u4ee3\u7801\u3002\u5bf9\u4e8e\uff1a"]}),(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"C \u6269\u5c55\u6a21\u5757\u4e2d\u7684\u51fd\u6570"}),"\n",(0,s.jsx)(e.li,{children:"\u5185\u7f6e\u51fd\u6570"}),"\n",(0,s.jsx)(e.li,{children:"\u52a8\u6001\u751f\u6210\u7684\u4ee3\u7801"}),"\n"]}),(0,s.jsxs)(e.p,{children:["\u5c06\u65e0\u6cd5\u83b7\u53d6\u6e90\u4ee3\u7801\uff0c\u4f1a\u629b\u51fa ",(0,s.jsx)(e.code,{children:"OSError"}),"\u3002"]})]}),"\n",(0,s.jsx)(e.h3,{id:"\u4f7f\u7528-signature-\u5bf9\u8c61\u8fdb\u884c\u5185\u7701",children:"\u4f7f\u7528 Signature \u5bf9\u8c61\u8fdb\u884c\u5185\u7701"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"Signature"})," \u5bf9\u8c61\u63d0\u4f9b\u4e86\u51fd\u6570\u7b7e\u540d\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u53c2\u6570\u540d\u79f0\u3001\u9ed8\u8ba4\u503c\u3001\u7c7b\u578b\u6ce8\u89e3\u7b49\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\n\ndef example(a: int, b: str = "default", *args, **kwargs) -> str:\n    """\u793a\u4f8b\u51fd\u6570"""\n    return f"{a}-{b}"\n\n# \u83b7\u53d6\u51fd\u6570\u7b7e\u540d\nsig = inspect.signature(example)\nprint(sig)\n# \u8f93\u51fa: (a: int, b: str = \'default\', *args, **kwargs) -> str\n\n# \u83b7\u53d6\u53c2\u6570\u4fe1\u606f\nfor name, param in sig.parameters.items():\n    print(f"{name}: {param.annotation} = {param.default}")\n    print(f"  kind: {param.kind}")\n    print(f"  required: {param.default is inspect.Parameter.empty}")\n\n# \u53c2\u6570\u7c7b\u578b\ndef example(pos, /, pos_or_kw, *, kw_only):\n    pass\n\nsig = inspect.signature(example)\nfor name, param in sig.parameters.items():\n    kind = param.kind\n    if kind == inspect.Parameter.POSITIONAL_ONLY:\n        print(f"{name}: \u4ec5\u4f4d\u7f6e\u53c2\u6570")\n    elif kind == inspect.Parameter.POSITIONAL_OR_KEYWORD:\n        print(f"{name}: \u4f4d\u7f6e\u6216\u5173\u952e\u5b57\u53c2\u6570")\n    elif kind == inspect.Parameter.VAR_POSITIONAL:\n        print(f"{name}: *args")\n    elif kind == inspect.Parameter.VAR_KEYWORD:\n        print(f"{name}: **kwargs")\n    elif kind == inspect.Parameter.KEYWORD_ONLY:\n        print(f"{name}: \u4ec5\u5173\u952e\u5b57\u53c2\u6570")\n\n# \u7ed1\u5b9a\u53c2\u6570\ndef func(a, b=10, *args, c=20, **kwargs):\n    return a, b, args, c, kwargs\n\nsig = inspect.signature(func)\n\n# \u7ed1\u5b9a\u53c2\u6570\nbound = sig.bind(1, 2, 3, 4, c=30, d=40)\nprint(bound.arguments)  # {\'a\': 1, \'b\': 2, \'args\': (3, 4), \'c\': 30, \'kwargs\': {\'d\': 40}}\n\n# \u5e94\u7528\u9ed8\u8ba4\u503c\nbound.apply_defaults()\nprint(bound.arguments)\n# {\'a\': 1, \'b\': 2, \'args\': (3, 4), \'c\': 30, \'d\': 40}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u68c0\u67e5\u7c7b\u4e0e\u51fd\u6570",children:"\u68c0\u67e5\u7c7b\u4e0e\u51fd\u6570"}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u51fd\u6570\u53c2\u6570\u4fe1\u606f",children:"\u83b7\u53d6\u51fd\u6570\u53c2\u6570\u4fe1\u606f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\n\ndef example(a, b=10, *args, c=20, **kwargs):\n    \"\"\"\u793a\u4f8b\u51fd\u6570\"\"\"\n    pass\n\n# \u83b7\u53d6\u5b8c\u6574\u53c2\u6570\u4fe1\u606f\uff08\u63a8\u8350\uff09\nfull_args = inspect.getfullargspec(example)\nprint(full_args)\n# FullArgSpec(args=['a', 'b'], varargs='args', varkw='kwargs', \n#            defaults=(10,), kwonlyargs=['c'], kwonlydefaults={'c': 20}, \n#            annotations={})\n\n# \u83b7\u53d6\u53c2\u6570\u540d\u79f0\nprint(full_args.args)  # ['a', 'b']\nprint(full_args.varargs)  # 'args'\nprint(full_args.varkw)  # 'kwargs'\nprint(full_args.defaults)  # (10,)\nprint(full_args.kwonlyargs)  # ['c']\nprint(full_args.kwonlydefaults)  # {'c': 20}\n"})}),"\n",(0,s.jsx)(e.admonition,{title:"\u5df2\u5f03\u7528\u7684\u51fd\u6570",type:"warning",children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"getargspec()"})," \u5728 Python 3.11 \u4e2d\u5df2\u5f03\u7528\uff0c\u5e94\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"getfullargspec()"})," \u6216 ",(0,s.jsx)(e.code,{children:"signature()"}),"\u3002"]})}),"\n",(0,s.jsx)(e.h3,{id:"\u68c0\u67e5\u7c7b\u5c42\u6b21\u7ed3\u6784",children:"\u68c0\u67e5\u7c7b\u5c42\u6b21\u7ed3\u6784"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\n\nclass A:\n    pass\n\nclass B(A):\n    pass\n\nclass C(B):\n    pass\n\nclass D(A):\n    pass\n\n# \u83b7\u53d6\u7c7b\u5c42\u6b21\u7ed3\u6784\ntree = inspect.getclasstree([A, B, C, D])\nprint(tree)\n# \u8f93\u51fa: [(<class '__main__.A'>, ()), [(<class '__main__.B'>, (<class '__main__.A'>,)), \n#       [(<class '__main__.C'>, (<class '__main__.B'>,))], \n#       (<class '__main__.D'>, (<class '__main__.A'>,))]]\n\n# \u83b7\u53d6\u65b9\u6cd5\u89e3\u6790\u987a\u5e8f\uff08MRO\uff09\nprint(C.__mro__)  # \u6216\u4f7f\u7528 inspect.getmro(C)\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u8c03\u7528\u8005\u4fe1\u606f",children:"\u83b7\u53d6\u8c03\u7528\u8005\u4fe1\u606f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\n\ndef caller_info():\n    \"\"\"\u83b7\u53d6\u8c03\u7528\u8005\u4fe1\u606f\"\"\"\n    frame = inspect.currentframe()\n    caller_frame = frame.f_back\n    return {\n        'filename': caller_frame.f_code.co_filename,\n        'lineno': caller_frame.f_lineno,\n        'function': caller_frame.f_code.co_name\n    }\n\ndef test():\n    info = caller_info()\n    print(f\"\u5728 {info['filename']} \u7684\u7b2c {info['lineno']} \u884c\u8c03\u7528\")\n\ntest()\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u68c0\u67e5\u89e3\u91ca\u5668\u7684\u8c03\u7528\u5806\u6808",children:"\u68c0\u67e5\u89e3\u91ca\u5668\u7684\u8c03\u7528\u5806\u6808"}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u8c03\u7528\u6808",children:"\u83b7\u53d6\u8c03\u7528\u6808"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\n\ndef level3():\n    stack = inspect.stack()\n    print("\u8c03\u7528\u6808:")\n    for frame_info in stack:\n        print(f"  {frame_info.function} in {frame_info.filename}:{frame_info.lineno}")\n\ndef level2():\n    level3()\n\ndef level1():\n    level2()\n\nlevel1()\n# \u8f93\u51fa:\n# \u8c03\u7528\u6808:\n#   level3 in ...:5\n#   level2 in ...:11\n#   level1 in ...:14\n#   <module> in ...:17\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u5f53\u524d\u5e27\u4fe1\u606f",children:"\u83b7\u53d6\u5f53\u524d\u5e27\u4fe1\u606f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\n\ndef example():\n    # \u83b7\u53d6\u5f53\u524d\u5e27\n    frame = inspect.currentframe()\n    print(f"\u6587\u4ef6\u540d: {frame.f_code.co_filename}")\n    print(f"\u51fd\u6570\u540d: {frame.f_code.co_name}")\n    print(f"\u884c\u53f7: {frame.f_lineno}")\n    \n    # \u83b7\u53d6\u5c40\u90e8\u53d8\u91cf\n    print(f"\u5c40\u90e8\u53d8\u91cf: {frame.f_locals}")\n\ndef test(x=10):\n    y = 20\n    example()\n\ntest(100)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u83b7\u53d6\u56de\u6eaf\u4fe1\u606f",children:"\u83b7\u53d6\u56de\u6eaf\u4fe1\u606f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\nimport traceback\n\ndef func1():\n    func2()\n\ndef func2():\n    func3()\n\ndef func3():\n    # \u83b7\u53d6\u5f53\u524d\u5f02\u5e38\u7684\u56de\u6eaf\n    try:\n        raise ValueError("\u6d4b\u8bd5\u5f02\u5e38")\n    except:\n        tb = inspect.trace()\n        print("\u56de\u6eaf\u4fe1\u606f:")\n        for frame_info in tb:\n            print(f"  {frame_info.function} in {frame_info.filename}:{frame_info.lineno}")\n\nfunc1()\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u9759\u6001\u5730\u83b7\u53d6\u5c5e\u6027",children:"\u9759\u6001\u5730\u83b7\u53d6\u5c5e\u6027"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"getattr_static()"})," \u53ef\u4ee5\u83b7\u53d6\u5c5e\u6027\u800c\u4e0d\u89e6\u53d1\u63cf\u8ff0\u5668\u534f\u8bae\u6216 ",(0,s.jsx)(e.code,{children:"__getattr__()"})," \u7684\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\n\nclass Descriptor:\n    def __get__(self, obj, objtype=None):\n        print(\"\u63cf\u8ff0\u5668\u88ab\u8c03\u7528!\")\n        return 42\n\nclass MyClass:\n    attr = Descriptor()\n    normal_attr = \"\u6b63\u5e38\u5c5e\u6027\"\n\nobj = MyClass()\n\n# \u4f7f\u7528 getattr() \u4f1a\u89e6\u53d1\u63cf\u8ff0\u5668\nvalue1 = getattr(obj, 'attr')\n# \u8f93\u51fa: \u63cf\u8ff0\u5668\u88ab\u8c03\u7528!\n\n# \u4f7f\u7528 getattr_static() \u4e0d\u4f1a\u89e6\u53d1\u63cf\u8ff0\u5668\nvalue2 = inspect.getattr_static(obj, 'attr')\nprint(type(value2))  # <class '__main__.Descriptor'>\nprint(value2)  # <__main__.Descriptor object at ...>\n\n# \u6b63\u5e38\u5c5e\u6027\u4e24\u8005\u884c\u4e3a\u76f8\u540c\nprint(getattr(obj, 'normal_attr'))  # \u6b63\u5e38\u5c5e\u6027\nprint(inspect.getattr_static(obj, 'normal_attr'))  # \u6b63\u5e38\u5c5e\u6027\n"})}),"\n",(0,s.jsx)(e.admonition,{title:"\u4f7f\u7528\u573a\u666f",type:"info",children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"getattr_static()"})," \u4e3b\u8981\u7528\u4e8e\u6587\u6863\u5de5\u5177\u7b49\u9700\u8981\u9759\u6001\u5185\u7701\u7684\u573a\u666f\uff0c\u907f\u514d\u89e6\u53d1\u52a8\u6001\u5c5e\u6027\u67e5\u627e\u3002"]})}),"\n",(0,s.jsx)(e.h3,{id:"\u68c0\u67e5\u751f\u6210\u5668\u72b6\u6001",children:"\u68c0\u67e5\u751f\u6210\u5668\u72b6\u6001"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import inspect\n\ndef generator():\n    yield 1\n    yield 2\n\ngen = generator()\nprint(inspect.getgeneratorstate(gen))  # GEN_CREATED\n\nnext(gen)\nprint(inspect.getgeneratorstate(gen))  # GEN_SUSPENDED\n\ntry:\n    next(gen)\n    next(gen)\nexcept StopIteration:\n    pass\nprint(inspect.getgeneratorstate(gen))  # GEN_CLOSED\n\n# \u83b7\u53d6\u751f\u6210\u5668\u7684\u5c40\u90e8\u53d8\u91cf\ndef gen_with_locals():\n    x = 10\n    yield x\n    y = 20\n    yield y\n\ngen2 = gen_with_locals()\nnext(gen2)\nprint(inspect.getgeneratorlocals(gen2))  # {'x': 10}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u68c0\u67e5\u534f\u7a0b\u72b6\u6001",children:"\u68c0\u67e5\u534f\u7a0b\u72b6\u6001"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import inspect\nimport asyncio\n\nasync def coroutine():\n    await asyncio.sleep(0.1)\n    return "\u5b8c\u6210"\n\ncoro = coroutine()\nprint(inspect.getcoroutinestate(coro))  # CORO_CREATED\n\n# \u8fd0\u884c\u534f\u7a0b\nasyncio.run(coro)\nprint(inspect.getcoroutinestate(coro))  # CORO_CLOSED\n'})})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(p,{...n})}):p(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>c});var i=t(96540);const s={},r=i.createContext(s);function a(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);