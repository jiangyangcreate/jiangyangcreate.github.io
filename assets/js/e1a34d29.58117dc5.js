"use strict";(self.webpackChunkjiangmiemie=self.webpackChunkjiangmiemie||[]).push([[2638],{59992:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python/30\u7c7b\u578b\u6ce8\u89e3","title":"\u7c7b\u578b\u6ce8\u89e3","description":"\u7c7b\u578b\u6ce8\u89e3","source":"@site/docs/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python/30\u7c7b\u578b\u6ce8\u89e3.mdx","sourceDirName":"\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python","slug":"/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python/30\u7c7b\u578b\u6ce8\u89e3","permalink":"/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python/30\u7c7b\u578b\u6ce8\u89e3","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_position":30,"title":"\u7c7b\u578b\u6ce8\u89e3"},"sidebar":"tutorialSidebar","previous":{"title":"\u6253\u5305\u53d1\u5e03","permalink":"/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python/30\u6253\u5305\u53d1\u5e03"},"next":{"title":"\u8c03\u7528C","permalink":"/docs/\u9009\u62e9\u7f16\u7a0b\u8bed\u8a00/Python/30\u8c03\u7528C"}}');var s=i(74848),r=i(28453);const l={sidebar_position:30,title:"\u7c7b\u578b\u6ce8\u89e3"},a=void 0,c={},d=[{value:"\u7c7b\u578b\u6ce8\u89e3",id:"\u7c7b\u578b\u6ce8\u89e3",level:2},{value:"typing \u6a21\u5757",id:"typing-\u6a21\u5757",level:2},{value:"\u9ad8\u7ea7\u7c7b\u578b\u6ce8\u89e3",id:"\u9ad8\u7ea7\u7c7b\u578b\u6ce8\u89e3",level:2},{value:"Callable \u53ef\u8c03\u7528\u7c7b\u578b",id:"callable-\u53ef\u8c03\u7528\u7c7b\u578b",level:2},{value:"Protocol \u534f\u8bae\u7c7b\u578b",id:"protocol-\u534f\u8bae\u7c7b\u578b",level:2},{value:"\u6cdb\u578b (Generic)",id:"\u6cdb\u578b-generic",level:2},{value:"Literal \u5b57\u9762\u91cf\u7c7b\u578b",id:"literal-\u5b57\u9762\u91cf\u7c7b\u578b",level:2},{value:"Final \u548c ClassVar",id:"final-\u548c-classvar",level:2},{value:"\u7c7b\u578b\u68c0\u67e5\u5de5\u5177",id:"\u7c7b\u578b\u68c0\u67e5\u5de5\u5177",level:2},{value:"mypy \u4f7f\u7528\u6280\u5de7",id:"mypy-\u4f7f\u7528\u6280\u5de7",level:3},{value:"\u8fd0\u884c\u65f6\u7c7b\u578b\u68c0\u67e5",id:"\u8fd0\u884c\u65f6\u7c7b\u578b\u68c0\u67e5",level:3},{value:"type \u548c object \u7684\u5173\u7cfb",id:"type-\u548c-object-\u7684\u5173\u7cfb",level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u6e10\u8fdb\u5f0f\u7c7b\u578b\u6ce8\u89e3",id:"1-\u6e10\u8fdb\u5f0f\u7c7b\u578b\u6ce8\u89e3",level:3},{value:"2. \u4f7f\u7528\u7c7b\u578b\u522b\u540d\u63d0\u9ad8\u53ef\u8bfb\u6027",id:"2-\u4f7f\u7528\u7c7b\u578b\u522b\u540d\u63d0\u9ad8\u53ef\u8bfb\u6027",level:3},{value:"3. \u5408\u7406\u4f7f\u7528 Any",id:"3-\u5408\u7406\u4f7f\u7528-any",level:3}];function o(n){const e={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"\u7c7b\u578b\u6ce8\u89e3",children:"\u7c7b\u578b\u6ce8\u89e3"}),"\n",(0,s.jsx)(e.p,{children:"\u7c7b\u578b\u6ce8\u89e3\u662fPython 3.5+ \u5f15\u5165\u7684\u7279\u6027\uff0c\u7528\u4e8e\u5728\u4ee3\u7801\u4e2d\u6dfb\u52a0\u7c7b\u578b\u4fe1\u606f\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u8bed\u6cd5\u4e3a ",(0,s.jsx)(e.code,{children:"variable: type"}),",\u53ef\u4ee5\u5f53\u4f5c\u4e00\u79cd\u6587\u6863\u6ce8\u91ca\uff0c\u7528\u4e8e\u63cf\u8ff0\u53d8\u91cf\u3001\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u3002\u540c\u65f6\u548c\u6ce8\u91ca\u4e00\u6837\uff0c\u4e0d\u4f1a\u5f71\u54cd\u8fd0\u884c\u65f6\u884c\u4e3a\uff0c\u5373\u4fbf\u8f93\u5165\u7684\u53c2\u6570\u7c7b\u578b\u4e0d\u5339\u914d\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u7136\uff0c\u7c7b\u578b\u6ce8\u89e3\u4e5f\u53ef\u4ee5\u7528\u4e8e\u7c7b\u3001\u51fd\u6570\u3001\u65b9\u6cd5\u3001\u6a21\u5757\u7b49\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'# \u57fa\u672c\u7c7b\u578b\u6ce8\u89e3\nname: str = "Alice"\nage: int = 30\n\n# \u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\u6ce8\u89e3\ndef greet(name: str, age: int = 25) -> str:  # \u5e26\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\n    return f"{name} is {age} years old"\n\ngreet("Alice", \'30\') # \u5373\u4fbf\u8f93\u5165\u7684\u53c2\u6570\u7c7b\u578b\u4e0d\u5339\u914d\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519\u3002\n'})}),"\n",(0,s.jsx)(e.h2,{id:"typing-\u6a21\u5757",children:"typing \u6a21\u5757"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"typing"})," \u6a21\u5757\u63d0\u4f9b\u9ad8\u7ea7\u7c7b\u578b\u652f\u6301\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from typing import List, Dict, Tuple, Optional, Union\n\n# \u5bb9\u5668\u7c7b\u578b\nnames: List[str] = ["Alice", "Bob"]\nperson: Dict[str, Union[str, int]] = {"name": "Alice", "age": 30}\n\n# \u53ef\u9009\u7c7b\u578b\ndef get_age(name: str) -> Optional[int]:\n    if name == "Alice":\n        return 30\n    return None\n\n# \u7c7b\u578b\u522b\u540d\nUserId = int\nuser_id: UserId = 1001\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u9ad8\u7ea7\u7c7b\u578b\u6ce8\u89e3",children:"\u9ad8\u7ea7\u7c7b\u578b\u6ce8\u89e3"}),"\n",(0,s.jsx)(e.p,{children:"Python 3.10+ \u652f\u6301\u66f4\u7b80\u6d01\u7684\u8bed\u6cd5\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# \u8054\u5408\u7c7b\u578b (\u66ff\u4ee3 Union)\ndef process(data: str | int) -> None:\n    pass\n\n# \u53ef\u9009\u7c7b\u578b (\u66ff\u4ee3 Optional)\ndef find_user(id: int) -> str | None:\n    pass\n"})}),"\n",(0,s.jsx)(e.h2,{id:"callable-\u53ef\u8c03\u7528\u7c7b\u578b",children:"Callable \u53ef\u8c03\u7528\u7c7b\u578b"}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e8e\u6807\u6ce8\u51fd\u6570\u53c2\u6570\u6216\u8fd4\u56de\u503c\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from typing import Callable\n\ndef apply_function(func: Callable[[int, int], int], x: int, y: int) -> int:\n    return func(x, y)\n\n# \u4f7f\u7528\u793a\u4f8b\nresult = apply_function(lambda a, b: a + b, 5, 3)\n\n# \u65e0\u53c2\u6570\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\ndef run_task(task: Callable[[], None]) -> None:\n    task()\n"})}),"\n",(0,s.jsx)(e.h2,{id:"protocol-\u534f\u8bae\u7c7b\u578b",children:"Protocol \u534f\u8bae\u7c7b\u578b"}),"\n",(0,s.jsx)(e.p,{children:"\u5b9a\u4e49\u7ed3\u6784\u5316\u7c7b\u578b\uff0c\u5b9e\u73b0\u9e2d\u5b50\u7c7b\u578b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from typing import Protocol\n\nclass Drawable(Protocol):\n    def draw(self) -> None: ...\n\nclass Circle:\n    def draw(self) -> None:\n        print("Drawing circle")\n\ndef render(obj: Drawable) -> None:\n    obj.draw()\n\n# Circle \u6ca1\u6709\u7ee7\u627f Drawable\uff0c\u4f46\u7b26\u5408\u534f\u8bae\nrender(Circle())  # \u6b63\u786e\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u6cdb\u578b-generic",children:"\u6cdb\u578b (Generic)"}),"\n",(0,s.jsx)(e.p,{children:"\u521b\u5efa\u53ef\u590d\u7528\u7684\u7c7b\u578b\u5b89\u5168\u5bb9\u5668\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from typing import TypeVar, Generic, List\n\nT = TypeVar('T')\n\nclass Stack(Generic[T]):\n    def __init__(self) -> None:\n        self._items: List[T] = []\n    \n    def push(self, item: T) -> None:\n        self._items.append(item)\n    \n    def pop(self) -> T:\n        return self._items.pop()\n\n# \u4f7f\u7528\nint_stack: Stack[int] = Stack()\nint_stack.push(42)\n"})}),"\n",(0,s.jsx)(e.h2,{id:"literal-\u5b57\u9762\u91cf\u7c7b\u578b",children:"Literal \u5b57\u9762\u91cf\u7c7b\u578b"}),"\n",(0,s.jsx)(e.p,{children:"\u9650\u5236\u503c\u53ea\u80fd\u662f\u7279\u5b9a\u7684\u5b57\u9762\u91cf\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from typing import Literal\n\ndef set_mode(mode: Literal["read", "write", "append"]) -> None:\n    print(f"Mode set to: {mode}")\n\nset_mode("read")    # \u6b63\u786e\nset_mode("delete")  # \u7c7b\u578b\u68c0\u67e5\u5668\u4f1a\u62a5\u9519\n\n# \u591a\u79cd\u7c7b\u578b\u7684\u5b57\u9762\u91cf\ndef process_flag(flag: Literal[True, False, 0, 1]) -> None:\n    pass\n'})}),"\n",(0,s.jsx)(e.h2,{id:"final-\u548c-classvar",children:"Final \u548c ClassVar"}),"\n",(0,s.jsx)(e.p,{children:"\u63a7\u5236\u53d8\u91cf\u7684\u53ef\u53d8\u6027\u548c\u4f5c\u7528\u57df\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from typing import Final, ClassVar\n\nclass Config:\n    # \u5e38\u91cf\uff0c\u4e0d\u53ef\u4fee\u6539\n    MAX_SIZE: Final[int] = 100\n    # \u7c7b\u53d8\u91cf\uff0c\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\n    instance_count: ClassVar[int] = 0\n    \n    def __init__(self) -> None:\n        Config.instance_count += 1\n        # self.MAX_SIZE = 200  # \u7c7b\u578b\u68c0\u67e5\u5668\u4f1a\u62a5\u9519\n\n# \u6a21\u5757\u7ea7\u5e38\u91cf\nAPI_VERSION: Final = "v1.0"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u7c7b\u578b\u68c0\u67e5\u5de5\u5177",children:"\u7c7b\u578b\u68c0\u67e5\u5de5\u5177"}),"\n",(0,s.jsx)(e.h3,{id:"mypy-\u4f7f\u7528\u6280\u5de7",children:"mypy \u4f7f\u7528\u6280\u5de7"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# \u5ffd\u7565\u67d0\u884c\u7684\u7c7b\u578b\u68c0\u67e5\ndef legacy_function():  # type: ignore\n    return "no type hints"\n\n# \u5ffd\u7565\u7279\u5b9a\u9519\u8bef\u7c7b\u578b\nx: int = "hello"  # type: ignore[assignment]\n\n# \u6761\u4ef6\u7c7b\u578b\u68c0\u67e5\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    from some_module import ExpensiveClass\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u8fd0\u884c\u65f6\u7c7b\u578b\u68c0\u67e5",children:"\u8fd0\u884c\u65f6\u7c7b\u578b\u68c0\u67e5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from typing import get_type_hints\nimport inspect\n\ndef example(x: int, y: str = \"default\") -> str:\n    return f\"{x}: {y}\"\n\n# \u83b7\u53d6\u51fd\u6570\u7684\u7c7b\u578b\u63d0\u793a\nhints = get_type_hints(example)\nprint(hints)  # {'x': <class 'int'>, 'y': <class 'str'>, 'return': <class 'str'>}\n\n# \u68c0\u67e5\u51fd\u6570\u7b7e\u540d\nsig = inspect.signature(example)\nfor param in sig.parameters.values():\n    print(f\"{param.name}: {param.annotation}\")\n"})}),"\n",(0,s.jsx)(e.h2,{id:"type-\u548c-object-\u7684\u5173\u7cfb",children:"type \u548c object \u7684\u5173\u7cfb"}),"\n",(0,s.jsxs)(e.p,{children:["Python \u4e2d\u6240\u6709\u7c7b\u90fd\u662f ",(0,s.jsx)(e.code,{children:"type"})," \u7684\u5b9e\u4f8b\uff0c\u800c ",(0,s.jsx)(e.code,{children:"type"})," \u672c\u8eab\u4e5f\u662f\u7c7b\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"object"})," \u662f\u6240\u6709\u7c7b\u7684\u57fa\u7c7b"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"type"})," \u662f ",(0,s.jsx)(e.code,{children:"object"})," \u7684\u5b50\u7c7b\uff0c\u4e5f\u662f\u81ea\u8eab\u7684\u5143\u7c7b"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# type \u548c object \u7684\u5173\u7cfb\u9a8c\u8bc1\nprint(issubclass(type, object))  # True\nprint(isinstance(object, type))  # True\nprint(isinstance(type, type))    # True\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5173\u952e\u70b9\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"type"})," \u662f\u521b\u5efa\u7c7b\u7684\u7c7b (\u5143\u7c7b)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"object"})," \u662f\u6240\u6709\u7c7b\u7684\u57fa\u7c7b"]}),"\n",(0,s.jsxs)(e.li,{children:["\u7c7b\u65e2\u662f ",(0,s.jsx)(e.code,{children:"type"})," \u7684\u5b9e\u4f8b\uff0c\u53c8\u662f ",(0,s.jsx)(e.code,{children:"object"})," \u7684\u5b50\u7c7b"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u6e10\u8fdb\u5f0f\u7c7b\u578b\u6ce8\u89e3",children:"1. \u6e10\u8fdb\u5f0f\u7c7b\u578b\u6ce8\u89e3"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# \u4ece\u7b80\u5355\u5f00\u59cb\ndef add(a, b):\n    return a + b\n\n# \u9010\u6b65\u6dfb\u52a0\u7c7b\u578b\ndef add(a: int, b: int) -> int:\n    return a + b\n"})}),"\n",(0,s.jsx)(e.h3,{id:"2-\u4f7f\u7528\u7c7b\u578b\u522b\u540d\u63d0\u9ad8\u53ef\u8bfb\u6027",children:"2. \u4f7f\u7528\u7c7b\u578b\u522b\u540d\u63d0\u9ad8\u53ef\u8bfb\u6027"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from typing import Dict, List\n\n# \u590d\u6742\u7c7b\u578b\u7684\u522b\u540d\nUserData = Dict[str, Union[str, int, List[str]]]\nUserDatabase = Dict[int, UserData]\n\ndef get_user(db: UserDatabase, user_id: int) -> UserData:\n    return db[user_id]\n"})}),"\n",(0,s.jsx)(e.h3,{id:"3-\u5408\u7406\u4f7f\u7528-any",children:"3. \u5408\u7406\u4f7f\u7528 Any"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from typing import Any\n\n# \u660e\u786e\u8868\u793a\u4efb\u610f\u7c7b\u578b\ndef process_json(data: Any) -> Dict[str, Any]:\n    # \u5904\u7406\u672a\u77e5\u7ed3\u6784\u7684 JSON \u6570\u636e\n    return {"processed": data}\n'})})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function l(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);