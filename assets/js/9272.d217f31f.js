"use strict";(self.webpackChunkjiangmiemie=self.webpackChunkjiangmiemie||[]).push([[9272],{99272:(t,n,o)=>{o.d(n,{Ay:()=>F,Wf:()=>F});var e=o(96540);function r({width:t,height:n}){return t/n}function i(t,n=0){const o=10**n;return Math.round((t+Number.EPSILON)*o)/o}class s{constructor(t){this.comparator=t,this.heap=[],this.n=0}greater(t,n){return this.comparator(this.heap[t],this.heap[n])<0}swap(t,n){const o=this.heap[t];this.heap[t]=this.heap[n],this.heap[n]=o}swim(t){let n=t,o=Math.floor(n/2);for(;n>1&&this.greater(o,n);)this.swap(o,n),n=o,o=Math.floor(n/2)}sink(t){let n=t,o=2*n;for(;o<=this.n&&(o<this.n&&this.greater(o,o+1)&&(o+=1),this.greater(n,o));)this.swap(n,o),n=o,o=2*n}push(t){this.n+=1,this.heap[this.n]=t,this.swim(this.n)}pop(){if(0===this.n)return;this.swap(1,this.n),this.n-=1;const t=this.heap.pop();return this.sink(1),t}size(){return this.n}}function a(t,n,o){const e=function(t,n,o){const e=new Map,r=new Set,i=new Map;i.set(n,0);const a=new s((l=t=>t.weight,(t,n)=>l(n)-l(t)));var l;for(a.push({id:n,weight:0});a.size()>0;){const{id:n,weight:o}=a.pop();if(!r.has(n)){const s=t(n);r.add(n),s.forEach(((t,r)=>{const s=o+t,l=e.get(r),c=i.get(r);(void 0===c||c>s&&(c/s>1.005||void 0!==l&&l<n))&&(i.set(r,s),a.push({id:r,weight:s}),e.set(r,n))}))}}return i.has(o)?e:void 0}(t,n,o);return e?function(t,n){const o=[];for(let e=n;void 0!==e;e=t.get(e))o.push(e);return o.reverse()}(e,o):void 0}function l(t,n,o,e){return(n-(t.length-1)*o-2*e*t.length)/t.reduce(((t,n)=>t+r(n)),0)}function c(t,n,o,e,r,i,s){const a=t.slice(n,o),c=l(a,e,i,s);return c>0?(c-r)**2*a.length:void 0}function u({photos:t,layoutOptions:n}){const{spacing:o,padding:e,containerWidth:s,targetRowHeight:u,rowConstraints:h}=n,p=function({photos:t,targetRowHeight:n,containerWidth:o}){return i(o/n/t.reduce(((t,n)=>Math.min(r(n),t)),Number.MAX_VALUE))+2}({photos:t,containerWidth:s,targetRowHeight:u}),d=function({photos:t,layoutOptions:n,targetRowHeight:o,limitNodeSearch:e,rowConstraints:r}){return i=>{var s,a;const{containerWidth:l,spacing:u,padding:h}=n,p=new Map;p.set(i,0);const d=null!=(s=null==r?void 0:r.minPhotos)?s:1,m=Math.min(e,null!=(a=null==r?void 0:r.maxPhotos)?a:1/0);for(let n=i+d;n<t.length+1&&!(n-i>m);n+=1){const e=c(t,i,n,l,o,u,h);if(void 0===e)break;p.set(n,e)}return p}}({photos:t,layoutOptions:n,targetRowHeight:u,limitNodeSearch:p,rowConstraints:h}),m=a(d,0,t.length);if(void 0===m)return;const g=[];for(let i=1;i<m.length;i+=1){const n=t.map(((t,n)=>({photo:t,index:n}))).slice(m[i-1],m[i]),a=l(n.map((({photo:t})=>t)),s,o,e);g.push(n.map((({photo:t,index:o},e)=>({photo:t,layout:{height:a,width:a*r(t),index:o,photoIndex:e,photosCount:n.length}}))))}return g}function h(...t){return[...t].filter((t=>Boolean(t))).join(" ")}function p(t,n,o){const{width:e,photosCount:r}=n,{layout:s,spacing:a,padding:l,containerWidth:c}=o,u="rows"===s?r:o.columns,h=a*(u-1)+2*l*u;return`calc((${t} - ${h}px) / ${i((c-h)/e,5)})`}function d(t,n){return"rows"!==n.layout?`calc(100% - ${2*n.padding}px)`:p("100%",t,n)}function m(t,n,o){var e,r;return p(null!=(r=null==(e=t.match(/^\s*calc\((.*)\)\s*$/))?void 0:e[1])?r:t,n,o)}function g(t,n,o){var e;let r,i;const s=t.srcSet||t.images;return s&&s.length>0&&(r=s.concat(s.find((({width:n})=>n===t.width))?[]:[{src:t.src,width:t.width,height:t.height}]).sort(((t,n)=>t.width-n.width)).map((t=>`${t.src} ${t.width}w`)).join(", ")),i=(null==(e=o.sizes)?void 0:e.size)?(o.sizes.sizes||[]).map((({viewport:t,size:e})=>`${t} ${m(e,n,o)}`)).concat(m(o.sizes.size,n,o)).join(", "):`${Math.ceil(n.width/o.containerWidth*100)}vw`,{srcSet:r,sizes:i}}function f(t){var n,o;const{photo:r,layout:i,layoutOptions:s,imageProps:{style:a,className:l,...c}={},renderPhoto:u}=t,{onClick:p}=s,m={display:"block",boxSizing:"content-box",width:d(i,s),height:"auto",aspectRatio:`${r.width} / ${r.height}`,...s.padding?{padding:`${s.padding}px`}:null,...("columns"===s.layout||"masonry"===s.layout)&&i.photoIndex<i.photosCount-1?{marginBottom:`${s.spacing}px`}:null,...p?{cursor:"pointer"}:null,...a},f=p?t=>{p({event:t,photo:r,index:i.index})}:void 0,y={src:r.src,alt:null!=(n=r.alt)?n:"",title:r.title,onClick:f,style:m,className:h("react-photo-album--photo",l),loading:"lazy",decoding:"async",...g(r,i,s),...c},w=t=>{const{src:n,alt:o,srcSet:r,sizes:i,style:s,...a}=y;return e.createElement("img",{alt:o,...r?{srcSet:r,sizes:i}:null,src:n,style:(null==t?void 0:t.wrapped)?{display:"block",width:"100%",height:"100%"}:s,...a})},C=(({display:t,boxSizing:n,width:o,aspectRatio:e,padding:r,marginBottom:i,cursor:s})=>({display:t,boxSizing:n,width:o,aspectRatio:e,padding:r,marginBottom:i,cursor:s}))(m);return e.createElement(e.Fragment,null,null!=(o=null==u?void 0:u({photo:r,layout:i,layoutOptions:s,imageProps:y,renderDefaultPhoto:w,wrapperStyle:C}))?o:w())}function y({rowContainerProps:t,children:n}){return e.createElement("div",{...t},n)}function w(t){const{layoutOptions:n,rowIndex:o,rowsCount:r,renderRowContainer:i,rowContainerProps:{style:s,className:a,...l}={},children:c}=t,u={className:h("react-photo-album--row",a),style:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"flex-start",justifyContent:"space-between",...o<r-1?{marginBottom:`${n.spacing}px`}:null,...s},...l};return e.createElement(e.Fragment,null,(null!=i?i:y)({layoutOptions:n,rowIndex:o,rowsCount:r,rowContainerProps:u,children:c}))}function C(t){const{photos:n,layoutOptions:o,renderPhoto:r,renderRowContainer:i,componentsProps:{imageProps:s,rowContainerProps:a}}=t,l=u({photos:n,layoutOptions:o});return l?e.createElement(e.Fragment,null,l.map(((t,n)=>e.createElement(w,{key:`row-${n}`,layoutOptions:o,rowIndex:n,rowsCount:l.length,renderRowContainer:i,rowContainerProps:a},t.map((({photo:t,layout:n})=>e.createElement(f,{key:t.key||t.src,photo:t,layout:n,layoutOptions:o,renderPhoto:r,imageProps:s}))))))):null}function x(t,n,o,e){return function(t,n,o){const e=[o];for(let r=o,i=n;i>0;i-=1)r=t.get(r)[i].node,e.push(r);return e.reverse()}(function(t,n,o,e){const r=new Map,i=new Set;i.add(o);for(let s=0;s<n;s+=1){const o=[...i.keys()];i.clear(),o.forEach((o=>{const a=s>0?r.get(o)[s].weight:0;t(o).forEach((({neighbor:t,weight:l})=>{let c=r.get(t);c||(c=[],r.set(t,c));const u=a+l,h=c[s+1];(!h||h.weight>u&&(h.weight/u>1.0001||o<h.node))&&(c[s+1]={node:o,weight:u}),s<n-1&&t!==e&&i.add(t)}))}))}return r}(t,n,o,e),n,e)}function P({path:t,photos:n,containerWidth:o,columnsGaps:e,columnsRatios:i,spacing:s,padding:a}){const l=[],c=i.reduce(((t,n)=>t+n),0);for(let u=0;u<t.length-1;u+=1){const h=n.map(((t,n)=>({photo:t,index:n}))).slice(t[u],t[u+1]),p=i.reduce(((t,n,o)=>t+(e[u]-e[o])*n),0),d=(o-(t.length-2)*s-2*(t.length-1)*a-p)*i[u]/c;l.push(h.map((({photo:t,index:n},o)=>({photo:t,layout:{width:d,height:d/r(t),index:n,photoIndex:o,photosCount:h.length}}))))}return l}function v({photos:t,layoutOptions:n,targetColumnWidth:o}){const{columns:e,spacing:i,padding:s,containerWidth:a}=n,l=[],c=[];if(t.length<=e){const n=t.length>0?t.reduce(((t,n)=>t+r(n)),0)/t.length:1;for(let o=0;o<e;o+=1)l[o]=2*s,c[o]=o<t.length?r(t[o]):n;return{columnsGaps:l,columnsRatios:c,columnsModel:P({path:Array.from({length:e+1}).map(((n,o)=>Math.min(o,t.length))),photos:t,columnsRatios:c,columnsGaps:l,containerWidth:a,spacing:i,padding:s})}}const u=(t.reduce(((t,n)=>t+o/r(n)),0)+i*(t.length-e)+2*s*t.length)/e,h=function({photos:t,spacing:n,padding:o,targetColumnWidth:e,targetColumnHeight:i}){return s=>{const a=[],l=1.5*i;let c=e/r(t[s])+2*o;for(let u=s+1;u<t.length+1&&(a.push({neighbor:u,weight:(i-c)**2}),!(c>l||u===t.length));u+=1)c+=e/r(t[u])+n+2*o;return a}}({photos:t,targetColumnWidth:o,targetColumnHeight:u,spacing:i,padding:s}),p=x(h,e,0,t.length);for(let d=0;d<p.length-1;d+=1){const n=t.slice(p[d],p[d+1]);l[d]=i*(n.length-1)+2*s*n.length,c[d]=1/n.reduce(((t,n)=>t+1/r(n)),0)}return{columnsGaps:l,columnsRatios:c,columnsModel:P({path:p,photos:t,columnsRatios:c,columnsGaps:l,containerWidth:a,spacing:i,padding:s})}}function W(t){const{photos:n,layoutOptions:o}=t,{columns:e,spacing:r,padding:i,containerWidth:s}=o,a=(s-r*(e-1)-2*i*e)/e,{columnsGaps:l,columnsRatios:c,columnsModel:u}=v({photos:n,layoutOptions:o,targetColumnWidth:a});return u.findIndex((t=>t.findIndex((({layout:{width:t,height:n}})=>t<0||n<0))>=0))>=0?e>1?W({photos:n,layoutOptions:{...o,columns:e-1}}):void 0:{columnsModel:u,columnsGaps:l,columnsRatios:c}}function R({photos:t,layoutOptions:n}){return W({photos:t,layoutOptions:n})}function O({columnContainerProps:t,children:n}){return e.createElement("div",{...t},n)}function b(t){const{layoutOptions:n,columnIndex:o,columnsCount:e,columnsGaps:r,columnsRatios:s}=t,{layout:a,spacing:l,padding:c}=n;if("masonry"===a||!r||!s)return`calc((100% - ${l*(e-1)}px) / ${e})`;const u=s.reduce(((t,n)=>t+n),0);return`calc((100% - ${i((e-1)*l+2*e*c+s.reduce(((t,n,e)=>t+(r[o]-r[e])*n),0),3)}px) * ${i(s[o]/u,5)} + ${2*c}px)`}function E(t){const{layoutOptions:n,renderColumnContainer:o,children:r,columnContainerProps:{style:i,className:s,...a}={},...l}=t,c={className:h("react-photo-album--column",s),style:{display:"flex",flexDirection:"column",flexWrap:"nowrap",alignItems:"flex-start",width:b(t),justifyContent:"columns"===n.layout?"space-between":"flex-start",...i},...a};return e.createElement(e.Fragment,null,(null!=o?o:O)({layoutOptions:n,columnContainerProps:c,children:r,...l}))}function k(t){const{photos:n,layoutOptions:o,renderPhoto:r,renderColumnContainer:i,componentsProps:{imageProps:s,columnContainerProps:a}}=t,l=R({photos:n,layoutOptions:o});if(!l)return null;const{columnsModel:c,columnsRatios:u,columnsGaps:h}=l;return e.createElement(e.Fragment,null,c.map(((t,n)=>e.createElement(E,{key:`column-${n}`,layoutOptions:o,columnIndex:n,columnsCount:c.length,columnsGaps:h,columnsRatios:u,renderColumnContainer:i,columnContainerProps:a},t.map((({photo:t,layout:n})=>e.createElement(f,{key:t.key||t.src,photo:t,layout:n,layoutOptions:o,renderPhoto:r,imageProps:s})))))))}function $(t){const{photos:n,layoutOptions:o}=t,{columns:e,spacing:i,padding:s,containerWidth:a}=o,l=(a-i*(e-1)-2*s*e)/e;if(l<=0)return e>1?$({...t,layoutOptions:{...o,columns:e-1}}):void 0;const c=[];for(let r=0;r<e;r+=1)c[r]=0;return n.reduce(((t,n,o)=>{const e=c.reduce(((t,n,o)=>n<c[t]-1?o:t),0);return c[e]=c[e]+l/r(n)+i+2*s,t[e].push({photo:n,index:o}),t}),Array.from({length:e}).map((()=>[]))).map((t=>t.map((({photo:n,index:o},e)=>({photo:n,layout:{width:l,height:l/r(n),index:o,photoIndex:e,photosCount:t.length}})))))}function M(t){const{photos:n,layoutOptions:o,renderPhoto:r,renderColumnContainer:i,componentsProps:{imageProps:s,columnContainerProps:a}}=t,l=$({photos:n,layoutOptions:o});return l?e.createElement(e.Fragment,null,l.map(((t,n)=>e.createElement(E,{key:`masonry-column-${n}`,layoutOptions:o,columnsCount:l.length,columnIndex:n,renderColumnContainer:i,columnContainerProps:a},t.map((({photo:t,layout:n})=>e.createElement(f,{key:t.key||t.src,photo:t,layout:n,layoutOptions:o,renderPhoto:r,imageProps:s}))))))):null}function z({containerProps:t,children:n,containerRef:o}){return e.createElement("div",{ref:o,...t},n)}function I(t){const{layout:n,renderContainer:o,children:r,containerRef:i,containerProps:{style:s,className:a,...l}={}}=t,c={className:h("react-photo-album",`react-photo-album--${n}`,a),style:{display:"flex",flexWrap:"nowrap",justifyContent:"space-between",flexDirection:"rows"===n?"column":"row",...s},...l};return e.createElement(e.Fragment,null,(null!=o?o:z)({containerProps:c,containerRef:i,layout:n,children:r}))}function S(t,{newContainerWidth:n,newScrollbarWidth:o}){const{containerWidth:e,scrollbarWidth:r}=t;return void 0!==e&&void 0!==r&&void 0!==n&&void 0!==o&&n>e&&n-e<=20&&o<r?{containerWidth:e,scrollbarWidth:o}:e!==n||r!==o?{containerWidth:n,scrollbarWidth:o}:t}function N(t,n){let o=null==t?void 0:t.clientWidth;if(void 0!==o&&n&&n.length>0){const t=[...n.filter((t=>t>0))].sort(((t,n)=>n-t));t.push(Math.floor(t[t.length-1]/2));const e=o;o=t.find(((n,o)=>n<=e||o===t.length-1))}return o}const j=Object.freeze([1200,600,300,0]);function G(t,n){return"function"==typeof t?t(n):t}function H(t,n){return void 0!==t?G(t,n):void 0}function A(t,n,o,e=0){const r=H(t,n);return Math.round(Math.max(void 0===r?function(t,n){const o=j.findIndex((t=>t<=n));return G(t[o>=0?o:0],n)}(o,n):r,e))}function F(t){const{photos:n,layout:o,renderContainer:r,defaultContainerWidth:i,breakpoints:s}=t,{containerRef:a,containerWidth:l}=function(t,n){const[{containerWidth:o},r]=e.useReducer(S,{containerWidth:n}),i=e.useRef(null),s=e.useRef();return{containerRef:e.useCallback((n=>{var o;null==(o=s.current)||o.disconnect(),s.current=void 0,i.current=n;const e=()=>r({newContainerWidth:N(i.current,t),newScrollbarWidth:window.innerWidth-document.documentElement.clientWidth});e(),n&&"undefined"!=typeof ResizeObserver&&(s.current=new ResizeObserver(e),s.current.observe(n))}),[t]),containerWidth:o}}(function(t){const n=e.useRef(t);return t&&n.current&&t.join()===n.current.join()||(n.current=t),n.current}(s),i);if(!o||!["rows","columns","masonry"].includes(o)||!Array.isArray(n))return null;const c=l?function({layout:t,onClick:n,containerWidth:o,targetRowHeight:e,rowConstraints:r,columns:i,spacing:s,padding:a,sizes:l}){return{layout:t,onClick:n,containerWidth:o,columns:A(i,o,[5,4,3,2],1),spacing:A(s,o,[20,15,10,5]),padding:A(a,o,[0,0,0,0,0]),targetRowHeight:A(e,o,[t=>t/5,t=>t/4,t=>t/3,t=>t/2]),rowConstraints:H(r,o),sizes:l}}({containerWidth:l,...t}):void 0,u=function(t,n,o){const{photos:e,componentsProps:r}=t,i=G(r,n)||{};if(o){const{layout:t,spacing:n,padding:r,rowConstraints:s}=o;if("rows"===t){const{singleRowMaxHeight:t}=s||{};if(t){const o=Math.floor(e.reduce(((n,{width:o,height:e})=>n+o/e*t-2*r),r*e.length*2+n*(e.length-1)));o>0&&(i.containerProps=i.containerProps||{},i.containerProps.style={maxWidth:o,...i.containerProps.style})}}}return i}(t,l,c);return e.createElement(I,{layout:o,containerRef:a,renderContainer:r,containerProps:u.containerProps},c&&function(t,n,o){const{photos:r,layout:i,renderPhoto:s,renderRowContainer:a,renderColumnContainer:l}=t,c={photos:r,renderPhoto:s,componentsProps:n};return"rows"===i?e.createElement(C,{layoutOptions:o,renderRowContainer:a,...c}):"columns"===i?e.createElement(k,{layoutOptions:o,renderColumnContainer:l,...c}):e.createElement(M,{layoutOptions:o,renderColumnContainer:l,...c})}(t,u,c))}}}]);