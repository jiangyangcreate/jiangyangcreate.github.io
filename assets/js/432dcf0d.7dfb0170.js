"use strict";(self.webpackChunkjiangmiemie=self.webpackChunkjiangmiemie||[]).push([[5101],{38211:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});var s=i(73533),r=i(74848),l=i(28453);const t={title:"ROS2\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f",date:"2025-7-30",authors:"jiangmiemie",tags:["ROS2","\u89c6\u89c9","\u8fd0\u52a8\u7b97\u6cd5","\u4eff\u771f"],keywords:["ROS2","\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5","Gazebo","rclpy","\u673a\u5668\u4eba\u4eff\u771f"],description:"\u901a\u8fc7ROS2\u5b98\u65b9\u63d0\u4f9b\u7684Gazebo\u865a\u62df\u4eff\u771f\uff0c\u5b9e\u73b0\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f"},o=void 0,a={authorsImageUrls:[void 0]},d=[{value:"ROS2\u6846\u67b6",id:"ros2\u6846\u67b6",level:2},{value:"\u901a\u4fe1\u4f18\u52bf",id:"\u901a\u4fe1\u4f18\u52bf",level:3},{value:"\u4e30\u5bcc\u7684\u901a\u4fe1\u7c7b\u578b",id:"\u4e30\u5bcc\u7684\u901a\u4fe1\u7c7b\u578b",level:4},{value:"\u81ea\u52a8\u53d1\u73b0\u673a\u5236",id:"\u81ea\u52a8\u53d1\u73b0\u673a\u5236",level:4},{value:"\u9694\u79bb\u673a\u5236",id:"\u9694\u79bb\u673a\u5236",level:4},{value:"\u591a\u8bbe\u5907\u8de8\u57df\u901a\u4fe1",id:"\u591a\u8bbe\u5907\u8de8\u57df\u901a\u4fe1",level:4},{value:"\u6a21\u5757\u4ed3\u5e93",id:"\u6a21\u5757\u4ed3\u5e93",level:3},{value:"ROS 2\u5b89\u88c5",id:"ros-2\u5b89\u88c5",level:3},{value:"\u8bbe\u7f6e\u7f16\u7801",id:"\u8bbe\u7f6e\u7f16\u7801",level:4},{value:"\u6dfb\u52a0\u6e90",id:"\u6dfb\u52a0\u6e90",level:4},{value:"\u5b89\u88c5ROS 2",id:"\u5b89\u88c5ros-2",level:4},{value:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf",id:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf",level:4},{value:"\u8282\u70b9\u57fa\u64cd",id:"\u8282\u70b9\u57fa\u64cd",level:3},{value:"\u521b\u5efa\u8282\u70b9",id:"\u521b\u5efa\u8282\u70b9",level:4},{value:"\u7f16\u5199\u4ee3\u7801",id:"\u7f16\u5199\u4ee3\u7801",level:4},{value:"\u7f16\u8bd1",id:"\u7f16\u8bd1",level:4},{value:"\u8fd0\u884c",id:"\u8fd0\u884c",level:4},{value:"rclpy",id:"rclpy",level:3},{value:"\u5165\u95e8\u4f53\u9a8c",id:"\u5165\u95e8\u4f53\u9a8c",level:4},{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316",level:5},{value:"\u5faa\u73af\u6267\u884c",id:"\u5faa\u73af\u6267\u884c",level:5},{value:"\u5173\u95ed",id:"\u5173\u95ed",level:5},{value:"\u4e0a\u4e0b\u6587",id:"\u4e0a\u4e0b\u6587",level:4},{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316-1",level:5},{value:"\u72b6\u6001\u68c0\u5bdf",id:"\u72b6\u6001\u68c0\u5bdf",level:5},{value:"\u8ddf\u8e2a",id:"\u8ddf\u8e2a",level:5},{value:"\u5173\u95ed\u4e0a\u4e0b\u6587",id:"\u5173\u95ed\u4e0a\u4e0b\u6587",level:5},{value:"\u901a\u4fe1\u793a\u4f8b",id:"\u901a\u4fe1\u793a\u4f8b",level:3},{value:"\u8bdd\u9898",id:"\u8bdd\u9898",level:4},{value:"\u670d\u52a1",id:"\u670d\u52a1",level:4},{value:"\u52a8\u4f5c",id:"\u52a8\u4f5c",level:4},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:4},{value:"Gazebo",id:"gazebo",level:2},{value:"URDF",id:"urdf",level:3},{value:"\u4f20\u611f\u5668",id:"\u4f20\u611f\u5668",level:3},{value:"\u89c6\u89c9\u65b9\u6848\u5730\u56fe\u4e0e\u6a21\u578b",id:"\u89c6\u89c9\u65b9\u6848\u5730\u56fe\u4e0e\u6a21\u578b",level:3},{value:"ros_gz_bridge",id:"ros_gz_bridge",level:2},{value:"\u8c03\u8bd5\u547d\u4ee4",id:"\u8c03\u8bd5\u547d\u4ee4",level:3},{value:"\u7b97\u6cd5\u8282\u70b9",id:"\u7b97\u6cd5\u8282\u70b9",level:2},{value:"\u9884\u5904\u7406",id:"\u9884\u5904\u7406",level:3},{value:"\u611f\u5174\u8da3\u533a\u57df",id:"\u611f\u5174\u8da3\u533a\u57df",level:4},{value:"\u7070\u5ea6\u5316\u4e0e\u4e8c\u503c\u5316",id:"\u7070\u5ea6\u5316\u4e0e\u4e8c\u503c\u5316",level:4},{value:"\u53bb\u566a",id:"\u53bb\u566a",level:5},{value:"\u53ef\u89c6\u5316",id:"\u53ef\u89c6\u5316",level:4},{value:"\u8fd0\u52a8\u7b97\u6cd5\u8bbe\u8ba1",id:"\u8fd0\u52a8\u7b97\u6cd5\u8bbe\u8ba1",level:3}];function c(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components},{Details:i,Highlight:s}=e;return i||_("Details",!0),s||_("Highlight",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u672c\u7ae0\u8282\u901a\u8fc7ROS2\u5b98\u65b9\u63d0\u4f9b\u7684Gazebo\u865a\u62df\u4eff\u771f\uff0c\u5b9e\u73b0\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f\u3002"}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsx)(e.p,{children:"\u4ec0\u4e48\u662f\u89c6\u89c9\u8fd0\u52a8\u63a7\u5236\u7b97\u6cd5\uff1f"}),(0,r.jsx)(e.p,{children:"\u8fd0\u52a8\u63a7\u5236\u7b97\u6cd5\u4e3b\u8981\u662f\u901a\u8fc7\u4f20\u611f\u5668\uff0c\u5c06\u91c7\u96c6\u5230\u7684\u6570\u636e\uff0c\u8f6c\u5316\u4e3a\u8fd0\u52a8\u63a7\u5236\u6307\u4ee4\u3002"}),(0,r.jsx)(e.p,{children:"\u4f20\u611f\u5668\u5305\u542b\uff1a\u89c6\u89c9\u3001\u91cd\u529b\u3001\u529b\u53cd\u9988\u3001\u52a0\u901f\u5ea6\u3001\u6d4b\u8ddd\u7b49\u591a\u79cd\u7c7b\u578b\u3002\u7279\u65af\u62c9\u7684\u81ea\u52a8\u9a7e\u9a76\u4f7f\u7528\u7684\u65b9\u6848\u4e2d\u89c6\u89c9\u662f\u6700\u4e3b\u8981\u7684\u4fe1\u606f\u6765\u6e90\u3002"}),(0,r.jsx)(e.p,{children:"\u8fd0\u52a8\u63a7\u5236\u4ece\u6613\u5230\u96be\u6709\uff1a\u5c65\u5e26\u7ed3\u6784\u3001\u5dee\u901f\u7ed3\u6784\u3001\u963f\u514b\u66fc\u7ed3\u6784\u3001\u5168\u5411\u7ed3\u6784\u3001\u8db3\u817f\u7ed3\u6784\u3002"})]}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\u8981\u865a\u62df\u4eff\u771f\uff1f"}),(0,r.jsx)(e.p,{children:"\u76ee\u524d\u8f83\u4e3a\u5148\u8fdb\u7684\u817f\u8db3\u7ed3\u6784\u673a\u5668\u4eba\u60f3\u8981\u5b8c\u6210\u9ad8\u96be\u5ea6\u52a8\u4f5c\uff0c\u4f8b\u5982\uff1a\u540e\u7a7a\u7ffb\u3001\u524d\u7a7a\u7ffb\u3001\u97e6\u4f2f\u65af\u7279\u7a7a\u7ffb\u3002\u4e00\u65e6\u5931\u8d25\u4f1a\u5bf9\u672c\u4e0d\u5145\u88d5\u7684\u539f\u578b\u673a\u9020\u6210\u4e25\u91cd\u7684\u635f\u574f\u3002"}),(0,r.jsx)(e.p,{children:"\u6240\u4ee5\u901a\u8fc7\u4eff\u771f\u8f6f\u4ef6\u8bad\u7ec3\uff0c\u6709\u5982\u4e0b\u597d\u5904\uff1a"}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u53ef\u4ee5\u5728\u4f4e\u98ce\u9669\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210\u7b97\u6cd5\u7684\u8c03\u8bd5\u548c\u4f18\u5316\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5bf9\u4e8e\u590d\u6742\u7b97\u6cd5\uff0c\u53ef\u4ee5\u540c\u65f6\u542f\u52a8\u591a\u4e2a\u4eff\u771f\u8f6f\u4ef6\uff0c\u8fdb\u884c\u5e76\u884c\u8bad\u7ec3\uff0c\u63d0\u9ad8\u8bad\u7ec3\u6548\u7387\u3002"}),"\n"]})]}),"\n",(0,r.jsxs)(e.admonition,{type:"warning",children:[(0,r.jsx)(e.p,{children:"\u865a\u62df\u4eff\u771f\u9700\u8981\u4e00\u5b9a\u7684\u7b97\u529b\u3002\u672c\u5730\u4f7f\u7528\u524d\uff0c\u9996\u5148\u786e\u4fdd\u4f60\u7684\u7535\u8111\u5305\u542b\u663e\u5361\u3002"}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u2714\u63a8\u8350\u4f7f\u7528\u539f\u751fUbuntu\u6700\u5927\u9650\u5ea6\u53d1\u6325\u786c\u4ef6\u6027\u80fd\u3002\u975e\u539f\u751f\u73af\u5883\u4e0b\u53ef\u80fd\u51fa\u73b0\u6d88\u606f\u5f02\u5e38\u3001\u65f6\u95f4\u5f02\u5e38\u7b49\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u9ad8\u7b97\u529b\u7684\u7535\u8111\u53ef\u4ee5\u4f7f\u7528wsl\u5b89\u88c5Ubuntu\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u274c\u4f7f\u7528VM\u865a\u62df\u673a\u4f1a\u4ea7\u751f\u8f83\u5927\u7684\u5ef6\u8fdf\u3002"}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsx)(e.p,{children:"\u7528\u673a\u5668\u5b66\u4e60\u4e2d\u7684\u6982\u5ff5\u6765\u7c7b\u6bd4\uff0cGazebo\u597d\u6bd4\u662fPytorch\uff0cROS2\u597d\u6bd4\u662fPython\u3002"}),(0,r.jsx)(e.p,{children:"\u4f60\u5e0c\u671b\u4f7f\u7528Pytorch\u5f00\u59cb\u6df1\u5ea6\u5b66\u4e60\uff0c\u6240\u4ee5\u8981\u67e5\u770b\u6700\u65b0\u7248Pytorch\u9002\u914d\u7684Python\u7248\u672c\uff083.10+\uff09\uff0c\u9700\u8981\u82f1\u4f1f\u8fbe\u663e\u5361\u624d\u80fd\u52a0\u901f\uff0c\u518d\u67e5\u770bPython\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08Mac\u3001Linux\u3001Windows\uff09\u3002"}),(0,r.jsx)(e.p,{children:"\u641e\u6e05\u695a\u4e4b\u540e\uff0c\u518d\u4ece\u7cfb\u7edf\u5f00\u59cb\uff0c\u5b89\u88c5Python\uff0c\u6700\u540ePytorch\u548c\u663e\u5361\u9a71\u52a8\u5b89\u88c5\u6210\u529f\u3002\u8c0b\u5b9a\u800c\u540e\u52a8\u3002"})]}),"\n",(0,r.jsx)(e.h2,{id:"ros2\u6846\u67b6",children:"ROS2\u6846\u67b6"}),"\n",(0,r.jsx)(e.p,{children:"ROS 2\u9700\u8981\u4f9d\u8d56\u4e8eUbuntu\u7cfb\u7edf\uff0c\u5176\u5fae\u63a7\u5236\u5668\u76f8\u8f83\u4e8e\u666e\u901aMCU\u6210\u672c\u66f4\u9ad8\u3002\u4e3b\u8981\u7528\u4e8e\u9ad8\u7ea7\u673a\u5668\u4eba\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u901a\u4fe1\u4f18\u52bf",children:"\u901a\u4fe1\u4f18\u52bf"}),"\n",(0,r.jsx)(e.h4,{id:"\u4e30\u5bcc\u7684\u901a\u4fe1\u7c7b\u578b",children:"\u4e30\u5bcc\u7684\u901a\u4fe1\u7c7b\u578b"}),"\n",(0,r.jsx)(e.p,{children:"ROS 2\u8282\u7701\u81ea\u5df1\u642d\u5efa\u7f51\u7edc\u3001\u5b9a\u4e49\u901a\u4fe1\u7c7b\u578b\u3001\u7ba1\u7406\u8fde\u63a5\u7684\u65f6\u95f4\u3002"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u901a\u4fe1\u6a21\u5f0f"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u4f5c\u7528"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u7279\u70b9"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u5e94\u7528\u573a\u666f"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:(0,r.jsx)(e.strong,{children:"\u8bdd\u9898\uff1a\u53d1\u5e03-\u8ba2\u9605 (Publish-Subscribe)"})}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u5355\u5411\u3001\u5f02\u6b65\u6570\u636e\u6d41"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u9ad8\u6548\u3001\u89e3\u8026\uff0c\u9002\u7528\u4e8e\u4f20\u611f\u5668\u6570\u636e\u6d41\u3001\u72b6\u6001\u66f4\u65b0"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u4f20\u611f\u5668\u6570\u636e\u6d41\uff08\u5982\u76f8\u673a\u56fe\u50cf\u3001\u6fc0\u5149\u96f7\u8fbe\u6570\u636e\uff09\u3001\u673a\u5668\u4eba\u72b6\u6001\u66f4\u65b0\uff08\u5982\u4f4d\u7f6e\u3001\u901f\u5ea6\uff09"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:(0,r.jsx)(e.strong,{children:"\u670d\u52a1\uff1a\u670d\u52a1\u7aef-\u5ba2\u6237\u7aef (Service-Client)"})}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u540c\u6b65\u3001\u8bf7\u6c42-\u54cd\u5e94"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u963b\u585e\u5f0f\u901a\u4fe1\uff0c\u7528\u4e8e\u9700\u8981\u660e\u786e\u7ed3\u679c\u7684\u4efb\u52a1"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u89e6\u53d1\u7279\u5b9a\u52a8\u4f5c\uff08\u5982\u6293\u53d6\u7269\u4f53\uff09\u3001\u67e5\u8be2\u7269\u4f53 ID"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:(0,r.jsx)(e.strong,{children:"\u52a8\u4f5c (Actions)"})}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u957f\u65f6\u4efb\u52a1\u5904\u7406"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u5f02\u6b65\u3001\u652f\u6301\u8fdb\u5ea6\u53cd\u9988\u548c\u53d6\u6d88"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u79fb\u52a8\u673a\u5668\u4eba\u5230\u6307\u5b9a\u4f4d\u7f6e\u3001\u673a\u68b0\u81c2\u6267\u884c\u590d\u6742\u4efb\u52a1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:(0,r.jsx)(e.strong,{children:"\u53c2\u6570 (Parameters)"})}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u52a8\u6001\u914d\u7f6e\u8282\u70b9\u884c\u4e3a"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u975e\u5b9e\u65f6\u901a\u4fe1\uff0c\u7528\u4e8e\u542f\u52a8\u65f6\u6216\u8fd0\u884c\u65f6\u7684\u914d\u7f6e\u8c03\u6574"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8c03\u6574 PID \u63a7\u5236\u5668\u589e\u76ca\u3001\u4fee\u6539\u4f20\u611f\u5668\u53d1\u5e03\u9891\u7387"})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"\u81ea\u52a8\u53d1\u73b0\u673a\u5236",children:"\u81ea\u52a8\u53d1\u73b0\u673a\u5236"}),"\n",(0,r.jsxs)(e.p,{children:["\u540c\u4e3aROS 2\uff0c\u5728\u540c\u4e00\u7f51\u6bb5\u4e0b\u7684\u4e0d\u540c\u8bbe\u5907\u53ef\u4ee5",(0,r.jsx)(s,{children:"\u81ea\u52a8\u53d1\u73b0"}),"\u3002"]}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsx)(e.p,{children:"\u81ea\u52a8\u53d1\u73b0\u524d\u63d0\uff1a\u6307\u8981\u6c42\u4e2d\u7ee7\u8bbe\u5907\u5141\u8bb8\u5b50\u8bbe\u5907\u81ea\u7531\u901a\u4fe1\u3002"}),(0,r.jsx)(e.p,{children:"\u4e2d\u7ee7\u8bbe\u5907\u53ef\u80fd\u662f\u8def\u7531\u5668\u3001\u6216\u8005\u624b\u673a\u7684\u70ed\u70b9\u3001\u968f\u8eabWIFI\u7b49\u3002"}),(0,r.jsx)(e.p,{children:"\u5141\u8bb8\u5b50\u8bbe\u5907\u81ea\u7531\u901a\u4fe1\u6709\u5229\u6709\u5f0a\uff0c\u5982\u679c\u4f60\u5728\u5546\u573a\u6216\u8005\u5496\u5561\u9986\u8fde\u63a5\u4ed6\u4eec\u7684WIFI\uff0c\u4f60\u7684\u7535\u8111\u53ef\u80fd\u63d0\u9192\u4f60\uff1a\u4f60\u7684\u7f51\u7edc\u6d3b\u52a8\u53ef\u80fd\u88ab\u5176\u4ed6\u8bbe\u5907\u53d1\u73b0\u3002\u81ea\u7531\u901a\u4fe1\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u5b89\u5168\u9690\u60a3\u3002\u56e0\u6b64\u5e76\u4e0d\u662f\u6240\u6709\u7684\u8def\u7531\u5668\u90fd\u9ed8\u8ba4\u5141\u8bb8\u5141\u8bb8\u5b50\u8bbe\u5907\u81ea\u7531\u901a\u4fe1\u3002"}),(0,r.jsxs)(e.p,{children:["\u6709\u7684\u8bbe\u5907\u4f1a\u6709\u9632\u706b\u5899\uff0c\u4e34\u65f6\u5173\u95ed\u9632\u706b\u5899\uff1a",(0,r.jsx)(e.code,{children:"sudo ufw disable"}),"\uff0c\u53e6\u5916\u8981\u5141\u8bb8",(0,r.jsx)(e.code,{children:"UDP"}),"\u591a\u64ad\u7aef\u53e3\uff08\u9ed8\u8ba47400~7500\uff09\u3002"]})]}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u901a\u8fc7",(0,r.jsx)(e.code,{children:"ping <\u5176\u4ed6\u673a\u5668\u7684IP>"}),"\u5e76\u8054\u901a\u6210\u529f\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6b64\u65f6\u4f60\u53ef\u4ee5\u901a\u8fc7",(0,r.jsx)(e.code,{children:"ros2"}),"\u8fd0\u884c\u8282\u70b9\u53d1\u5e03\u6d88\u606f\uff0c\u5176\u4ed6\u8bbe\u5907\u7684\u63a5\u6536\u8005\u4f1a\u6536\u5230\u4f60\u7684\u6d88\u606f\u3002"]}),"\n",(0,r.jsx)(e.h4,{id:"\u9694\u79bb\u673a\u5236",children:"\u9694\u79bb\u673a\u5236"}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u4f60\u540c\u4e2a\u7f51\u6bb5\u4e0b\uff0c\u6709\u65e0\u4eba\u673a\u548c\u673a\u5668\u72d7\u3002\u4f60\u60f3\u5c06\u5176\u7f16\u961f\u4e3a\uff1a\u7a7a\u519b + \u9646\u519b\uff1b\u53c8\u6216\u80055\u53f0\u65e0\u4eba\u673a + \u673a\u5668\u72d7\u4e3a\u4e00\u7ec4\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["ROS 2\u63d0\u4f9b\u4e86\u901a\u4fe1",(0,r.jsx)(s,{children:"\u9694\u79bb\u673a\u5236"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u540c\u4e2a\u7f16\u961f\u7684\u6240\u6709\u8bbe\u5907\u7ec8\u7aef\u4e2d\u6267\u884c\uff1a",(0,r.jsx)(e.code,{children:"export ROS_DOMAIN_ID=1"}),"\u3002\uff08\u503c\u8303\u56f4\u4e3a0~101\uff0c0\u4e3a\u9ed8\u8ba4\u503c\uff09"]}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e2a\u547d\u4ee4\u662f\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u3002ROS 2\u901a\u8fc7\u5224\u65ad\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u6765\u8bc6\u522b\u662f\u5426\u4e3a\u4e00\u7ec4\u3002\u4e0d\u540cID\u8282\u70b9\u65e0\u6cd5\u901a\u4fe1\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u56e0\u6b64\u5982\u679c\u4f60\u60f3\u5c06\u5176\u5206\u4e3a\u4e24\u7ec4\uff0c\u53ea\u9700\u8981\u5728\u4e00\u534a\u7684\u8bbe\u5907\u4e0a\u6539\u4e3a\u975e0\u7684\uff0c\u76f8\u540c\u7684ID\u5373\u53ef\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u591a\u8bbe\u5907\u8de8\u57df\u901a\u4fe1",children:"\u591a\u8bbe\u5907\u8de8\u57df\u901a\u4fe1"}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u4f60\u7684\u8bbe\u5907\u5206\u522b\u5728\u4e24\u4e2a\u57ce\u5e02\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u4e00\u53f0\u516c\u7f51\u4e0b\u7684\u670d\u52a1\u5668(\u4e5f\u53ef\u4ee5\u5728\u4e24\u4e2a\u7f51\u6bb5\u4e0b\uff0c\u914d\u7f6e\u4e00\u4e2a\u90fd\u80fd\u8bbf\u95ee\u7684\u8bbe\u5907\u4f5c\u4e3a\u4e2d\u7ee7)\uff0c\u5c06\u4e24\u4e2a\u57ce\u5e02\u7684\u8bbe\u5907\u8fde\u63a5\u5230\u8fd9\u53f0\u670d\u52a1\u5668\u4e0a\u3002\u8fd9\u79cd\u901a\u4fe1\u65b9\u5f0f\u88ab\u79f0\u4e3a",(0,r.jsx)(s,{children:"Fast-DDS"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\uff1a",(0,r.jsx)(e.code,{children:"fastdds discovery --server-id 0"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u5f00\u653e11888\u7aef\u53e3\u3002",(0,r.jsx)(e.code,{children:"sudo ufw allow 11888/tcp"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u8bbe\u5907\u4e0a\u8fd0\u884c\uff1a",(0,r.jsx)(e.code,{children:"export ROS_DISCOVERY_SERVERS=<\u670d\u52a1\u5668IP>:<\u670d\u52a1\u5668\u7aef\u53e3>"}),"\u3002\uff08\u7aef\u53e3\u9ed8\u8ba411888\uff09"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8bbe\u7f6eROS\u4e2d\u95f4\u4ef6\u4e3a",(0,r.jsx)(e.code,{children:"rmw_fastrtps_cpp"}),"(\u522b\u4eba\u5199\u597d\u7684\u5305)\uff1a",(0,r.jsx)(e.code,{children:"export RMW_IMPLEMENTATION=rmw_fastrtps_cpp"}),"\n\u7136\u540e\u91cd\u65b0\u76d1\u542c\uff1a",(0,r.jsx)(e.code,{children:"ros2 daemon stop"}),"\uff0c\u518d\u91cd\u65b0\u542f\u52a8\uff1a",(0,r.jsx)(e.code,{children:"ros2 daemon start"}),"\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5757\u4ed3\u5e93",children:"\u6a21\u5757\u4ed3\u5e93"}),"\n",(0,r.jsx)(e.p,{children:"ROS 2\u6709\u5927\u91cf\u5199\u597d\u7684\u673a\u5668\u4eba\u76f8\u5173\u7684\u5305\uff0c\u5305\u4e5f\u79f0\uff1a\u6a21\u5757\u3001\u529f\u80fd\u5305\u3001\u5e93\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5b89\u88c5\u76f8\u673a\u6807\u5b9a\uff1a\n",(0,r.jsx)(e.code,{children:"sudo apt install ros-jazzy-camera-calibration"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u5b89\u88c5SLAM\uff1a\n",(0,r.jsx)(e.code,{children:"sudo apt install ros-jazzy-slam-toolbox"})]}),"\n",(0,r.jsx)(e.p,{children:'\u4f60\u4f1a\u53d1\u73b0\u4f60\u53ea\u9700\u8981\u5b89\u88c5\u4e00\u4e2a\u5305\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u529f\u80fd\u3002\u548cPython\u901a\u8fc7pip\u5b89\u88c5\u5305\u4e00\u6837\u3002\u5b89\u88c5\u540e\u5373\u53ef\u5b9e\u73b0"\u4e00\u884c\u4ee3\u7801"\u5b9e\u73b0\u67d0\u4e2a\u529f\u80fd\u3002'}),"\n",(0,r.jsx)(e.h3,{id:"ros-2\u5b89\u88c5",children:"ROS 2\u5b89\u88c5"}),"\n",(0,r.jsxs)(e.p,{children:["\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u6ce8\u610f\uff1aROS 2\u7684\u7248\u672c\u5f80\u5f80\u4e0eubuntu\u7684\u7248\u672c\u6709\u5173\u3002\u67e5\u770b",(0,r.jsx)(e.a,{href:"https://docs.ros.org/",children:"https://docs.ros.org/"}),"\u53ef\u83b7\u5f97\u76ee\u524d\u4e3b\u6d41\u7684\u7248\u672c\u3002"]}),"\n",(0,r.jsx)(e.h4,{id:"\u8bbe\u7f6e\u7f16\u7801",children:"\u8bbe\u7f6e\u7f16\u7801"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt update && sudo apt install locales\nsudo locale-gen en_US en_US.UTF-8\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 \nexport LANG=en_US.UTF-8\n"})}),"\n",(0,r.jsx)(e.h4,{id:"\u6dfb\u52a0\u6e90",children:"\u6dfb\u52a0\u6e90"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'sudo apt update && sudo apt install curl gnupg lsb-release \nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg \necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(source /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u5b89\u88c5ros-2",children:"\u5b89\u88c5ROS 2"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt update\n\nsudo apt upgrade\n\n# \u5982\u679c\u4f60\u662fubuntu 24.04\uff0c\u90a3\u4e48\u5b89\u88c5jazzy\u7248\u672c\nsudo apt install ros-jazzy-desktop\n"})}),"\n",(0,r.jsx)(e.h4,{id:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf",children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u7acb\u523b\u6267\u884c\u811a\u672c\nsource /opt/ros/jazzy/setup.bash\n\n# \u4e4b\u540e\u6bcf\u6b21\u5f00\u542f\u7ec8\u7aef\u6267\u884c\u6267\u884c\u811a\u672c\necho " source /opt/ros/jazzy/setup.bash" >> ~/.bashrc \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528Docker\u7b80\u5316\u8fd9\u4e2a\u8fc7\u7a0b\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u590d\u6742\u7684\u529f\u80fd\u9700\u8981\u5f88\u591a\u4f9d\u8d56\uff0c\u7cfb\u7edf\u4e2d\u9ed8\u8ba4\u7684Python3\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u53ef\u80fd\u4e0d\u8ba9\u4f60\u5728\u5168\u5c40\u73af\u5883\u4e2d\u5b89\u88c5\u5305\u3002\u4ee3\u7801\u7684\u63d0\u793a\u7ed9\u4e86\u5f88\u591a\u9009\u9879\uff0c\u4f8b\u5982\u5b89\u88c5\u5728\u865a\u62df\u73af\u5883\u4e2d\uff0c\u5220\u9664\u5b89\u5168\u6587\u4ef6\u3002\u52a0\u4e0a\u5173\u952e\u5b57\uff0c",(0,r.jsx)(s,{children:"\u4f60\u5e94\u8be5\u5b66\u4f1a\u901a\u8fc7\u7ffb\u8bd1\u8f6f\u4ef6\uff0c\u7ffb\u8bd1\u62a5\u9519\u4fe1\u606f\u3002\u5b83\u8ba9\u4f60\u770b\u67d0\u4e2a\u6587\u4ef6\uff0c\u4e5f\u8bf7\u5b66\u4f1a\u4f7f\u7528\u7ffb\u8bd1\u8f6f\u4ef6\uff0c\u7ffb\u8bd1\u6587\u4ef6\u5185\u5bb9\u3002"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"error: externally-managed-environment\n\n\xd7 This environment is externally managed\n\u2570\u2500> To install Python packages system-wide, try apt install\n    python3-xyz, where xyz is the package you are trying to\n    install.\n    \n    If you wish to install a non-Debian-packaged Python package,\n    create a virtual environment using python3 -m venv path/to/venv.\n    Then use path/to/venv/bin/python and path/to/venv/bin/pip. Make\n    sure you have python3-full installed.\n    \n    If you wish to install a non-Debian packaged Python application,\n    it may be easiest to use pipx install xyz, which will manage a\n    virtual environment for you. Make sure you have pipx installed.\n    \n    See /usr/share/doc/python3.12/README.venv for more information.\n\nnote: If you believe this is a mistake, please contact your Python installation or OS distribution provider. You can override this, at the risk of breaking your Python installation or OS, by passing --break-system-packages.\nhint: See PEP 668 for the detailed specification.\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6839\u636e\u63d0\u793a\uff0c\u5f97\u5230\u7684\u89e3\u51b3\u65b9\u5f0f\u4e4b\u4e00\uff1a",(0,r.jsx)(e.code,{children:"pip3 install \u4f60\u7684\u5305 --break-system-packages"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u6216\u8005\u53ef\u4ee5\u628a",(0,r.jsx)(e.code,{children:"externally managed"}),"\u6587\u4ef6\u5220\u9664\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt install -y python3-pip\n\nsudo pip3 install rosdepc --break-system-packages\n\nsudo rosdepc init\n\nrosdepc update\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u8282\u70b9\u57fa\u64cd",children:"\u8282\u70b9\u57fa\u64cd"}),"\n",(0,r.jsx)(e.p,{children:"\u8282\u70b9\u662f\u901a\u4fe1\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u8282\u70b9\u53ef\u4ee5\u53d8\u6210\uff1a\u53d1\u5e03\u8005\u3001\u8ba2\u9605\u8005\u3001\u670d\u52a1\u7aef\u3001\u5ba2\u6237\u7aef\u3001\u52a8\u4f5c\u3001\u53c2\u6570\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u521b\u5efa\u8282\u70b9",children:"\u521b\u5efa\u8282\u70b9"}),"\n",(0,r.jsx)(e.p,{children:"\u521b\u5efa\u8282\u70b9\u524d\u53ef\u4ee5\u5148\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"mkdir -p ~/workspace/src\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u4f55\u5728ROS2\u4e2d\u521b\u5efa\u4e00\u4e2a\u529f\u80fd\u5305\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u6307\u4ee4\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 pkg create --build-type <build-type> <package_name>\n"})}),"\n",(0,r.jsx)(e.p,{children:"ros2\u547d\u4ee4\u4e2d\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"pkg\uff1a\u8868\u793a\u529f\u80fd\u5305\u76f8\u5173\u7684\u529f\u80fd\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"create\uff1a\u8868\u793a\u521b\u5efa\u529f\u80fd\u5305\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"build-type\uff1a\u8868\u793a\u65b0\u521b\u5efa\u7684\u529f\u80fd\u5305\u662fC++\u8fd8\u662fPython\u7684\uff0c\u5982\u679c\u4f7f\u7528C++\u6216\u8005C\uff0c\u90a3\u8fd9\u91cc\u5c31\u8ddfament_cmake\uff0c\u5982\u679c\u4f7f\u7528Python\uff0c\u5c31\u8ddfament_python\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"package_name\uff1a\u65b0\u5efa\u529f\u80fd\u5305\u7684\u540d\u5b57\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u521b\u5efaPython\u529f\u80fd\u5305\nros2 pkg create --build-type ament_python learning_node\n\n# \u521b\u5efaC++\u529f\u80fd\u5305\nros2 pkg create --build-type ament_cmake learning_node\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(s,{children:"\u53ea\u9700\u6267\u884c\u5176\u4e2d\u4e00\u4e2a\u547d\u4ee4\u5373\u53ef\uff0c\u5982\u679c\u4f60\u4f1aPython\uff0c\u5c31\u6267\u884c\u521b\u5efaPython\u8282\u70b9\u7684\u547d\u4ee4\u3002"}),"\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a",(0,r.jsx)(e.code,{children:"learning_node"}),"\u6587\u4ef6\u5939\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u91cc\u6211\u63a8\u8350\u5927\u5bb6\u521b\u5efa\u8282\u70b9\u540d\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u6709\u8fa8\u8bc6\u6027\u7684\u540d\u5b57\u3002\u4f8b\u5982\uff1a",(0,r.jsx)(e.code,{children:"ros2 pkg create --build-type ament_python learning_node"}),"\u3002"]}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u5bf9\u4e8e\u8282\u70b9\u540c\u540d\uff0cROS 2\u5728\u7f16\u8bd1\u65f6\u7684\u5904\u7406\u65b9\u5f0f\u4e0d\u662f\u4f7f\u7528\u7b2c\u4e00\u4e2a\u8282\u70b9\u6216\u6700\u540e\u4e00\u4e2a\u8282\u70b9\uff0c\u800c\u662f\u4f1a\u62a5\u9519\u3002"})}),"\n",(0,r.jsx)(e.h4,{id:"\u7f16\u5199\u4ee3\u7801",children:"\u7f16\u5199\u4ee3\u7801"}),"\n",(0,r.jsxs)(e.p,{children:["\u63a5\u7740\u5728",(0,r.jsx)(e.code,{children:"learning_node"}),"\u6587\u4ef6\u5939\u6211\u4eec\u5c31\u53ef\u4ee5\u51c6\u5907\u7f16\u5199\u4ee3\u7801\u4e86\uff0c\u6b64\u65f6\u4f60\u7684\u8def\u5f84\u5e94\u8be5\u662f\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"~/workspace\n    |_src\n        |_learning_node/\n            |_learning_node\n                |_ __init__.py\n            |_package.xml\n            |_setup.py\n            |_setup.cfg\n            |_test/\n            |_resource/\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6b64\u65f6\u4f60\u5c31\u53ef\u4ee5\u7f16\u5199\u4ee3\u7801\u4e86,\u5728",(0,r.jsx)(e.code,{children:"__init__.py"}),(0,r.jsx)(s,{children:"\u540c\u7ea7"}),"\u4e0b\u521b\u5efa\u4e00\u4e2a",(0,r.jsx)(e.code,{children:".py"}),"\u6587\u4ef6\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u7b26\u5408\u6587\u4ef6\u547d\u540d\u89c4\u5219\u524d\u63d0\u4e0b\uff0c\u4f60\u60f3\u53eb\u4ec0\u4e48\u90fd\u53ef\u4ee5\uff0c\u4f46\u662f\u6700\u597d\u6709\u4e00\u5b9a\u7684\u542b\u4e49\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u4f60\u7684\u529f\u80fd\u662f\u6253\u5370",(0,r.jsx)(e.code,{children:"Hello World"}),"\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u53eb",(0,r.jsx)(e.code,{children:"node_helloworld.py"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["python\u7684\u51fd\u6570\u901a\u5e38\u662f\u9700\u8981\u8c03\u7528\u7684\uff0c\u4f8b\u5982",(0,r.jsx)(e.code,{children:"abc()"}),"\u51fd\u6570\uff0c\u4f60\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u8f93\u5165",(0,r.jsx)(e.code,{children:"abc()"}),"\uff0c\u624d\u4f1a\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002\u548cC++\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a",(0,r.jsx)(e.code,{children:"main"}),"\u51fd\u6570\u4e0d\u540c\uff0c\u90a3\u4e48\u5982\u4f55\u786e\u5b9a\u54ea\u4e2a\u51fd\u6570\u662f\u5165\u53e3\uff1f\u66f4\u8fdb\u4e00\u6b65\u601d\u8003\uff1a\u4e0d\u540c\u7684\u6307\u4ee4\u5bf9\u5e94\u4e0d\u540c\u7684\u51fd\u6570\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u56e0\u6b64\u6709\u4e86",(0,r.jsx)(e.code,{children:"setup.py"}),"\u6700\u4e0b\u65b9\u7684\u5165\u53e3\u70b9\u5b9a\u4e49\u3002\u7f16\u5199\u5b8c\u6210\u540e\u8bb0\u5f97\u4fee\u6539",(0,r.jsx)(e.code,{children:"setup.py"}),"\u6700\u4e0b\u65b9\u7684\u5165\u53e3\u70b9\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u8be6\u7ec6\u5185\u5bb9\u53c2\u53ef\u4ee5\u53c2\u8003\u73b0\u6210\u7684\u4ed3\u5e93\uff1a"}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsx)(e.p,{children:"\u62c9\u53d6git\u4ed3\u5e93\uff0c\u53ef\u514d\u53bb\u81ea\u5df1\u4ece0\u5f00\u59cb\u624b\u6572\u4ee3\u7801\u3002\u5982\u679c\u4f60\u559c\u6b22\u81ea\u5df1\u4ece0\u5f00\u59cb\u6284\u5199\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u8df3\u8fc7\u672c\u90e8\u5206\u3002"}),(0,r.jsxs)(e.p,{children:["git\u5b89\u88c5\uff1a",(0,r.jsx)(e.code,{children:"sudo apt install git"})]}),(0,r.jsxs)(e.p,{children:["\u62c9\u53d6\u547d\u4ee4\uff1a",(0,r.jsx)(e.code,{children:"git clone https://gitee.com/guyuehome/ros2_21_tutorials.git"})]}),(0,r.jsxs)(e.p,{children:["\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u628a\u4ed3\u5e93\u514b\u9686\u5230\u672c\u5730\u3002\u6267\u884c\u540e\uff0c\u4f60\u5e94\u8be5\u80fd\u5728",(0,r.jsx)(s,{children:"\u5f53\u524d\u6587\u4ef6\u5939\u4e0b"}),"\u770b\u5230\u540d\u4e3a",(0,r.jsx)(e.code,{children:"ros2_21_tutorials"}),"\u7684\u6587\u4ef6\u5939\uff0c\u5185\u542b\u591a\u4e2a\u5b50\u6587\u4ef6\u5939\u3002\u6bcf\u4e2a\u5b50\u6587\u4ef6\u5939\u5bf9\u5e94\u4e00\u4e2a\u529f\u80fd\u5305\u3002\u56e0\u4e3aros2\u662f",(0,r.jsx)(s,{children:"\u6a21\u5757\u5316\u7684"}),"\uff0c\u4e0d\u540c\u7684\u529f\u80fd\u88ab\u62c6\u89e3\u4e3a\u4e0d\u540c\u7684\u529f\u80fd\u5305\u540e\u671f\u66f4\u597d\u7ef4\u62a4\u3002"]})]}),"\n",(0,r.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u5982\u679c\u4f60\u4e4b\u524d\u5728",(0,r.jsx)(e.code,{children:"src"}),"\u91cc\u521b\u5efa\u4e86\u4e00\u4e9bPython\u8282\u70b9\u4e4b\u540e\uff0c\u53c8\u628a",(0,r.jsx)(e.code,{children:"ros2_21_tutorials"}),"\u6587\u4ef6\u5939\u4e5f\u653e\u7f6e\u5728",(0,r.jsx)(e.code,{children:"src"}),"\u91cc\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u68c0\u67e5\u4f60\u7684\u521b\u5efa\u7684\u8282\u70b9\u540d\uff0c\u662f\u5426\u4e0e",(0,r.jsx)(e.code,{children:"ros2_21_tutorials"}),"\u5185\u5df2\u6709\u8282\u70b9\u91cd\u540d\u3002"]}),"\n",(0,r.jsx)(e.h4,{id:"\u7f16\u8bd1",children:"\u7f16\u8bd1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5colcon\uff08\u6b64\u6b65\u5168\u5c40\u4ec5\u5728\u7b2c\u4e00\u6b21\u6267\u884c\u65f6\u9700\u8981\u6267\u884c\uff0c\u5982\u679c\u5931\u8d25\u4f1a\u5bfc\u81f4colcon build \u547d\u4ee4\u4e0d\u53ef\u7528\uff09\nsudo apt install python3-colcon-ros\n\n# \u8fdb\u5165\u5de5\u4f5c\u7a7a\u95f4\ncd ~/workspace\n\n# \u7f16\u8bd1\u5de5\u4f5c\u7a7a\u95f4\u6240\u6709\u529f\u80fd\u5305\n# \u4e0d\u8bba\u5176\u662f\u76f4\u63a5\u5728src\u4e0b\uff0c\u8fd8\u662f\u5728src\u4e0b\u7684\u5b50\u6587\u4ef6\u5939\u4e0b\ncolcon build\n\n# \u5f53\u4f60\u53ea\u6709\u4e00\u4e2a\u5305\u66f4\u6539\uff0c\u4e0d\u5e0c\u671b\u5168\u7f16\u8bd1\uff0c\u4ec5\u7f16\u8bd1learning_node\ncolcon build --packages-select learning_node\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"colcon build"}),"\u547d\u4ee4\u4f1a\u5c06\u6240\u6709\u529f\u80fd\u5305\uff0c\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u770b\u5230\u81ea\u52a8\u751f\u4ea7\u7684build\u3001log\u3001install\u6587\u4ef6\u5939\u4e86\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"src\uff0c\u4ee3\u7801\u7a7a\u95f4\uff0c\u672a\u6765\u7f16\u5199\u7684\u4ee3\u7801\u3001\u811a\u672c\uff0c\u90fd\u9700\u8981\u4eba\u4e3a\u7684\u653e\u7f6e\u5230\u8fd9\u91cc\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"build\uff0c\u7f16\u8bd1\u7a7a\u95f4\uff0c\u4fdd\u5b58\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4e2d\u95f4\u6587\u4ef6\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"install\uff0c\u5b89\u88c5\u7a7a\u95f4\uff0c\u653e\u7f6e\u7f16\u8bd1\u5f97\u5230\u7684\u53ef\u6267\u884c\u6587\u4ef6\u548c\u811a\u672c\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"log\uff0c\u65e5\u5fd7\u7a7a\u95f4\uff0c\u7f16\u8bd1\u548c\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4fdd\u5b58\u5404\u79cd\u8b66\u544a\u3001\u9519\u8bef\u3001\u4fe1\u606f\u7b49\u65e5\u5fd7\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u628a\u7f16\u8bd1\u540e\uff0c\u542b\u6709",(0,r.jsx)(e.code,{children:"build\u3001log\u3001install\u3001src"}),"\u6587\u4ef6\u5939\u7684",(0,r.jsx)(e.code,{children:"workspace"}),"\u79f0\u4e3a",(0,r.jsx)(s,{children:"\u5de5\u4f5c\u7a7a\u95f4"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u662fPython\u8fd9\u6837\u65e0\u9700\u7f16\u8bd1\u7684\uff0c\u4f1a\u5c06\u4ee3\u7801\u76f4\u63a5\u62f7\u8d1d\u5230",(0,r.jsx)(e.code,{children:"install"}),"\u6587\u4ef6\u5939\u4e0b\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u7f16\u8bd1\u8fc7\u7a0b\u53ef\u80fd\u51fa\u73b0\u7684\u62a5\u9519\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u8282\u70b9\u91cd\u540d\uff1a\u5bf9\u4e0e\u8282\u70b9\u540c\u540d\uff0cros\u7684\u5904\u7406\u65b9\u5f0f\u4e0d\u662f\u4f7f\u7528\u7b2c\u4e00\u4e2a\u8282\u70b9\u6216\u6700\u540e\u4e00\u4e2a\u8282\u70b9\uff0c\u800c\u662f\u4f1a\u62a5\u9519\u3002\u5e94\u8be5\u5220\u9664\u591a\u4f59\u8282\u70b9\u3002\u786e\u4fdd\u4f60",(0,r.jsx)(e.code,{children:"src"}),"\u6587\u4ef6\u5939\u4e0b\uff0c\u6240\u6709\u7684",(0,r.jsx)(e.code,{children:"xml"}),"\u6587\u4ef6\u4e2d\uff0c\u8282\u70b9\u7684\u540d\u79f0\u662f\u552f\u4e00\u7684\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8bed\u6cd5\u9519\u8bef\uff1a\u5982\u679c\u4ee3\u7801\u8bed\u6cd5\u9519\u8bef\uff0c\u5219\u4f1a\u7f16\u8bd1\u5931\u8d25\uff0c\u9700\u8981\u624b\u52a8\u89e3\u51b3\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u7f3a\u5c11\u4f9d\u8d56\u5305\uff1a\u5982\u679c\u4f60\u4e25\u683c\u8ddf\u968f\u53c2\u8003\u8d44\u6599\u4e14\u4e3a\u65b0\u7cfb\u7edf\uff0c\u9996\u5148\u68c0\u67e5\u4f60\u662f\u5426\u5b89\u88c5\u8fc7\u7a0b\u7f51\u7edc\u5f02\u5e38\u3002\u5982\u679c\u662f\u66fe\u7528\u7cfb\u7edf\uff0c\u68c0\u67e5\u662f\u5426\u542b\u6709\u591a\u4e2apython\u73af\u5883\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u5220\u9664\u7f13\u5b58\nrm -rf build/ install/ log/\n\n# \u4fee\u6539\u73af\u5883\u53d8\u91cfPATH\u7684\u503c\uff0c\u628a\u7cfb\u7edf\u9ed8\u8ba4\u7684\u73af\u5883\u63d0\u5230\u6700\u524d\nexport PATH="/usr/bin:$PATH"\n\n# PYTHON_EXECUTABLE \u662f\u4e00\u4e2aCMake\u53d8\u91cf\uff0c\u7528\u4e8e\u6307\u5b9a\u6784\u5efa\u8fc7\u7a0b\u4e2d\u5e94\u8be5\u4f7f\u7528\u54ea\u4e2aPython\u89e3\u91ca\u5668\nexport PYTHON_EXECUTABLE=/usr/bin/python3 && colcon build --cmake-args -DPYTHON_EXECUTABLE=/usr/bin/python3\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(s,{children:"\u5728\u4e0d\u66f4\u6362\u5de5\u4f5c\u7a7a\u95f4\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u4e0b\u547d\u4ee4\u4ec5\u5728\u7b2c\u4e00\u6b21\u6267\u884c\u65f6\u9700\u8981\u6267\u884c\u3002"}),"\u5982\u679c\u4f60\u7684\u5de5\u4f5c\u7a7a\u95f4\u8def\u5f84\u4e0d\u662f",(0,r.jsx)(e.code,{children:"~/workspace"}),"\uff0c\u8bf7\u5c06",(0,r.jsx)(e.code,{children:"~/workspace"}),"\u66ff\u6362\u4e3a\u4f60\u7684\u5de5\u4f5c\u7a7a\u95f4\u8def\u5f84\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u7acb\u523b\u6267\u884c\u811a\u672c\nsource ~/workspace/install/setup.sh\n\n# \u4e4b\u540e\u6bcf\u6b21\u5f00\u542f\u7ec8\u7aef\u6267\u884c\u6267\u884c\u811a\u672c\necho "source ~/workspace/install/setup.sh" >> ~/.bashrc\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u8fd0\u884c",children:"\u8fd0\u884c"}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd0\u884c\u811a\u672c : ",(0,r.jsx)(e.code,{children:"ros2 run learning_node node_helloworld"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u67e5\u770b",(0,r.jsx)(s,{children:"\u6b63\u5728\u8fd0\u884c"}),"\u7684node : ",(0,r.jsx)(e.code,{children:"ros2 node list"})]}),"\n",(0,r.jsx)(e.h3,{id:"rclpy",children:"rclpy"}),"\n",(0,r.jsx)(e.p,{children:"rclpy\u6a21\u5757\uff0cROS 2  Python\u6807\u51c6\u63a5\u53e3 \uff08ROS 2 canonical API with Python\uff09"}),"\n",(0,r.jsxs)(e.p,{children:["\u5b98\u7f51\uff1a",(0,r.jsx)(e.a,{href:"https://docs.ros.org/en/rolling/p/rclpy/index.html",children:"https://docs.ros.org/en/rolling/p/rclpy/index.html"})]}),"\n",(0,r.jsx)(e.p,{children:"\u53d7\u9650\u4e8e\u7bc7\u5e45\uff0c\u53ea\u7b80\u5355\u4ecb\u7ecd\u5176\u4e2d\u521d\u59cb\u5316\u90e8\u5206"}),"\n",(0,r.jsx)(e.h4,{id:"\u5165\u95e8\u4f53\u9a8c",children:"\u5165\u95e8\u4f53\u9a8c"}),"\n",(0,r.jsxs)(e.p,{children:["\u4e0b\u9762\u662f\u4e00\u4e2a\u6807\u51c6\u7684\u521d\u59cb\u5316\u4ee3\u7801",(0,r.jsx)(e.code,{children:"init"}),"\u652f\u6301\u4f20\u5165\u591a\u79cd\u53c2\u6570\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'import rclpy                                     # ROS2 Python\u63a5\u53e3\u5e93\nfrom rclpy.node import Node                      # ROS2 \u8282\u70b9\u7c7b\nimport time\n\ndef main(args=None):                             # ROS2\u8282\u70b9\u4e3b\u5165\u53e3main\u51fd\u6570\n    rclpy.init(args=args)                        # ROS2 Python\u63a5\u53e3\u521d\u59cb\u5316\n    node = Node("node_helloworld")               # \u521b\u5efaROS2\u8282\u70b9\u5bf9\u8c61\u5e76\u8fdb\u884c\u521d\u59cb\u5316\n    \n    while rclpy.ok():                            # ROS2\u7cfb\u7edf\u662f\u5426\u6b63\u5e38\u8fd0\u884c\n        node.get_logger().info("Hello World")    # ROS2\u65e5\u5fd7\u8f93\u51fa\n        time.sleep(0.5)                          # \u4f11\u7720\u63a7\u5236\u5faa\u73af\u65f6\u95f4\n    node.destroy_node()                          # \u9500\u6bc1\u8282\u70b9\u5bf9\u8c61   \n    rclpy.shutdown()                             # \u5173\u95edROS2 Python\u63a5\u53e3\n'})}),"\n",(0,r.jsx)(e.h5,{id:"\u521d\u59cb\u5316",children:"\u521d\u59cb\u5316"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"rclpy.init(*, args: List[str] | None = None, context: Context | None = None, domain_id: int | None = None, signal_handler_options: rpyutils.import_c_library.SignalHandlerOptions | None = None)\u2192 InitContextManager"})}),"\n",(0,r.jsx)(e.p,{children:"\u76f4\u63a5\u521d\u59cb\u5316\u6bd4\u4e0a\u4e0b\u6587\u521d\u59cb\u5316\u62e5\u6709\u66f4\u591a\u7684\u53c2\u6570\u3002"}),"\n",(0,r.jsx)(e.p,{children:"Parameters:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"args \u2013 \u547d\u4ee4\u884c\u53c2\u6570\u5217\u8868\u3002"}),"\n",(0,r.jsx)(e.li,{children:"context \u2013 \u8981\u521d\u59cb\u5316\u7684\u4e0a\u4e0b\u6587\u3002\u5982\u679c\u4e3a None\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u3002"}),"\n",(0,r.jsx)(e.li,{children:"domain_id \u2013 ROS \u57df ID\u3002"}),"\n",(0,r.jsx)(e.li,{children:"signal_handler_options \u2013 \u6307\u793a\u8981\u5b89\u88c5\u7684\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c None\uff0c\u5219\u5728\u521d\u59cb\u5316\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u65f6\u5c06\u5b89\u88c5 SIGINT \u548c SIGTERM\u3002\u3010\u7c7b\u4f3c\u4e8e Python \u7684\u4fe1\u53f7\uff08signal\uff09\u673a\u5236\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u53d1\u51fa\u7684\u5f02\u6b65\u4e8b\u4ef6\u3002\u800c\u975e\u5f02\u5e38\uff0c\u5f02\u5e38\u662f\u7a0b\u5e8f\u5185\u90e8\u53d1\u751f\u7684\u540c\u6b65\u4e8b\u4ef6\u3002\u3011"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"Returns:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e00\u4e2a InitContextManager\uff0c\u53ef\u4ee5\u4e0e Python \u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u4e00\u8d77\u4f7f\u7528\u8fdb\u884c\u6e05\u7406\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h5,{id:"\u5faa\u73af\u6267\u884c",children:"\u5faa\u73af\u6267\u884c"}),"\n",(0,r.jsx)(e.p,{children:"ROS 2 \u4e2d\u7684 Executor\uff08\u6267\u884c\u5668\uff09\u662f\u7528\u6765\u7ba1\u7406\u548c\u8fd0\u884c ROS 2 \u8282\u70b9\u4e2d\u6240\u6709\u56de\u8c03\u51fd\u6570\u7684\u6838\u5fc3\u7ec4\u4ef6\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u770b\u4f5c\u662f\u4e00\u4e2a\u8c03\u5ea6\u5668\uff0c\u5b83\u51b3\u5b9a\u4e86\u8282\u70b9\u91cc\u7684\u5404\u79cd\u4efb\u52a1\uff08\u4f8b\u5982\u63a5\u6536\u65b0\u6d88\u606f\u3001\u5904\u7406\u670d\u52a1\u8bf7\u6c42\u3001\u5b9a\u65f6\u5668\u89e6\u53d1\uff09\u4f55\u65f6\u6267\u884c\u3002"}),"\n",(0,r.jsx)(e.p,{children:"Executor \u8d1f\u8d23\u8c03\u5ea6\u548c\u6267\u884c\u8282\u70b9\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002\u4e00\u4e2a ROS 2 \u8282\u70b9\u53ef\u4ee5\u6709\u591a\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6bd4\u5982\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u8ba2\u9605\u8005\u7684\u56de\u8c03\u51fd\u6570\uff1a\u6bcf\u5f53\u6536\u5230\u4e00\u4e2a\u65b0\u6d88\u606f\u65f6\u88ab\u8c03\u7528\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u670d\u52a1\u7684\u8bf7\u6c42\u56de\u8c03\u51fd\u6570\uff1a\u6bcf\u5f53\u6536\u5230\u4e00\u4e2a\u670d\u52a1\u8bf7\u6c42\u65f6\u88ab\u8c03\u7528\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u5b9a\u65f6\u5668\u7684\u56de\u8c03\u51fd\u6570\uff1a\u6bcf\u9694\u4e00\u5b9a\u65f6\u95f4\u88ab\u8c03\u7528\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:'\u8282\u70b9\u672c\u8eab\u5e76\u4e0d\u4f1a\u81ea\u52a8\u8fd0\u884c\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u9700\u8981\u4e00\u4e2a Executor \u6765 "spin"\uff08\u81ea\u65cb\uff09\uff0c\u4e5f\u5c31\u662f\u4e0d\u65ad\u5730\u68c0\u67e5\u662f\u5426\u6709\u5c31\u7eea\u7684\u4efb\u52a1\u5e76\u6267\u884c\u5b83\u4eec\u3002ROS 2 \u5c06\u8282\u70b9\u548c\u6267\u884c\u5668\u5206\u5f00\uff0c\u63d0\u4f9b\u4e86\u7075\u6d3b\u6027\u3002\u4f60\u53ef\u4ee5\u9009\u62e9\u4e0d\u540c\u7684 Executor \u6765\u9002\u5e94\u4f60\u7684\u5e94\u7528\u9700\u6c42\uff1a'}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"SingleThreadedExecutor\uff1a\u8fd9\u662f\u6700\u7b80\u5355\u7684\u6267\u884c\u5668\uff0c\u5b83\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u7ebf\u7a0b\u91cc\u987a\u5e8f\u6267\u884c\u6240\u6709\u5c31\u7eea\u7684\u56de\u8c03\u51fd\u6570\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"MultiThreadedExecutor\uff1a\u8fd9\u4e2a\u6267\u884c\u5668\u4f7f\u7528\u4e00\u4e2a\u7ebf\u7a0b\u6c60\uff0c\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u591a\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u8fd9\u5bf9\u4e8e\u9700\u8981\u9ad8\u5e76\u53d1\u5904\u7406\u7684\u8282\u70b9\u975e\u5e38\u6709\u7528\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"rclpy.spin(node: Node, executor: Executor | None = None)\u2192 None"}),":\u6267\u884c\u5de5\u4f5c\uff0c\u76f4\u5230\u4e0e\u6267\u884c\u5668\u5173\u8054\u7684\u4e0a\u4e0b\u6587\u5173\u95ed\u3002"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"node \u2013 \u8981\u6dfb\u52a0\u5230\u6267\u884c\u5668\u4ee5\u68c0\u67e5\u5de5\u4f5c\u7684\u8282\u70b9\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u662f None\uff0c\u5219\u4e3a\u5168\u5c40\u6267\u884c\u5668\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"rclpy.spin_once(node: Node, *, executor: Executor | None = None, timeout_sec: float | None = None)\u2192 None"}),":\u6267\u884c\u4e00\u9879\u5de5\u4f5c\u6216\u7b49\u5f85\u8d85\u65f6\u5230\u671f\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u53ea\u8981\u8be5\u56de\u8c03\u5728\u8d85\u65f6\u5230\u671f\u4e4b\u524d\u51c6\u5907\u5c31\u7eea\uff0c\u63d0\u4f9b\u7684\u6267\u884c\u5668\u5c31\u4f1a\u6267\u884c\u4e00\u4e2a\u56de\u8c03\u3002\u5982\u679c\u672a\u63d0\u4f9b\u6267\u884c\u5668\uff08\u5373 None\uff09\uff0c\u5219\u4f7f\u7528\u5168\u5c40\u6267\u884c\u5668\u3002\u5982\u679c\u5168\u5c40\u6267\u884c\u5668\u5177\u6709\u90e8\u5206\u5b8c\u6210\u7684\u534f\u7a0b\uff0c\u5219\u5b8c\u6210\u7684\u5de5\u4f5c\u53ef\u80fd\u662f\u9488\u5bf9\u63d0\u4f9b\u7684\u8282\u70b9\u4ee5\u5916\u7684\u8282\u70b9\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"node \u2013 \u8981\u6dfb\u52a0\u5230\u6267\u884c\u5668\u4ee5\u68c0\u67e5\u5de5\u4f5c\u7684\u8282\u70b9\u3002"}),"\n",(0,r.jsx)(e.li,{children:"executor \u2013 \u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u662f None\uff0c\u5219\u4e3a\u5168\u5c40\u6267\u884c\u5668\u3002"}),"\n",(0,r.jsx)(e.li,{children:"timeout_sec \u2013 \u7b49\u5f85\u51e0\u79d2\u949f\u3002\u5982\u679c\u4e3a \u201c\u65e0\u201d \u6216\u201c\u8d1f\u6570\uff0c\u5219\u6c38\u4e45\u963b\u6b62\u201d\u3002\u5982\u679c\u4e3a 0\uff0c\u8bf7\u4e0d\u8981\u7b49\u5f85\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"rclpy.spin_until_future_complete(node: Node, future: Future[Any], executor: Executor | None = None, timeout_sec: float | None = None)\u2192 None"})," : \u6267\u884c\u5de5\u4f5c\uff0c\u76f4\u5230Future\u5b8c\u6210\u3002"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"node \u2013 \u8981\u6dfb\u52a0\u5230\u6267\u884c\u5668\u4ee5\u68c0\u67e5\u5de5\u4f5c\u7684\u8282\u70b9\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u8981\u7b49\u5f85\u7684 future \u5bf9\u8c61\u3002\u76f4\u5230 future.done\uff08\uff09 \u8fd4\u56de True \u6216\u4e0e\u6267\u884c\u5668\u5173\u8054\u7684\u4e0a\u4e0b\u6587\u4e3a shutdown\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u8981\u4f7f\u7528\u7684\u6267\u884c\u5668\uff0c\u5982\u679c\u662f None\uff0c\u5219\u4e3a\u5168\u5c40\u6267\u884c\u5668\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u7b49\u5f85\u51e0\u79d2\u949f\u3002\u5982\u679c\u4e3a None \u6216\u8d1f\u6570\uff0c\u5219\u963b\u6b62\u76f4\u5230\u672a\u6765\u5b8c\u6210\u3002\u5982\u679c\u4e3a 0\uff0c\u8bf7\u4e0d\u8981\u7b49\u5f85\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h5,{id:"\u5173\u95ed",children:"\u5173\u95ed"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"rclpy.shutdown(*, context: Context | None = None, uninstall_handlers: bool | None = None)\u2192 None"})}),"\n",(0,r.jsx)(e.p,{children:"\u5173\u95ed\u4ee5\u524d\u521d\u59cb\u5316\u7684\u4e0a\u4e0b\u6587\uff08\u5982\u679c\u5c1a\u672a\u5173\u95ed\uff09\u3002\u8fd9\u4e5f\u5c06\u5173\u95ed\u5168\u5c40\u6267\u884c\u5668\uff0c\u5982\u679c\u5df2\u5173\u95ed\u4f1a\u62a5\u9519\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"context \u2013 \u8981\u5931\u6548\u7684\u4e0a\u4e0b\u6587\u3002\u5982\u679c\u4e3a None\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u4e0a\u4e0b\u6587"}),"\n",(0,r.jsx)(e.li,{children:"uninstall_handlers \u2013 \u5982\u679c\u4e3a None\uff0c\u5219\u5728\u5173\u95ed\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u65f6\u5c06\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u4e3a True\uff0c\u5219\u5c06\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u4e3a False\uff0c\u5219\u4e0d\u4f1a\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u548c\u524d\u9762signal_handler_options\u5bf9\u5e94\u4e0a\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"rclpy.try_shutdown(*, context: Context | None = None, uninstall_handlers: bool | None = None)\u2192 None"})}),"\n",(0,r.jsx)(e.p,{children:"\u5173\u95ed\u4ee5\u524d\u521d\u59cb\u5316\u7684\u4e0a\u4e0b\u6587\uff08\u5982\u679c\u5c1a\u672a\u5173\u95ed\uff09\u3002\u8fd9\u4e5f\u5c06\u5173\u95ed\u5168\u5c40\u6267\u884c\u5668\uff0c\u5982\u679c\u5df2\u5173\u95ed\u4e0d\u4f1a\u62a5\u9519\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"context \u2013 \u8981\u5931\u6548\u7684\u4e0a\u4e0b\u6587\u3002\u5982\u679c\u4e3a None\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u4e0a\u4e0b\u6587"}),"\n",(0,r.jsx)(e.li,{children:"uninstall_handlers \u2013 \u5982\u679c\u4e3a None\uff0c\u5219\u5728\u5173\u95ed\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u65f6\u5c06\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u4e3a True\uff0c\u5219\u5c06\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u4e3a False\uff0c\u5219\u4e0d\u4f1a\u5378\u8f7d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u3002\u548c\u524d\u9762signal_handler_options\u5bf9\u5e94\u4e0a\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u4e0a\u4e0b\u6587",children:"\u4e0a\u4e0b\u6587"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668Context\u4e0e\u76f4\u63a5\u4f7f\u7528rclpy\u57fa\u672c\u4e00\u81f4\uff0c\u4f46\u80cc\u540e\u5176\u5b9e\u662f\u7ebf\u7a0b\u7ba1\u7406\uff0c\u6bcf\u4e2a\u72ec\u7acb\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u90fd\u662f\u72ec\u7acb\u7684\u7ebf\u7a0b\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u4f7f\u7528",(0,r.jsx)(e.code,{children:"rclpy.init(args=args)"}),"\u5219\u65e0\u6cd5\u5b8c\u6210\u521b\u5efa2\u4e2a\u4e0d\u540c\u7684domian_id\u7684\u8282\u70b9\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from rclpy.node import Node                      # ROS2 \u8282\u70b9\u7c7b\nfrom rclpy.context import Context                # ROS2 \u4e0a\u4e0b\u6587\u7c7b\nimport time\n\ndef main(args=None):                             # ROS2\u8282\u70b9\u4e3b\u5165\u53e3main\u51fd\u6570\n    # \u4f7f\u7528Context\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u6b63\u786e\u65b9\u5f0f\n    context = Context()\n    context.init(args,domain_id=1)\n    node = Node("node_helloworld", context=context)  # \u521b\u5efa\u8282\u70b9\u5e76\u5173\u8054\u4e0a\u4e0b\u6587\n\n    context2 = Context()\n    context2.init(args,domain_id=2)\n    node2 = Node("node_helloworld", context=context2)  # \u521b\u5efa\u8282\u70b9\u5e76\u5173\u8054\u4e0a\u4e0b\u6587\n\n    while context.ok() and context2.ok():                  # \u68c0\u67e5\u4e0a\u4e0b\u6587\u662f\u5426\u6b63\u5e38\n        node.get_logger().info("{}".format(context.get_domain_id()))    # ROS2\u65e5\u5fd7\u8f93\u51fa\n        node2.get_logger().info("{}".format(context2.get_domain_id()))    # ROS2\u65e5\u5fd7\u8f93\u51fa\n        time.sleep(0.5)                  # \u4f11\u7720\u63a7\u5236\u5faa\u73af\u65f6\u95f4\n    context2.shutdown()\n    context.shutdown()\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668Context \u7684",(0,r.jsx)(e.code,{children:"with"}),"\u8bed\u6cd5\u53ef\u4ee5\u81ea\u52a8",(0,r.jsx)(e.code,{children:"init"}),"\uff08\u4e0d\u652f\u6301\u53c2\u6570\uff09\uff0c\u5e76\u5728with\u8bed\u53e5\u7ed3\u675f\u65f6\u8c03\u7528",(0,r.jsx)(e.code,{children:"shutdown"}),"\uff0c\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u7c7b\u4f3c\u4e8ePython\u7684 ",(0,r.jsx)(e.code,{children:"with open"}),"\u4e0e",(0,r.jsx)(e.code,{children:"close"}),"\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'from rclpy.node import Node                      # ROS2 \u8282\u70b9\u7c7b\nfrom rclpy.context import Context                # ROS2 \u4e0a\u4e0b\u6587\u7c7b\nimport time\n\ndef main(args=None):                             # ROS2\u8282\u70b9\u4e3b\u5165\u53e3main\u51fd\u6570\n    # \u4f7f\u7528Context\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u6b63\u786e\u65b9\u5f0f\n    with Context() as context:\n        node = Node("node_helloworld", context=context)  # \u521b\u5efa\u8282\u70b9\u5e76\u5173\u8054\u4e0a\u4e0b\u6587\n        while context.ok():                  # \u68c0\u67e5\u4e0a\u4e0b\u6587\u662f\u5426\u6b63\u5e38\n            # \u8f93\u51fa\u5f53\u524d\u7684domain id \uff0c\u9ed8\u8ba4\u662f0\n            # \u4fee\u6539domain id\u65b9\u5f0f1 \uff1a\u4fee\u6539\u5f53\u524d\u7ec8\u7aef\u53d8\u91cf\n            # export ROS_DOMAIN_ID=1\n            node.get_logger().info("{}".format(context.get_domain_id())) \n            time.sleep(0.5)                  # \u4f11\u7720\u63a7\u5236\u5faa\u73af\u65f6\u95f4\n'})}),"\n",(0,r.jsx)(e.h5,{id:"\u521d\u59cb\u5316-1",children:"\u521d\u59cb\u5316"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"context.init(args: List[str] | None = None, *, initialize_logging: bool = True, domain_id: int | None = None)\u2192 None"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e3a\u7ed9\u5b9a\u4e0a\u4e0b\u6587\u521d\u59cb\u5316 ROS \u901a\u4fe1\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"args \u2013 \u547d\u4ee4\u884c\u53c2\u6570\u5217\u8868\u3002"}),"\n",(0,r.jsx)(e.li,{children:"initialize_logging \u2013 \u662f\u5426\u521d\u59cb\u5316\u6574\u4e2a\u8fc7\u7a0b\u7684\u65e5\u5fd7\u8bb0\u5f55\u3002\u9ed8\u8ba4\u503c\u662f\u521d\u59cb\u5316\u65e5\u5fd7\u8bb0\u5f55\u3002"}),"\n",(0,r.jsx)(e.li,{children:"domain_id \u2013 \u8981\u7528\u4e8e\u6b64\u4e0a\u4e0b\u6587\u7684\u57df ID\u3002\u5982\u679c\u4e3a\u65e0\uff08\u9ed8\u8ba4\u503c\uff09\uff0c\u5219\u4f7f\u7528\u57df ID 0\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h5,{id:"\u72b6\u6001\u68c0\u5bdf",children:"\u72b6\u6001\u68c0\u5bdf"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"context.get_domain_id()\u2192 int"}),"\uff1a\u83b7\u53d6\u4e0a\u4e0b\u6587\u7684domain ID\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"context.ok()\u2192 bool"}),"\uff1a\u68c0\u67e5\u4e0a\u4e0b\u6587\u662f\u5426\u672a\u5173\u95ed\u3002"]}),"\n",(0,r.jsx)(e.h5,{id:"\u8ddf\u8e2a",children:"\u8ddf\u8e2a"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"track_node(node: Node)\u2192 None"}),":\u8ddf\u8e2a\u4e0e\u6b64\u4e0a\u4e0b\u6587\u5173\u8054\u7684\u8282\u70b9\u3002\u5f53\u4e0a\u4e0b\u6587\u88ab\u9500\u6bc1\u65f6\uff0c\u5b83\u5c06\u9500\u6bc1\u5b83\u8ddf\u8e2a\u7684\u6bcf\u4e2a\u8282\u70b9\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"untrack_node(node: Node)\u2192 None"}),":\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u5728\u4e0a\u4e0b\u6587\u4e4b\u524d\u88ab\u9500\u6bc1\uff0c\u6211\u4eec\u4e0d\u518d\u9700\u8981\u8ddf\u8e2a\u5b83\u662f\u5426\u9500\u6bc1\u4e86\u4e0a\u4e0b\u6587\uff0c\u6240\u4ee5\u5728\u6b64\u5904\u5c06\u5176\u5220\u9664\u3002"]}),"\n",(0,r.jsx)(e.h5,{id:"\u5173\u95ed\u4e0a\u4e0b\u6587",children:"\u5173\u95ed\u4e0a\u4e0b\u6587"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"context.shutdown()\u2192 None"}),"\uff1a\u5173\u95ed\u6b64\u4e0a\u4e0b\u6587\uff0c\u4f1a\u7b49\u5f85\u6b63\u5728\u8fdb\u884c\u7684\u64cd\u4f5c\u5b8c\u6210\uff0c\u7136\u540e\u6e05\u7406\u8d44\u6e90\u3002\u597d\u6bd4\u6267\u884c\u7cfb\u7edf\u5173\u673a\uff0c\u5982\u679c\u5df2\u5173\u95ed\u4f1a\u62a5\u9519\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"on_shutdown(callback: Callable[[], None])\u2192 None"}),"\uff1a\u6dfb\u52a0\u5173\u673a\u65f6\u8c03\u7528\u7684\u56de\u8c03\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"try_shutdown()\u2192 None"}),":\u5c1d\u8bd5\u5173\u95ed\u6b64\u4e0a\u4e0b\u6587\uff08\u5982\u679c\u5c1a\u672a\u5173\u95ed\uff09,\u5982\u679c\u5df2\u5173\u95ed\u4e5f\u4e0d\u4f1a\u62a5\u9519\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"context.destroy()\u2192 None"}),"\uff1a\u9500\u6bc1\u4e0a\u4e0b\u6587\uff0c\u7acb\u5373\u91ca\u653e\u8d44\u6e90\uff0c\u4e0d\u7b49\u5f85\u6b63\u5728\u8fdb\u884c\u7684\u64cd\u4f5c\u3002\u597d\u6bd4\u76f4\u63a5\u65ad\u7535\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u901a\u4fe1\u793a\u4f8b",children:"\u901a\u4fe1\u793a\u4f8b"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"#%E9%80%9A%E4%BF%A1%E4%BC%98%E5%8A%BF",children:"ROS2\u7684\u57fa\u7840\u901a\u4fe1"}),"\u7c7b\u578b\u7684\u793a\u4f8b\u4ee3\u7801\u90fd\u5728",(0,r.jsx)(e.a,{href:"https://gitee.com/guyuehome/ros2_21_tutorials",children:"ros2_21_tutorials"}),"\u4ed3\u5e93\u4e2d\u3002\u62c9\u53d6\u5230",(0,r.jsx)(e.code,{children:"src"}),"\u6587\u4ef6\u5939\u4e2d\uff0c\u53c2\u8003\u4e0a\u6587\u7f16\u8bd1\u3001\u8fd0\u884c\u5373\u53ef\u3002"]}),"\n",(0,r.jsx)(e.h4,{id:"\u8bdd\u9898",children:"\u8bdd\u9898"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u8bdd\u9898\u7684\u53d1\u5e03\u8005\u8282\u70b9 \uff1a ",(0,r.jsx)(e.code,{children:"ros2 run learning_topic topic_helloworld_pub"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u8bdd\u9898\u7684\u8ba2\u9605\u8005\u8282\u70b9 \uff1a ",(0,r.jsx)(e.code,{children:"ros2 run learning_topic topic_helloworld_sub"})]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u53ef\u4ee5\u770b\u5230\u53d1\u5e03\u8005\u5faa\u73af\u53d1\u5e03\u201cHello World\u201d\u5b57\u7b26\u4e32\u6d88\u606f\uff0c\u8ba2\u9605\u8005\u4e5f\u4ee5\u51e0\u4e4e\u540c\u6837\u7684\u9891\u7387\u6536\u5230\u8be5\u8bdd\u9898\u7684\u6d88\u606f\u6570\u636e\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u670d\u52a1",children:"\u670d\u52a1"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u670d\u52a1\u7684\u670d\u52a1\u7aef\u8282\u70b9 \uff1a ",(0,r.jsx)(e.code,{children:"ros2 run learning_service service_adder_server"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u670d\u52a1\u7684\u5ba2\u6237\u7aef\u8282\u70b9 \uff1a ",(0,r.jsx)(e.code,{children:"ros2 run learning_service service_adder_client 2 3"})]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u52a8\u4f5c",children:"\u52a8\u4f5c"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u52a8\u4f5c\u7684\u670d\u52a1\u7aef\u8282\u70b9 \uff1a ",(0,r.jsx)(e.code,{children:"ros2 run learning_action action_move_server "})]}),"\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u52a8\u4f5c\u7684\u5ba2\u6237\u7aef\u8282\u70b9 \uff1a ",(0,r.jsx)(e.code,{children:"ros2 run learning_action action_move_client"})]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,r.jsxs)(e.p,{children:["\u7b49\u4ef7\u4e8e\u673a\u5668\u5b66\u4e60\u4e2d\u7684",(0,r.jsx)(e.code,{children:"\u8d85\u53c2\u6570"}),"\u5373\uff1a\u5728\u5f00\u59cb\u8bad\u7ec3\u524d\u8bbe\u7f6e\u7684\u53c2\u6570\uff0c\u4f8b\u5982\uff1a\u5b66\u4e60\u7387\u3001\u9690\u85cf\u5c42\u5927\u5c0f\u3001\u8fed\u4ee3\u6b21\u6570\u7b49\u7b49\u3002"]}),"\n",(0,r.jsx)(s,{children:"ROS\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\u7684\u53c2\u6570\u662f\u5168\u5c40\u5b57\u5178\uff0c\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2a\u8282\u70b9\u4e2d\u5171\u4eab\u6570\u636e\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8fd0\u884c\u8282\u70b9 \uff1a",(0,r.jsx)(e.code,{children:"ros2 run learning_parameter param_declare"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u5728\u53e6\u5916\u7ec8\u7aef\u8bbe\u7f6e\u53c2\u6570 \uff1a",(0,r.jsx)(e.code,{children:"ros2 param set param_declare robot_name turtle"})]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"gazebo",children:"Gazebo"}),"\n",(0,r.jsx)(e.p,{children:"Gazebo\u662f\u4e00\u6b3e\u5f00\u6e90\u76843D\u4eff\u771f\u8f6f\u4ef6\uff0c\u7528\u4e8e\u6a21\u62df\u673a\u5668\u4eba\u5728\u590d\u6742\u73af\u5883\u4e2d\u7684\u884c\u4e3a\u3002\u5b83\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u7269\u7406\u5f15\u64ce\u548c\u4f20\u611f\u5668\u6a21\u578b\uff0c\u53ef\u4ee5\u6a21\u62df\u673a\u5668\u4eba\u7684\u8fd0\u52a8\u3001\u78b0\u649e\u3001\u4f20\u611f\u5668\u6570\u636e\u7b49\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u5b89\u88c5gz\nsudo apt-get install ros-jazzy-ros-gz\n\n# \u6d4b\u8bd5\uff08\u53c2\u6570 empty.sdf \u8868\u793a\u7a7a\u573a\u666f\uff09\n# \u6d4b\u8bd5\u80fd\u5426\u6b63\u5e38\u542f\u52a8\u4e14\u65e0\u5361\u987f\uff0cgz_args:=empty.sdf\u8868\u793a\u4f7f\u7528\u7a7a\u573a\u666f\nros2 launch ros_gz_sim gz_sim.launch.py gz_args:=empty.sdf\n\n# \u6211\u7684Gazebo\u7248\u672c\n"""\nGazebo Sim, version 8.9.0\nCopyright (C) 2018 Open Source Robotics Foundation.\nReleased under the Apache 2.0 License.\n"""\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"https://app.gazebosim.org/fuel/models",children:"gazebosim"}),"\u6709\u5927\u91cf\u4e0b\u8f7d\u597d\u7684\u6a21\u578b(models)\u4e0e\u573a\u666f(worlds)\u53ef\u4ee5\u4f7f\u7528\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u60f3\u7b80\u5355\u70b9\u5c31\u9009\u4e00\u4e2a\u81ea\u5e26\u6444\u50cf\u5934\u7684\u673a\u5668\u4eba\u6a21\u578b\uff08model\uff09\uff0c\u5982\u679c\u6709\u4e2d\u610f\u7684\u673a\u5668\u4eba\u6a21\u578b\u6ca1\u6444\u50cf\u5934\u7684\uff0c\u53ef\u4ee5\u81ea\u5df1\u52a0\u4e00\u4e2a\u6444\u50cf\u5934\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u9009\u8d5b\u9053\u7c7b\u7684\uff0c\u6709\u660e\u663e\u7684\u8f66\u9053\u7ebf\uff0c\u53ef\u4ee5\u8f83\u597d\u7684\u6d4b\u8bd5\u7b97\u6cd5\u3002\u5982\u679c\u573a\u666f\u8fc7\u4e8e\u7b80\u5355\u53ef\u4ee5\u9002\u5f53\u7684\u6dfb\u52a0\u4e00\u4e9b\u6a21\u578b\uff0c\u4f8b\u5982\uff1a\u8def\u706f\u3001\u6811\u6728\u3001\u7bb1\u5b50\u7b49\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4ece\u7ed3\u6784\u4e0a\u6765\u8bf4\uff0c\u573a\u666f\uff08world\uff09\u5305\u542b N \u4e2a\u6a21\u578b\uff08model\uff09\uff0c\u6a21\u578b\u5305\u542b M \u4e2a\u4f20\u611f\u5668\uff08sensor\uff09\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u865a\u62df\u4eff\u771f\u7684\u4e16\u754c\u89c2\u548cBlender\u7684\u4e16\u754c\u89c2\u7c7b\u4f3c\uff0c\u4e00\u4e2a\u4e16\u754c\u9700\u8981\u6709\u7269\u7406\u5f15\u64ce\u3001\u5149\u6e90\u3001\u6a21\u578b\u7b49\u7b49\u3002\u9996\u5148\u6211\u4eec\u9700\u8981\u7b80\u5355\u4e86\u89e3\u4e0b\u8fd9\u6837\u7684\u4e16\u754c\u89c2\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["sdf\u683c\u5f0f\u4e2d",(0,r.jsx)(s,{children:"\u4e16\u754c"}),"\u53ef\u63a5\u6536\u7684\u5b50\u5143\u7d20\uff1a",(0,r.jsx)(e.a,{href:"http://sdformat.org/spec?ver=1.4&elem=world",children:"http://sdformat.org/spec?ver=1.4&elem=world"})]}),"\n",(0,r.jsxs)(e.p,{children:["sdf\u683c\u5f0f\u4e2d",(0,r.jsx)(s,{children:"\u6a21\u578b"}),"\u53ef\u63a5\u6536\u7684\u5b50\u5143\u7d20\uff1a",(0,r.jsx)(e.a,{href:"http://sdformat.org/spec?ver=1.4&elem=model",children:"http://sdformat.org/spec?ver=1.4&elem=model"})]}),"\n",(0,r.jsxs)(e.p,{children:["gazebo\u7684",(0,r.jsx)(s,{children:"\u4f20\u611f\u5668"}),"\u5e93\uff1a",(0,r.jsx)(e.a,{href:"https://gazebosim.org/libs/sensors/",children:"https://gazebosim.org/libs/sensors/"})]}),"\n",(0,r.jsxs)(e.p,{children:["sdf\u683c\u5f0f\u4e2d",(0,r.jsx)(s,{children:"\u4f20\u611f\u5668\u53ef\u63a5\u6536\u7684\u5b50\u5143\u7d20"}),"\uff1a",(0,r.jsx)(e.a,{href:"http://sdformat.org/spec?ver=1.4&elem=sensor",children:"http://sdformat.org/spec?ver=1.4&elem=sensor"})]}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u79cd\u7ed3\u6784\u5316\u7684\u6587\u6863\u53ef\u8bfb\u6027\u8981\u6bd4\u4f20\u7edf\u7684\u7eaf\u6587\u6863\u89c2\u611f\u597d\u5f88\u591a\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"urdf",children:"URDF"}),"\n",(0,r.jsx)(e.p,{children:"URDF\uff08Unified Robot Description Format\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u63cf\u8ff0\u673a\u5668\u4eba\u6a21\u578b\u7684XML\u683c\u5f0f\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u4e00\u4e2a\u4e24\u8f6e\u673a\u5668\u4eba\u8fd0\u52a8\u793a\u4f8b",(0,r.jsx)(e.a,{href:"https://gazebosim.org/docs/latest/moving_robot/",children:"\u5b98\u65b9\u6559\u7a0b"})]}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7\u8fd9\u4e2a\u90e8\u5206\u7684\u5b66\u4e60\uff0c\u4f60\u53ef\u4ee5\u5b66\u4f1a\u5982\u4f55\u64cd\u7eb5\u4f60\u7684\u5c0f\u8f66\u8fd0\u52a8\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5176\u4e2d",(0,r.jsx)(e.code,{children:"pose"}),"\u6807\u7b7e\u67096\u4e2a\u53c2\u6570\uff0c\u5b98\u65b9\u6587\u6863\u8ba4\u4e3a\u6bd4\u8f83\u7b80\u5355\u6ca1\u8bb2\uff0c\u8fd9\u91cc\u63d0\u4e00\u4e0b\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u524d\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u4e09\u7ef4\u7a7a\u95f4\u5750\u6807\uff08\u53d6\u503c\u8303\u56f4\u4e3a\u7a7a\u95f4\u5185\u5373\u53ef\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u540e\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u7ed5\u67d0\u4e2a\u8f74\u7684\u89d2\u5ea6\uff08\u63a7\u5236\u7269\u4f53\u9762\u671d\u4ec0\u4e48\u65b9\u5411\uff09"}),"\n"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u8f74"}),(0,r.jsx)(e.th,{children:"\u65b9\u5411"}),(0,r.jsx)(e.th,{children:"\u6b63\u503c\u542b\u4e49"}),(0,r.jsx)(e.th,{children:"\u989c\u8272\u6807\u8bc6"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"X \u8f74"})}),(0,r.jsx)(e.td,{children:"\u524d\u540e\u65b9\u5411"}),(0,r.jsx)(e.td,{children:"\u5411\u524d\uff08North\uff09"}),(0,r.jsx)(e.td,{children:"\ud83d\udd34 \u7ea2\u8272"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Y \u8f74"})}),(0,r.jsx)(e.td,{children:"\u5de6\u53f3\u65b9\u5411"}),(0,r.jsx)(e.td,{children:"\u5411\u5de6\uff08West\uff09"}),(0,r.jsx)(e.td,{children:"\ud83d\udfe2 \u7eff\u8272"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Z \u8f74"})}),(0,r.jsx)(e.td,{children:"\u4e0a\u4e0b\u65b9\u5411"}),(0,r.jsx)(e.td,{children:"\u5411\u4e0a"}),(0,r.jsx)(e.td,{children:"\ud83d\udd35 \u84dd\u8272"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u89d2\u5ea6"}),(0,r.jsx)(e.td,{children:"\u8f74"}),(0,r.jsx)(e.td,{children:"\u65cb\u8f6c\u65b9\u5411"}),(0,r.jsx)(e.td,{children:"\u5e38\u7528\u503c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Roll"})}),(0,r.jsx)(e.td,{children:"\u7ed5 X \u8f74\u65cb\u8f6c"}),(0,r.jsx)(e.td,{children:"\u7ffb\u6eda"}),(0,r.jsx)(e.td,{children:"\u901a\u5e38\u4e3a 0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Pitch"})}),(0,r.jsx)(e.td,{children:"\u7ed5 Y \u8f74\u65cb\u8f6c"}),(0,r.jsx)(e.td,{children:"\u4fef\u4ef0"}),(0,r.jsx)(e.td,{children:"\u901a\u5e38\u4e3a 0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Yaw"})}),(0,r.jsx)(e.td,{children:"\u7ed5 Z \u8f74\u65cb\u8f6c"}),(0,r.jsx)(e.td,{children:"\u5de6\u53f3\u8f6c\u5934"}),(0,r.jsx)(e.td,{children:"0, 1.57, 3.14, -1.57"})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Yaw \u89d2\u5ea6\u5bf9\u7167\u8868"}),"\uff1a"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Yaw (\u5f27\u5ea6)"}),(0,r.jsx)(e.th,{children:"\u89d2\u5ea6"}),(0,r.jsx)(e.th,{children:"\u671d\u5411"}),(0,r.jsx)(e.th,{children:"\u793a\u610f"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"0"})}),(0,r.jsx)(e.td,{children:"0\xb0"}),(0,r.jsx)(e.td,{children:"\u671d\u5411 +X\uff08\u524d\uff09"}),(0,r.jsx)(e.td,{children:"\u2192"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"1.57"})}),(0,r.jsx)(e.td,{children:"90\xb0"}),(0,r.jsx)(e.td,{children:"\u671d\u5411 +Y\uff08\u5de6\uff09"}),(0,r.jsx)(e.td,{children:"\u2191"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"3.14"})}),(0,r.jsx)(e.td,{children:"180\xb0"}),(0,r.jsx)(e.td,{children:"\u671d\u5411 -X\uff08\u540e\uff09"}),(0,r.jsx)(e.td,{children:"\u2190"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-1.57"})}),(0,r.jsx)(e.td,{children:"-90\xb0"}),(0,r.jsx)(e.td,{children:"\u671d\u5411 -Y\uff08\u53f3\uff09"}),(0,r.jsx)(e.td,{children:"\u2193"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"\u4f20\u611f\u5668",children:"\u4f20\u611f\u5668"}),"\n",(0,r.jsx)(e.p,{children:"\u57fa\u4e8e\u4e0d\u540c\u7684\u76ee\u7684\uff0c\u6211\u4eec\u4f1a\u9009\u62e9\u4e0d\u540c\u7684\u4f20\u611f\u5668\u7ed3\u5408\u4e0d\u540c\u7684\u7b97\u6cd5\u6765\u5b9e\u73b0\u3002"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u4f20\u611f\u5668"}),(0,r.jsx)(e.th,{children:"\u5e94\u7528\u573a\u666f"}),(0,r.jsx)(e.th,{children:"\u4f18\u52bf"}),(0,r.jsx)(e.th,{children:"\u52a3\u52bf"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u6fc0\u5149\u96f7\u8fbe"})}),(0,r.jsx)(e.td,{children:"SLAM\u5efa\u56fe\u3001\u907f\u969c"}),(0,r.jsx)(e.td,{children:"\u7cbe\u5ea6\u9ad8\uff0c\u4e0d\u53d7\u5149\u7167\u5f71\u54cd"}),(0,r.jsx)(e.td,{children:"\u4ef7\u683c\u8d35\uff0c\u65e0\u989c\u8272\u4fe1\u606f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u6444\u50cf\u5934"})}),(0,r.jsx)(e.td,{children:"\u76ee\u6807\u8bc6\u522b\u3001\u89c6\u89c9SLAM"}),(0,r.jsx)(e.td,{children:"\u6210\u672c\u4f4e\uff0c\u4fe1\u606f\u4e30\u5bcc"}),(0,r.jsx)(e.td,{children:"\u53d7\u5149\u7167\u5f71\u54cd\uff0c\u8ba1\u7b97\u91cf\u5927"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u6df1\u5ea6\u76f8\u673a"})}),(0,r.jsx)(e.td,{children:"\u5ba4\u5185SLAM\u30013D\u91cd\u5efa"}),(0,r.jsx)(e.td,{children:"\u63d0\u4f9bRGB+\u6df1\u5ea6\uff0c\u5b9e\u65f6\u6027\u597d"}),(0,r.jsx)(e.td,{children:"\u4ec5\u5ba4\u5185\u53ef\u7528\uff0c\u8303\u56f4\u6709\u9650(5m)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"IMU"})}),(0,r.jsx)(e.td,{children:"\u59ff\u6001\u4f30\u8ba1\u3001\u4f20\u611f\u5668\u878d\u5408"}),(0,r.jsx)(e.td,{children:"\u9ad8\u9891\u8f93\u51fa\uff0c\u4e0d\u4f9d\u8d56\u73af\u5883"}),(0,r.jsx)(e.td,{children:"\u5b58\u5728\u6f02\u79fb\uff0c\u9700\u878d\u5408\u5176\u4ed6\u4f20\u611f\u5668"})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:["\u673a\u5668\u4eba\u4e13\u4e1a\u53ef\u4ee5\u53c2\u8003",(0,r.jsx)(e.a,{href:"https://gazebosim.org/docs/latest/sensors/",children:"\u5b98\u65b9\u6587\u6863\u6559\u7a0b"}),"\uff0c\u5176\u4e2d\u4f7f\u7528\u7684\u662fIMU \u4f20\u611f\u5668\u3001\u63a5\u89e6\u5f0f\u4f20\u611f\u5668\u548c\u6fc0\u5149\u96f7\u8fbe\u4f20\u611f\u5668\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u89c6\u89c9\u65b9\u6848\u5730\u56fe\u4e0e\u6a21\u578b",children:"\u89c6\u89c9\u65b9\u6848\u5730\u56fe\u4e0e\u6a21\u578b"}),"\n",(0,r.jsx)(e.p,{children:"\u4eba\u5de5\u667a\u80fd\u4e13\u4e1a\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u7eaf\u89c6\u89c9\u65b9\u6848\u7684\u5730\u56fe\u4e0e\u5c0f\u8f66\uff08\u4e3a\u4e86\u6d41\u7545\uff0c\u53ea\u52a0\u8f7d\u4e86\u5c11\u91cf\u6811\u6728\u4e0e\u4eba\u6a21\u578b\uff09\uff1a"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"\u70b9\u51fb\u5c55\u5f00/\u6298\u53e0"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",metastring:'showLineNumbers title="simple.sdf"',children:"<?xml version=\"1.0\" ?>\n<sdf version=\"1.8\">\n    <world name=\"Moving_robot\">\n        <physics name=\"1ms\" type=\"ignored\">\n            <max_step_size>0.001</max_step_size>\n            <real_time_factor>1.0</real_time_factor>\n        </physics>\n        <plugin\n            filename=\"gz-sim-physics-system\"\n            name=\"gz::sim::systems::Physics\">\n        </plugin>\n        <plugin\n            filename=\"gz-sim-user-commands-system\"\n            name=\"gz::sim::systems::UserCommands\">\n        </plugin>\n        <plugin\n            filename=\"gz-sim-scene-broadcaster-system\"\n            name=\"gz::sim::systems::SceneBroadcaster\">\n        </plugin>\n        <plugin\n            filename=\"gz-sim-sensors-system\"\n            name=\"gz::sim::systems::Sensors\">\n            <render_engine>ogre2</render_engine>\n        </plugin>\n\n        <light type=\"directional\" name=\"sun\">\n            <cast_shadows>true</cast_shadows>\n            <pose>0 0 10 0 0 0</pose>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n            <specular>0.2 0.2 0.2 1</specular>\n            <attenuation>\n                <range>1000</range>\n                <constant>0.9</constant>\n                <linear>0.01</linear>\n                <quadratic>0.001</quadratic>\n            </attenuation>\n            <direction>-0.5 0.1 -0.9</direction>\n        </light>\n\n        <include>\n        <uri>\n        https://fuel.gazebosim.org/1.0/OpenRobotics/models/Oak tree\n        </uri>\n        </include>\n\n        <include>\n        <uri>\n        https://fuel.gazebosim.org/1.0/OpenRobotics/models/Pine Tree\n        </uri>\n        </include>\n\n        <model name=\"ground_plane\">\n            <static>true</static>\n            <pose>0 0 -0.05 0 0 0</pose>\n            <link name=\"link\">\n                <collision name=\"collision\">\n                <geometry>\n                    <box>\n                        <size>90 60 0.1</size>\n                    </box>\n                </geometry>\n                </collision>\n                <visual name=\"visual\">\n                <geometry>\n                    <box>\n                        <size>90 60 0.1</size>\n                    </box>\n                </geometry>\n                <material>\n                    <ambient>1 1 1 1</ambient>\n                    <diffuse>1 1 1 1</diffuse>\n                    <specular>0.1 0.1 0.1 1</specular>\n                    <pbr>\n                        <metal>\n                            <albedo_map>file:///home/allen/workspace/map.png</albedo_map>\n                        </metal>\n                    </pbr>\n                </material>\n                </visual>\n            </link>\n        </model>\n\n        <model name='vehicle_blue' canonical_link='chassis'>\n            <pose>-2.5607891082763667 17.635400772094727 -2.1121493773534894e-05 -8.8815699145246897e-10 7.3326400526134407e-06 2.6270999059034565e-13</pose>\n            <link name='chassis'>\n                <pose relative_to='__model__'>0.5 0 0.4 0 0 0</pose>\n                <inertial> \x3c!--inertial properties of the link mass, inertia matix--\x3e\n                    <mass>1.14395</mass>\n                    <inertia>\n                        <ixx>0.126164</ixx>\n                        <ixy>0</ixy>\n                        <ixz>0</ixz>\n                        <iyy>0.416519</iyy>\n                        <iyz>0</iyz>\n                        <izz>0.481014</izz>\n                    </inertia>\n                </inertial>\n                <visual name='visual'>\n                    <geometry>\n                        <box>\n                            <size>2.0 1.0 0.5</size> \x3c!--question: this size is in meter--\x3e\n                        </box>\n                    </geometry>\n                    \x3c!--let's add color to our link--\x3e\n                    <material>\n                        <ambient>0.0 0.0 1.0 1</ambient>\n                        <diffuse>0.0 0.0 1.0 1</diffuse>\n                        <specular>0.0 0.0 1.0 1</specular>\n                    </material>\n                </visual>\n                <collision name='collision'> \x3c!--todo: describe why we need the collision--\x3e\n                    <geometry>\n                        <box>\n                            <size>2.0 1.0 0.5</size>\n                        </box>\n                    </geometry>\n                </collision>\n            </link>\n\n            \x3c!--let's build the left wheel--\x3e\n            <link name='left_wheel'>\n                <pose relative_to=\"chassis\">-0.5 0.6 0 -1.5707 0 0</pose> \x3c!--angles are in radian--\x3e\n                <inertial>\n                    <mass>2</mass>\n                    <inertia>\n                        <ixx>0.145833</ixx>\n                        <ixy>0</ixy>\n                        <ixz>0</ixz>\n                        <iyy>0.145833</iyy>\n                        <iyz>0</iyz>\n                        <izz>0.125</izz>\n                    </inertia>\n                </inertial>\n                <visual name='visual'>\n                    <geometry>\n                        <cylinder>\n                            <radius>0.4</radius>\n                            <length>0.2</length>\n                        </cylinder>\n                    </geometry>\n                    <material>\n                        <ambient>1.0 0.0 0.0 1</ambient>\n                        <diffuse>1.0 0.0 0.0 1</diffuse>\n                        <specular>1.0 0.0 0.0 1</specular>\n                    </material>\n                </visual>\n                <collision name='collision'>\n                    <geometry>\n                        <cylinder>\n                            <radius>0.4</radius>\n                            <length>0.2</length>\n                        </cylinder>\n                    </geometry>\n                </collision>\n            </link>\n\n            \x3c!--copy and paste for right wheel but change position--\x3e\n            <link name='right_wheel'>\n                <pose relative_to=\"chassis\">-0.5 -0.6 0 -1.5707 0 0</pose> \x3c!--angles are in radian--\x3e\n                <inertial>\n                    <mass>1</mass>\n                    <inertia>\n                        <ixx>0.145833</ixx>\n                        <ixy>0</ixy>\n                        <ixz>0</ixz>\n                        <iyy>0.145833</iyy>\n                        <iyz>0</iyz>\n                        <izz>0.125</izz>\n                    </inertia>\n                </inertial>\n                <visual name='visual'>\n                    <geometry>\n                        <cylinder>\n                            <radius>0.4</radius>\n                            <length>0.2</length>\n                        </cylinder>\n                    </geometry>\n                    <material>\n                        <ambient>1.0 0.0 0.0 1</ambient>\n                        <diffuse>1.0 0.0 0.0 1</diffuse>\n                        <specular>1.0 0.0 0.0 1</specular>\n                    </material>\n                </visual>\n                <collision name='collision'>\n                    <geometry>\n                        <cylinder>\n                            <radius>0.4</radius>\n                            <length>0.2</length>\n                        </cylinder>\n                    </geometry>\n                </collision>\n            </link>\n\n            <frame name=\"caster_frame\" attached_to='chassis'>\n                <pose>0.8 0 -0.2 0 0 0</pose>\n            </frame>\n\n            \x3c!--caster wheel--\x3e\n            <link name='caster'>\n                <pose relative_to='caster_frame'/>\n                <inertial>\n                    <mass>1</mass>\n                    <inertia>\n                        <ixx>0.1</ixx>\n                        <ixy>0</ixy>\n                        <ixz>0</ixz>\n                        <iyy>0.1</iyy>\n                        <iyz>0</iyz>\n                        <izz>0.1</izz>\n                    </inertia>\n                </inertial>\n                <visual name='visual'>\n                    <geometry>\n                        <sphere>\n                            <radius>0.2</radius>\n                        </sphere>\n                    </geometry>\n                    <material>\n                        <ambient>0.0 1 0.0 1</ambient>\n                        <diffuse>0.0 1 0.0 1</diffuse>\n                        <specular>0.0 1 0.0 1</specular>\n                    </material>\n                </visual>\n                <collision name='collision'>\n                    <geometry>\n                        <sphere>\n                            <radius>0.2</radius>\n                        </sphere>\n                    </geometry>\n                </collision>\n            </link>\n\n            \x3c!--camera link--\x3e\n            <link name='camera_link'>\n                <pose relative_to='chassis'>0.95 0 0.3 0 0 0</pose> \x3c!--positioned at the very front of chassis--\x3e\n                <inertial>\n                    <mass>0.1</mass>\n                    <inertia>\n                        <ixx>0.000166667</ixx>\n                        <iyy>0.000166667</iyy>\n                        <izz>0.000166667</izz>\n                    </inertia>\n                </inertial>\n                <visual name='visual'>\n                    <geometry>\n                        <box>\n                            <size>0.1 0.1 0.1</size>\n                        </box>\n                    </geometry>\n                    <material>\n                        <ambient>0.0 0.0 0.0 1</ambient>\n                        <diffuse>0.0 0.0 0.0 1</diffuse>\n                        <specular>0.0 0.0 0.0 1</specular>\n                    </material>\n                </visual>\n                <collision name='collision'>\n                    <geometry>\n                        <box>\n                            <size>0.1 0.1 0.1</size>\n                        </box>\n                    </geometry>\n                </collision>\n                \n                \x3c!--camera sensor--\x3e\n                <sensor name=\"camera\" type=\"camera\">\n                    <camera>\n                        <horizontal_fov>1.047</horizontal_fov>\n                        <image>\n                            <width>640</width>\n                            <height>480</height>\n                        </image>\n                        <clip>\n                            <near>0.1</near>\n                            <far>100</far>\n                        </clip>\n                    </camera>\n                    <always_on>1</always_on>\n                    <update_rate>30</update_rate>\n                    <visualize>true</visualize>\n                    \x3c!--camera sensor topic--\x3e\n                    <topic>camera</topic>\n                </sensor>\n            </link>\n\n            \x3c!--connecting these links together using joints--\x3e\n            <joint name='left_wheel_joint' type='revolute'> \x3c!--continous joint is not supported yet--\x3e\n                <pose relative_to='left_wheel'/>\n                <parent>chassis</parent>\n                <child>left_wheel</child>\n                <axis>\n                    <xyz expressed_in='__model__'>0 1 0</xyz> \x3c!--can be defined as any frame or even arbitrary frames--\x3e\n                    <limit>\n                        <lower>-1.79769e+308</lower>    \x3c!--negative infinity--\x3e\n                        <upper>1.79769e+308</upper>     \x3c!--positive infinity--\x3e\n                    </limit>\n                </axis>\n            </joint>\n\n            <joint name='right_wheel_joint' type='revolute'>\n                <pose relative_to='right_wheel'/>\n                <parent>chassis</parent>\n                <child>right_wheel</child>\n                <axis>\n                    <xyz expressed_in='__model__'>0 1 0</xyz>\n                    <limit>\n                        <lower>-1.79769e+308</lower>    \x3c!--negative infinity--\x3e\n                        <upper>1.79769e+308</upper>     \x3c!--positive infinity--\x3e\n                    </limit>\n                </axis>\n            </joint>\n\n            \x3c!--different type of joints ball joint--\x3e \x3c!--defult value is the child--\x3e\n            <joint name='caster_wheel' type='ball'>\n                <parent>chassis</parent>\n                <child>caster</child>\n            </joint>\n\n            \x3c!--camera joint - fixed to chassis--\x3e\n            <joint name='camera_joint' type='fixed'>\n                <parent>chassis</parent>\n                <child>camera_link</child>\n            </joint>\n\n            \x3c!--diff drive plugin--\x3e\n            <plugin\n                filename=\"gz-sim-diff-drive-system\"\n                name=\"gz::sim::systems::DiffDrive\">\n                <left_joint>left_wheel_joint</left_joint>\n                <right_joint>right_wheel_joint</right_joint>\n                <wheel_separation>1.2</wheel_separation>\n                <wheel_radius>0.4</wheel_radius>\n                <odom_publish_frequency>1</odom_publish_frequency>\n                <topic>cmd_vel</topic>\n            </plugin>\n        </model>\n\n    \x3c!--\u5de6\u53f3\u79fb\u52a8\u7684\u8def\u969c\u884c\u4eba--\x3e\n    <actor name=\"actor_walking\">\n      <skin>\n        <filename>https://fuel.gazebosim.org/1.0/Mingfei/models/actor/tip/files/meshes/walk.dae</filename>\n        <scale>1.0</scale>\n      </skin>\n      <animation name='walk'>\n        <filename>https://fuel.gazebosim.org/1.0/Mingfei/models/actor/tip/files/meshes/walk.dae</filename>\n      </animation>\n      <script>\n        <loop>true</loop>\n        <delay_start>0.000000</delay_start>\n        <auto_start>true</auto_start>\n        <trajectory id=\"0\" type=\"walk\">\n          <waypoint>\n            <time>0</time>\n            <pose>0 -16 1.0 0 0 1.57</pose>\n          </waypoint>\n          <waypoint>\n            <time>3</time>\n            <pose>0 -2 1.0 0 0 1.57</pose>\n          </waypoint>\n          <waypoint>\n            <time>4</time>\n            <pose>0 -2 1.0 0 0 1.57</pose>\n          </waypoint>\n          <waypoint>\n            <time>4.5</time>\n            <pose>0 -2 1.0 0 0 -1.57</pose>\n          </waypoint>\n          <waypoint>\n            <time>7.5</time>\n            <pose>0 -16 1.0 0 0 -1.57</pose>\n          </waypoint>\n          <waypoint>\n            <time>8.5</time>\n            <pose>0 -16 1.0 0 0 -1.57</pose>\n          </waypoint>\n          <waypoint>\n            <time>9</time>\n            <pose>0 -16 1.0 0 0 1.57</pose>\n          </waypoint>\n        </trajectory>\n      <\/script>\n    </actor>\n\n    </world>\n</sdf>\n"})})]}),"\n",(0,r.jsx)(e.h2,{id:"ros_gz_bridge",children:"ros_gz_bridge"}),"\n",(0,r.jsxs)(e.p,{children:["\u6b64\u90e8\u5206\u4ee3\u7801\u6765\u81ea\u5b98\u65b9\u6587\u6863",(0,r.jsx)(e.a,{href:"https://gazebosim.org/docs/latest/ros2_integration/",children:"https://gazebosim.org/docs/latest/ros2_integration/"})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6570\u636e\u6d41\u5411"}),"\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6444\u50cf\u5934 \u2192 ",(0,r.jsx)(e.code,{children:"/camera"})," \u8bdd\u9898 \u2192 \u4f60\u7684\u89c6\u89c9\u7b97\u6cd5\u8282\u70b9"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4f60\u7684\u7b97\u6cd5\u8282\u70b9 \u2192 ",(0,r.jsx)(e.code,{children:"/cmd_vel"})," \u8bdd\u9898 \u2192 \u673a\u5668\u4eba\u8fd0\u52a8\u63a7\u5236"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e2a\u9879\u76ee\u4e2d\u6d89\u53ca\u52302\u79cd\u901a\u4fe1\u4fe1\u606f\u683c\u5f0f\u7684\u8f6c\u6362\uff1a"}),"\n",(0,r.jsx)(e.p,{children:"\u4eceROS2_Gazebo\u6d41\u51fa\u7684\u4f20\u611f\u5668\u6570\u636e\uff0c\u9700\u8981\u8f6c\u4e3aPython\u80fd\u5904\u7406\u7684\u6570\u636e\u683c\u5f0f\u3002"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5185\u7f6e\u6444\u50cf\u5934\u63d2\u4ef6"}),"\uff1a\u4f1a\u81ea\u52a8\u5c06\u6444\u50cf\u5934\u6570\u636e\u53d1\u5e03\u5230 ",(0,r.jsx)(e.code,{children:"/camera"})," \u8bdd\u9898"]}),"\n",(0,r.jsxs)(e.p,{children:["\u542f\u52a8\u540e\u53ef\u4ee5\u901a\u8fc7",(0,r.jsx)(e.code,{children:"rviz2"}),"\u67e5\u770b\u63a5\u6536\u5230\u7684\u56fe\u7247\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4ece\u7b97\u6cd5\u8282\u70b9\u6d41\u5165ROS2_Gazebo\u7684\u63a7\u5236\u4fe1\u606f\uff0c\u9700\u8981\u662fROS2_Gazebo\u80fd\u7406\u89e3\u7684\u6570\u636e\u683c\u5f0f\u3002"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u8fd0\u52a8\u63a7\u5236\u63d2\u4ef6"}),"\uff1a",(0,r.jsx)(e.code,{children:"gz::sim::systems::DiffDrive"})," \u63d2\u4ef6\u4f1a\u76d1\u542c ",(0,r.jsx)(e.code,{children:"/cmd_vel"})," \u8bdd\u9898\u6765\u63a7\u5236\u673a\u5668\u4eba\u8fd0\u52a8"]}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u628a\u9700\u8981\u6267\u884c\u7684\u547d\u4ee4\u5199\u5165\u5230Makefile\u91cc\uff0c\u4fbf\u4e8e\u540e\u7eed\u6267\u884c\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",metastring:'title="Makefile"',children:'.PHONY: world sim img cam vel bridge go left right stop rv node start\n\n# \u542f\u52a8\u5b8c\u6574\u4e16\u754c\nworld:\n\tgz sim -r world.sdf\n\t\n\n# \u6865\u63a5\u6444\u50cf\u5934\u548c\u63a7\u5236\u8bdd\u9898 (simple.sdf \u7684 /camera\u548c/cmd_vel)\nbridge:\n\tros2 run ros_gz_bridge parameter_bridge /camera@sensor_msgs/msg/Image@gz.msgs.Image /cmd_vel@geometry_msgs/msg/Twist]gz.msgs.Twist\n\nstart:\n\tcolcon build --packages-select learning_node\n\tros2 run learning_node node_helloworld\n\n# \u542f\u52a8\u7b80\u5355\u8f66\u8f86\u4e16\u754c\nsim:\n\tgz sim -r simple.sdf\n\n# \u5355\u72ec\u6865\u63a5\u6444\u50cf\u5934 (simple.sdf \u7684 /camera)\ncam:\n\tros2 run ros_gz_bridge parameter_bridge /camera@sensor_msgs/msg/Image@gz.msgs.Image\n# \u542f\u52a8 rviz2\nrv:\n\trviz2\n\n# \u5355\u72ec\u6865\u63a5\u63a7\u5236\u8bdd\u9898 (simple.sdf \u7684 /cmd_vel)\nvel:\n\tros2 run ros_gz_bridge parameter_bridge /cmd_vel@geometry_msgs/msg/Twist]gz.msgs.Twist\n\n# \u524d\u8fdb\ngo:\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 1.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"\n\n# \u5de6\u8f6c\nleft:\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.5, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.5}}"\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"\n\n# \u53f3\u8f6c\nright:\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.5, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: -0.5}}"\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"\n\n# \u505c\u6b62\nstop:\n\tros2 topic pub -1 /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u8c03\u8bd5\u547d\u4ee4",children:"\u8c03\u8bd5\u547d\u4ee4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770bGZ\u4e2d\u7684\u8bdd\u9898\ngz topic -l\n\n# \u67e5\u770bros2\u4e2d\u6d3b\u8dc3\u7684\u8bdd\u9898\nros2 topic list\n\n# \u67e5\u770b\u56fe\u50cf\u8bdd\u9898\u6570\u636e\nros2 topic echo /camera/image\n# \u67e5\u770b\u901f\u5ea6\u63a7\u5236\u8bdd\u9898\nros2 topic echo /model/my_robot/cmd_vel\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u7b97\u6cd5\u8282\u70b9",children:"\u7b97\u6cd5\u8282\u70b9"}),"\n",(0,r.jsxs)(e.admonition,{type:"tip",children:[(0,r.jsx)(e.p,{children:"\u4f60\u662f\u5426\u9700\u8981\u53bb\u4e86\u89e3\u4e00\u4e2a\u7b97\u6cd5\uff1f"}),(0,r.jsx)(e.p,{children:"\u4ece\u529f\u5229\u89d2\u5ea6\u6765\u8bf4\uff1a"}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5f53\u4f60\u9700\u8981\u6539\u8fdb\u8fd9\u4e2a\u7b97\u6cd5\u65f6\uff0c\u9700\u8981\u4e86\u89e3\u5b83\u7684\u5de5\u4f5c\u539f\u7406\u548c\u5b9e\u73b0\u7ec6\u8282\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5f53\u4f60\u9700\u8981\u8c03\u53c2\u65f6\uff0c\u9700\u8981\u4e86\u89e3\u53c2\u6570\u80cc\u540e\u7684\u610f\u4e49\u3002"}),"\n"]}),(0,r.jsx)(e.p,{children:"\u5982\u679c\u67d0\u4e2a\u7b97\u6cd5\u9ed8\u8ba4\u53c2\u6570\u8868\u73b0\u8db3\u591f\uff0c\u5176\u5b9e\u53ef\u4ee5\u5148\u4e0d\u7528\u77e5\u9053\u5b83\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u3002"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u4e0b\u9762\u4ee3\u7801\u5b9e\u73b0\u4e86\u4e00\u4e2a\u89c6\u89c9\u8fd0\u52a8\u63a7\u5236\u8282\u70b9\uff0c\u4ece",(0,r.jsx)(e.code,{children:"/camera"}),"\u8bdd\u9898\u8ba2\u9605\u56fe\u50cf\u6570\u636e\uff0c\u5e76\u5904\u7406\u540e\u53d1\u5e03\u5230",(0,r.jsx)(e.code,{children:"/cmd_vel"}),"\u8bdd\u9898\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import Image\nfrom cv_bridge import CvBridge\nimport cv2\nimport numpy as np\nfrom geometry_msgs.msg import Twist\n\nclass VisualMotionController(Node):\n    def __init__(self):\n        super().__init__('visual_motion_controller')\n        \n        # \u8ba2\u9605\u6444\u50cf\u5934\u8bdd\u9898 (simple.sdf \u4e2d\u662f /camera)\n        self.image_subscription = self.create_subscription(\n            Image,\n            '/camera',\n            self.process_and_control,\n            10\n        )\n        \n        # \u53d1\u5e03\u63a7\u5236\u8bdd\u9898 (simple.sdf \u4e2d\u662f /cmd_vel)\n        self.velocity_publisher = self.create_publisher(\n            Twist,\n            '/cmd_vel',\n            10\n        )\n\n        self.bridge = CvBridge()\n        self.move_speed = 0.5\n        self.turn_speed = 0.5\n        self.step = 0  # \u8ba1\u6b65\u5668\n        self.get_logger().info('\u89c6\u89c9\u8fd0\u52a8\u63a7\u5236\u8282\u70b9\u5df2\u542f\u52a8')\n        \n        \n    def process_and_control(self, msg):\n        \"\"\"\u5904\u7406\u56fe\u50cf\u5e76\u751f\u6210\u63a7\u5236\u547d\u4ee4\"\"\"\n        try:\n            # \u5c06ROS\u56fe\u50cf\u6d88\u606f\u8f6c\u6362\u4e3aOpenCV\u683c\u5f0f\n            cv_image = self.bridge.imgmsg_to_cv2(msg, 'bgr8')\n            cv2.imshow('car',cv_image)\n            cv2.waitKey(1)\n            self.step += 1\n            \n            # \u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u4f60\u7684\u89c6\u89c9\u5904\u7406\u7b97\u6cd5\n            # \u4f8b\u5982\uff1a\u68c0\u6d4b\u969c\u788d\u7269\u3001\u8bc6\u522b\u8def\u5f84\u7b49\n            # gray = cv2.cvtColor(cv_image, cv2.COLOR_BGR2GRAY)\n            # edges = cv2.Canny(gray, 50, 150)\n            # \u5728\u8fd9\u91cc\u7f16\u5199\u4f60\u7684\u8fd0\u52a8\u63a7\u5236\u7b97\u6cd5\n            \n            # \u7b80\u5355\u7684\u63a7\u5236\u903b\u8f91\u793a\u4f8b\n            cmd = Twist()\n            if self.step < 100:\n                # \u524d\u8fdb100\u5e27\n                cmd.linear.x = self.move_speed\n                cmd.angular.z = 0.0\n                self.get_logger().info(f'\u524d\u8fdb\u4e2d... \u6b65\u6570: {self.step}')\n            elif self.step < 160:\n                # \u5de6\u8f6c60\u5e27\n                cmd.linear.x = 0.0\n                cmd.angular.z = self.turn_speed\n                self.get_logger().info(f'\u5de6\u8f6c\u4e2d... \u6b65\u6570: {self.step}')\n            else:\n                # \u91cd\u7f6e\u8ba1\u6b65\u5668\n                self.step = 0\n\n            self.velocity_publisher.publish(cmd)\n            \n        except Exception as e:\n            self.get_logger().error(f'\u5904\u7406\u56fe\u50cf\u65f6\u51fa\u9519: {str(e)}')\n        \n\ndef main(args=None):\n    \"\"\"\u4e3b\u51fd\u6570\"\"\"\n    rclpy.init(args=args)\n    \n    # \u521b\u5efa\u89c6\u89c9\u8fd0\u52a8\u63a7\u5236\u8282\u70b9\n    controller = VisualMotionController()\n    \n    try:\n        # \u542f\u52a8\u8282\u70b9\n        rclpy.spin(controller)\n    except KeyboardInterrupt:\n        controller.get_logger().info('\u8282\u70b9\u88ab\u7528\u6237\u4e2d\u65ad')\n    finally:\n        # \u53d1\u9001\u505c\u6b62\u6307\u4ee4\n        stop_cmd = Twist()\n        controller.velocity_publisher.publish(stop_cmd)\n        # \u6e05\u7406\u8d44\u6e90\n        controller.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u542f\u52a8\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",metastring:"showLineNumbers",children:"# \u7f16\u8bd1\u5de5\u4f5c\u7a7a\u95f4\uff08\u4ee5learning_node\u4e3a\u4f8b\uff09\ncolcon build --packages-select learning_node\n\n# \u542f\u52a8\u8282\u70b9\uff08\u4ee5learning_node\u4e3a\u4f8b\uff09\nros2 run learning_node node_helloworld\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u9879\u76ee\u76ee\u6807\u662f\u5728\u4e00\u4e2a\u51f9\u5b57\u5f62\u7684\u5730\u56fe\u4e0a\u5b8c\u6210\u5faa\u8ff9\u8fd0\u52a8\uff0c\u540c\u65f6\u6ce8\u610f\u907f\u5f00\u6591\u9a6c\u7ebf\u4e0a\u7684\u884c\u4eba\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u662f\u4e00\u4e2a\u5f88\u96be\u7684\u9879\u76ee\uff0c\u4f46\u662f\u4e00\u4e2a\u548c\u5b9e\u9645\u9879\u76ee\u6d41\u7a0b\u4e00\u81f4\u8981\u72ec\u7acb\u5b8c\u6210\u601d\u8def\u8bbe\u8ba1\u3001\u7b97\u6cd5\u9009\u578b\u3001\u53c2\u6570\u53ef\u89c6\u5316\u7684\u9879\u76ee\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4efb\u52a1\u5206\u6790\u4e0e\u601d\u8def\uff1a"}),"\n",(0,r.jsx)(e.h3,{id:"\u9884\u5904\u7406",children:"\u9884\u5904\u7406"}),"\n",(0,r.jsx)(e.p,{children:"\u9884\u5904\u7406\u662f\u57fa\u672c\u6d41\u7a0b\uff0c\u548c\u6570\u636e\u5206\u6790\u524d\u5148\u6570\u636e\u6e05\u6d17\u4e00\u6837\u3002\u6709\u56fa\u5b9a\u7684\u6d41\u7a0b\u548c\u5957\u8def\uff0c\u4efb\u4f55\u4e00\u672cOpencv\u6559\u6750\u90fd\u5305\u542b\u8fd9\u90e8\u5206\u5185\u5bb9\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u611f\u5174\u8da3\u533a\u57df",children:"\u611f\u5174\u8da3\u533a\u57df"}),"\n",(0,r.jsx)(e.p,{children:"\u597d\u5904\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u51cf\u5c11\u65e0\u5173\u4fe1\u606f\u7684\u5e72\u6270"}),"\n",(0,r.jsx)(e.li,{children:"\u52a0\u5feb\u8ba1\u7b97\u901f\u5ea6"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u5730\u5e73\u7ebf\u4ee5\u4e0a\u7684\u5185\u5bb9\u5176\u5b9e\u548c\u6211\u4eec\u5173\u7cfb\u4e0d\u5927\uff0c\u53ea\u6709\u68c0\u6d4b\u884c\u4eba\u7684\u65f6\u5019\u624d\u4f1a\u6709\u5f71\u54cd\u3002\u53ef\u4ee5\u5728\u68c0\u6d4b\u5230\u6591\u9a6c\u7ebf\u7684\u65f6\u5019\u8ba1\u7b97\u5b8c\u6574\u56fe\u7247\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u6240\u4ee5\u6211\u4eec\u5148\u8bbe\u7f6e",(0,r.jsx)(e.code,{children:"roi"}),"\uff08\u611f\u5174\u8da3\u533a\u57df\uff09\u4e3a\u56fe\u50cf\u7684\u4e0b\u9762\u768450%"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'def extract_roi(image ,roi_start_ratio=0.5):\n    """\u63d0\u53d6\u611f\u5174\u8da3\u533a\u57df\uff08ROI\uff09\n    \n    Args:\n        image: \u8f93\u5165\u7684BGR\u56fe\u50cf\n        roi_start_ratio: \u611f\u5174\u8da3\u533a\u57df\u3002\uff080\u8868\u793a\u6574\u5f20\u90fd\u611f\u5174\u8da3\u30010.5\u8868\u793a\u4e0b\u534a\u90e8\u5206\u611f\u5174\u8da3\uff09\n        \n    Returns:\n        roi_image: ROI\u533a\u57df\u56fe\u50cf\n    """\n    # \u83b7\u53d6\u56fe\u50cf\u5c3a\u5bf8\n    height, width = image.shape[:2]\n    \n    # \u8ba1\u7b97ROI\u8d77\u59cb\u884c\uff08\u4ece\u56fe\u50cf\u4e2d\u90e8\u5f00\u59cb\uff0c\u5173\u6ce8\u524d\u65b9\u5730\u9762\uff09\n    roi_start = int(height * roi_start_ratio)\n    \n    # \u63d0\u53d6ROI\u533a\u57df\uff08\u56fe\u50cf\u4e0b\u534a\u90e8\u5206\uff09\n    roi_image = image[roi_start:height, 0:width]\n    \n    return roi_image\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u7070\u5ea6\u5316\u4e0e\u4e8c\u503c\u5316",children:"\u7070\u5ea6\u5316\u4e0e\u4e8c\u503c\u5316"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e00\u6b65\u4e00\u822c\u662f\u4e3a\u540e\u9762\u7684\u8fb9\u7f18\u68c0\u6d4b\u505a\u94fa\u57ab\uff0c\u7b80\u5355\u7684\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u76f4\u63a5\u57fa\u4e8e\u7070\u5ea6\u5316\u548c\u4e8c\u503c\u5316\u7684\u7ed3\u679c\u505a\u5904\u7406\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u4e8c\u503c\u5316\u7684\u7b97\u6cd5\u5c31\u5f88\u591a\u4e86\uff0c\u6211\u4eec\u7684\u4e16\u754c\u662f\u6709\u5149\u6e90\u548c\u6811\u6728\u7684\u6295\u5f71\u7684\uff0c\u53e6\u5916\u8ba1\u7b97\u901f\u5ea6\u8981\u5feb\uff0c\u6240\u4ee5\u6392\u9664",(0,r.jsx)(e.code,{children:"\u56fa\u5b9a\u9608\u503c\u6cd5"}),"\u3001",(0,r.jsx)(e.code,{children:"Otsu's \u65b9\u6cd5"}),"\u3001",(0,r.jsx)(e.code,{children:"\u81ea\u9002\u5e94\u9ad8\u65af\u6cd5"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u91cc",(0,r.jsx)(e.code,{children:"\u5168\u5c40\u5e73\u5747\u503c\u6cd5"}),"\u3001",(0,r.jsx)(e.code,{children:"\u81ea\u9002\u5e94\u5747\u503c\u6cd5"}),"\u548c\u6211\u4eec\u53ef\u4ee5\u90fd\u5199\u51fa\u6765\uff0c\u540e\u9762\u770b\u60c5\u51b5\u9009\u62e9\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:"\ndef preprocess_and_binarize(bgr_image, method='mean', **kwargs):\n    \"\"\"\u5b8c\u6574\u7684\u9884\u5904\u7406\u548c\u4e8c\u503c\u5316\u6d41\u7a0b\n\n    invert: \u662f\u5426\u53cd\u5411\u4e8c\u503c\u5316\uff08True=\u4f4e\u4e8e\u9608\u503c\u53d8\u767d\uff0cFalse=\u9ad8\u4e8e\u9608\u503c\u53d8\u767d\uff09\n    \n    Args:\n        bgr_image: \u8f93\u5165\u7684BGR\u5f69\u8272\u56fe\u50cf\n        method: \u4e8c\u503c\u5316\u65b9\u6cd5\uff0c\u53ef\u9009 'mean', 'adaptive'\n        **kwargs: \u5404\u65b9\u6cd5\u7684\u989d\u5916\u53c2\u6570\n            - invert: \u662f\u5426\u53cd\u5411\u4e8c\u503c\u5316\n            - block_size: \u81ea\u9002\u5e94\u65b9\u6cd5\u7684\u90bb\u57df\u5927\u5c0f\n            - C: \u81ea\u9002\u5e94\u65b9\u6cd5\u7684\u5e38\u6570\u504f\u79fb\n        \n    Returns:\n        binary_image: \u4e8c\u503c\u5316\u7ed3\u679c\n    \"\"\"\n    # Step 1: \u7070\u5ea6\u5316\n    gray_image = cv2.cvtColor(bgr_image, cv2.COLOR_BGR2GRAY)\n\n    # Step 2: \u6839\u636e\u9009\u62e9\u7684\u65b9\u6cd5\u8fdb\u884c\u4e8c\u503c\u5316\n    invert = kwargs.get('invert', False)\n    \n    if method == 'adaptive':\n        # \u9009\u62e9\u4e8c\u503c\u5316\u7c7b\u578b\n        thresh_type = cv2.THRESH_BINARY_INV if invert else cv2.THRESH_BINARY\n        \n        # \u81ea\u9002\u5e94\u5747\u503c\u6cd5\uff1a\u6bcf\u4e2a\u50cf\u7d20\u7684\u9608\u503c\u7531\u5176\u90bb\u57df\u7684\u5747\u503c\u51b3\u5b9a\n        binary_image = cv2.adaptiveThreshold(\n            gray_image,\n            255,                            # \u6700\u5927\u503c\n            cv2.ADAPTIVE_THRESH_MEAN_C,     # \u4f7f\u7528\u90bb\u57df\u5747\u503c\n            thresh_type,                    # \u4e8c\u503c\u5316\u7c7b\u578b\uff08\u6b63\u5411\u6216\u53cd\u5411\uff09\n            11,                             # \u90bb\u57df\u5927\u5c0f\uff08\u5fc5\u987b\u662f\u5947\u6570\uff09\uff0c\u8d8a\u5927\u5bf9\u5149\u7167\u53d8\u5316\u8d8a\u4e0d\u654f\u611f\n            2                               # \u5e38\u6570\u504f\u79fb\u4ece\u5747\u503c\u4e2d\u51cf\u53bb\u7684\u5e38\u6570\uff0c\u7528\u4e8e\u5fae\u8c03\u9608\u503c\n        )\n    elif method == 'mean':\n        thresh_type = cv2.THRESH_BINARY_INV if invert else cv2.THRESH_BINARY\n        _, binary_image = cv2.threshold(gray_image, gray_image.mean(), 255, thresh_type)\n    else:\n        raise ValueError(f\"\u672a\u77e5\u7684\u4e8c\u503c\u5316\u65b9\u6cd5: {method}\")\n    \n    return binary_image\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u53bb\u566a",children:"\u53bb\u566a"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e2a\u9879\u76ee\u4e2d\u90fd\u662f\u7eaf\u8272\uff0c\u53ea\u6709\u6591\u9a6c\u7ebf\u9644\u8fd1\u6709\u5f02\u5e38\u8272\u5757\u3002\u8003\u8651\u5230\u5b9e\u9645\u6444\u50cf\u5934\u4f1a\u6709\u566a\u70b9\u3002\u505a\u4e2a\u7b80\u5355\u7684\u5f00\u8fd0\u7b97\uff08\u5148\u8150\u8680\u540e\u81a8\u80c0\uff0c\u7528\u4e8e\u53bb\u9664\u56fe\u50cf\u4e2d\u7684\u5c0f\u566a\u58f0\uff09"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'def denoise_binary_image(binary_image, kernel_size=(5, 5)):\n    """\u4f7f\u7528\u5f62\u6001\u5b66\u5f00\u8fd0\u7b97\u53bb\u9664\u4e8c\u503c\u56fe\u50cf\u4e2d\u7684\u566a\u58f0\n    \n    Args:\n        binary_image: \u8f93\u5165\u7684\u4e8c\u503c\u5316\u56fe\u50cf\uff080\u6216255\uff09\n        kernel_size: \u7ed3\u6784\u5143\u7d20\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a(5, 5)\n        \n    Returns:\n        denoised_image: \u53bb\u566a\u540e\u7684\u4e8c\u503c\u56fe\u50cf\n    """\n    # \u521b\u5efa\u7ed3\u6784\u5143\u7d20\uff08\u77e9\u5f62\u6838\uff09\n    kernel = cv2.getStructuringElement(cv2.MORPH_RECT, kernel_size)\n    \n    # \u5f00\u8fd0\u7b97 = \u5148\u8150\u8680\u540e\u81a8\u80c0\n    # \u4f5c\u7528\uff1a\u53bb\u9664\u5c0f\u7684\u767d\u8272\u566a\u70b9\uff08\u5b64\u7acb\u7684\u4eae\u70b9\uff09\n    denoised_image = cv2.morphologyEx(binary_image, cv2.MORPH_OPEN, kernel)\n    \n    return denoised_image\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u53ef\u89c6\u5316",children:"\u53ef\u89c6\u5316"}),"\n",(0,r.jsx)(e.p,{children:"\u9884\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u53ef\u89c6\u5316\u5c55\u793a\u4e86\uff0c\u8fd9\u91cc\u6211\u89c9\u5f97\u53ef\u4ee5\u5c55\u793a\u611f\u5174\u8da3\u7684\u539f\u56fe\u3001\u53bb\u566a\u540e\u7684\u56fe\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'def visualize_preprocessing(roi_image, binary_image):\n    """\u53ef\u89c6\u5316\u9884\u5904\u7406\u7684\u5404\u4e2a\u9636\u6bb5\n    \n    Args:\n        roi_image: \u611f\u5174\u8da3\u533a\u57df\u7684\u539f\u56fe\uff08ROI\uff09\n        denoised_image: \u53bb\u566a\u540e\u7684\u4e8c\u503c\u5316\u56fe\u50cf\n    """\n    # \u663e\u793aROI\u533a\u57df\u539f\u56fe\n    cv2.imshow(\'ROI\', roi_image)\n    \n    # \u663e\u793a\u53bb\u566a\u540e\u7684\u7ed3\u679c\n    cv2.imshow(\'ROI-II\', binary_image)\n    \n    cv2.waitKey(1)\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u8fd0\u52a8\u7b97\u6cd5\u8bbe\u8ba1",children:"\u8fd0\u52a8\u7b97\u6cd5\u8bbe\u8ba1"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u91cc\u6211\u5b66\u4e60CV\u7684\u65f6\u5019\u5b66\u4e60\u4e86\u8fb9\u7f18\u68c0\u6d4b\u3001\u8f6e\u5ed3\u68c0\u6d4b\u3001\u5149\u6d41\u6cd5\u3002\u6211\u81ea\u5df1\u53ef\u4ee5\u60f3\u5230\u76f4\u63a5\u8ba1\u7b97\u8f66\u9053\u50cf\u7d20\u4e2d\u5fc3\u3001\u50cf\u7d20\u9010\u884c\u626b\u63cf\u3002"}),"\n",(0,r.jsx)(e.p,{children:"Opencv\u7684\u7b97\u6cd5API\u6709\u6210\u767e\u4e0a\u5343\u79cd\uff08\u6ca1\u5f00\u73a9\u7b11\uff09\uff0c\u8fd9\u91cc\u6211\u8bb0\u4f4f\u4e86\u5e38\u89c1\u573a\u666f\u7684\u4e3b\u6d41\u7b97\u6cd5\u3002"}),"\n",(0,r.jsx)(e.p,{children:'\u4e4b\u524d\u6211\u4eec\u5e38\u8bf4:"talk is cheap , show me your code."'}),"\n",(0,r.jsx)(e.p,{children:"\u73b0\u5728AI\u65f6\u4ee3\uff0c\u4eba\u4eba\u90fd\u80fd\u5199\u4ee3\u7801\uff0c\u5199\u597d\u63d0\u793a\u8bcd\u53d8\u5f97\u66f4\u91cd\u8981\u4e86\uff0c\u6240\u4ee5\u662f\uff1a\u201ccode is cheap ,show me your talk.\u201d"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u91cc\u662f\u6211\u7ed9AI\u7684\u63d0\u793a\u8bcd\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5934\u8111\u98ce\u66b4\u4e00\u4e0b\u8f66\u9053\u7ebf\u8ddf\u968f\u7b97\u6cd5\uff0c\u9002\u5408\u5f2f\u9053\u8f83\u591a\uff0c\u6709\u6591\u9a6c\u7ebf\u7684\u3002\u7b80\u5355\u5217\u51fa\u539f\u7406\u3001\u4f18\u7f3a\u70b9\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u4ee5\u4e0b\u662fClaude-4.5-sonnet\u7684\u7b54\u6848\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",metastring:"showLineNumbers",children:"\n### \ud83c\udfaf \u9002\u5408\u5f2f\u9053\u591a+\u6591\u9a6c\u7ebf\u573a\u666f\u7684\u7b97\u6cd5\uff08\u6309\u63a8\u8350\u5ea6\u6392\u5e8f\uff09\n\n**\u2b50\u2b50\u2b50 \u63a8\u8350\u65b9\u68481\uff1a\u6ed1\u52a8\u7a97\u53e3\u6cd5 + \u591a\u9879\u5f0f\u62df\u5408**\n- **\u539f\u7406**\uff1a\u4ece\u56fe\u50cf\u5e95\u90e8\u5f00\u59cb\uff0c\u7528\u5c0f\u7a97\u53e3\u9010\u5c42\u5411\u4e0a\u641c\u7d22\u9ed1\u8272\u50cf\u7d20 \u2192 \u8bb0\u5f55\u7a97\u53e3\u4e2d\u5fc3 \u2192 \u7528\u4e8c\u6b21/\u4e09\u6b21\u591a\u9879\u5f0f\u62df\u5408\u66f2\u7ebf\n- **\u4f18\u70b9**\uff1a\n  - \u2705 \u5bf9\u5f2f\u9053\u9002\u5e94\u6027\u6781\u597d\uff08\u591a\u9879\u5f0f\u5929\u7136\u652f\u6301\u66f2\u7ebf\uff09\n  - \u2705 \u5bf9\u6591\u9a6c\u7ebf\u6709\u5f88\u5f3a\u6297\u5e72\u6270\u6027\uff08\u9010\u5c42\u641c\u7d22\uff0c\u5c40\u90e8\u5f02\u5e38\u4e0d\u5f71\u54cd\u6574\u4f53\uff09\n  - \u2705 \u53ef\u4ee5\u5904\u7406\u8f66\u9053\u7ebf\u65ad\u88c2\n  - \u2705 \u4e1a\u754c\u6210\u719f\u65b9\u6848\uff08\u81ea\u52a8\u9a7e\u9a76\u5e38\u7528\uff09\n- **\u7f3a\u70b9**\uff1a\n  - \u274c \u5b9e\u73b0\u590d\u6742\u5ea6\u8f83\u9ad8\n  - \u274c \u8ba1\u7b97\u91cf\u5927\uff08\u9700\u8981\u591a\u4e2a\u7a97\u53e3\u8fed\u4ee3\uff09\n- **\u9002\u7528\u573a\u666f**\uff1a\u590d\u6742\u73af\u5883\u3001\u5f2f\u9053\u3001\u906e\u6321\u3001\u6591\u9a6c\u7ebf\n\n---\n\n**\u2b50\u2b50\u2b50 \u63a8\u8350\u65b9\u68482\uff1a\u50cf\u7d20\u5217\u626b\u63cf\u6cd5 + \u8fb9\u754c\u8ffd\u8e2a**\n- **\u539f\u7406**\uff1a\u9010\u5217\u626b\u63cf\u56fe\u50cf \u2192 \u7edf\u8ba1\u6bcf\u5217\u7684\u9ed1\u8272\u50cf\u7d20\u5206\u5e03 \u2192 \u8bc6\u522b\u5de6\u53f3\u8fb9\u754c \u2192 \u8ba1\u7b97\u4e2d\u5fc3\u7ebf \u2192 \u8fc7\u6ee4\u5f02\u5e38\u5217\uff08\u6591\u9a6c\u7ebf\uff09\n- **\u4f18\u70b9**\uff1a\n  - \u2705 \u5b9e\u73b0\u7b80\u5355\uff0c\u8ba1\u7b97\u91cf\u9002\u4e2d\n  - \u2705 \u5bf9\u5f2f\u9053\u9002\u5e94\u597d\uff08\u6bcf\u5217\u72ec\u7acb\u5904\u7406\uff09\n  - \u2705 \u53ef\u4ee5\u68c0\u6d4b\u8f66\u9053\u5bbd\u5ea6\u53d8\u5316\n  - \u2705 \u5bb9\u6613\u8fc7\u6ee4\u6591\u9a6c\u7ebf\uff08\u901a\u8fc7\u8fde\u7eed\u6027\u68c0\u67e5\uff09\n- **\u7f3a\u70b9**\uff1a\n  - \u274c \u9700\u8981\u5047\u8bbe\u8f66\u9053\u5728\u89c6\u91ce\u4e2d\n  - \u274c \u5bf9\u566a\u58f0\u654f\u611f\uff08\u9700\u8981\u5e73\u6ed1\u5904\u7406\uff09\n- **\u9002\u7528\u573a\u666f**\uff1a\u4e2d\u7b49\u590d\u6742\u5ea6\uff0c\u5bf9\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\n\n---\n\n**\u2b50\u2b50 \u63a8\u8350\u65b9\u68483\uff1a\u76f4\u65b9\u56fe\u6295\u5f71\u6cd5 + \u5cf0\u503c\u8ffd\u8e2a**\n- **\u539f\u7406**\uff1a\u5782\u76f4\u6295\u5f71ROI \u2192 \u627e\u5230\u5de6\u53f3\u8f66\u9053\u7684\u53cc\u5cf0 \u2192 \u9010\u5c42\u5411\u4e0a\u8ffd\u8e2a\u5cf0\u503c\u79fb\u52a8 \u2192 \u62df\u5408\u66f2\u7ebf\n- **\u4f18\u70b9**\uff1a\n  - \u2705 \u5bf9\u5149\u7167\u4e0d\u654f\u611f\n  - \u2705 \u53ef\u4ee5\u660e\u786e\u533a\u5206\u5de6\u53f3\u8f66\u9053\n  - \u2705 \u6591\u9a6c\u7ebf\u5728\u5782\u76f4\u6295\u5f71\u4e2d\u5bb9\u6613\u8bc6\u522b\uff08\u6a2a\u5411\u7279\u5f81\uff09\n  - \u2705 \u8ba1\u7b97\u6548\u7387\u9ad8\n- **\u7f3a\u70b9**\uff1a\n  - \u274c \u6025\u5f2f\u65f6\u5de6\u53f3\u8f66\u9053\u53ef\u80fd\u91cd\u53e0\uff0c\u5cf0\u503c\u4e0d\u660e\u663e\n  - \u274c \u9700\u8981\u8f66\u9053\u76f8\u5bf9\u5bf9\u79f0\n- **\u9002\u7528\u573a\u666f**\uff1a\u8f66\u9053\u6e05\u6670\u3001\u5bf9\u79f0\u6027\u597d\u3001\u4e2d\u7b49\u5f2f\u9053\n\n---\n\n**\u2b50\u2b50 \u63a8\u8350\u65b9\u68484\uff1a\u5206\u533a\u57df\u91cd\u5fc3\u6cd5 + \u8f68\u8ff9\u8fde\u63a5**\n- **\u539f\u7406**\uff1a\u5c06ROI\u5206\u6210\u591a\u4e2a\u6c34\u5e73\u5e26 \u2192 \u6bcf\u4e2a\u5e26\u8ba1\u7b97\u9ed1\u8272\u50cf\u7d20\u91cd\u5fc3 \u2192 \u8fde\u63a5\u5404\u5e26\u91cd\u5fc3\u5f62\u6210\u8f68\u8ff9 \u2192 \u8fc7\u6ee4\u5f02\u5e38\u70b9\uff08\u6591\u9a6c\u7ebf\uff09\n- **\u4f18\u70b9**\uff1a\n  - \u2705 \u5bf9\u5f2f\u9053\u9002\u5e94\u597d\uff08\u5206\u6bb5\u5904\u7406\uff09\n  - \u2705 \u5b9e\u73b0\u7b80\u5355\uff0c\u662f\u91cd\u5fc3\u6cd5\u7684\u6539\u8fdb\u7248\n  - \u2705 \u53ef\u4ee5\u68c0\u6d4b\u5c40\u90e8\u5f02\u5e38\uff08\u6591\u9a6c\u7ebf\u5bfc\u81f4\u7684\u91cd\u5fc3\u8df3\u53d8\uff09\n  - \u2705 \u8ba1\u7b97\u91cf\u5c0f\n- **\u4f18\u70b9**\uff1a\n  - \u274c \u4ecd\u7136\u5bf9\u566a\u58f0\u654f\u611f\n  - \u274c \u9700\u8981\u8bbe\u8ba1\u5f02\u5e38\u70b9\u8fc7\u6ee4\u89c4\u5219\n- **\u9002\u7528\u573a\u666f**\uff1a\u8d44\u6e90\u53d7\u9650\u3001\u9700\u8981\u5feb\u901f\u539f\u578b\n\n---\n\n**\u2b50 \u63a8\u8350\u65b9\u68485\uff1a\u8fb9\u7f18\u68c0\u6d4b + \u5206\u6bb5\u970d\u592b\u53d8\u6362**\n- **\u539f\u7406**\uff1aCanny\u8fb9\u7f18\u68c0\u6d4b \u2192 \u5c06ROI\u5206\u6210\u591a\u6bb5 \u2192 \u6bcf\u6bb5\u72ec\u7acb\u505a\u970d\u592b\u76f4\u7ebf\u68c0\u6d4b \u2192 \u8fde\u63a5\u76f4\u7ebf\u6bb5\u8fd1\u4f3c\u66f2\u7ebf \u2192 \u8fc7\u6ee4\u6591\u9a6c\u7ebf\uff08\u6a2a\u5411\u7ebf\uff09\n- **\u4f18\u70b9**\uff1a\n  - \u2705 \u7ecf\u5178\u65b9\u6cd5\uff0c\u9c81\u68d2\u6027\u597d\n  - \u2705 \u53ef\u4ee5\u7528\u7ebf\u6bb5\u65b9\u5411\u8fc7\u6ee4\u6591\u9a6c\u7ebf\uff08\u6a2a\u5411vs\u7eb5\u5411\uff09\n  - \u2705 \u5206\u6bb5\u5904\u7406\u53ef\u9002\u5e94\u5f2f\u9053\n- **\u7f3a\u70b9**\uff1a\n  - \u274c \u53c2\u6570\u8c03\u8282\u590d\u6742\n  - \u274c \u8ba1\u7b97\u91cf\u5927\n  - \u274c \u5bf9\u65ad\u88c2\u8f66\u9053\u7ebf\u5904\u7406\u56f0\u96be\n- **\u9002\u7528\u573a\u666f**\uff1a\u8f66\u9053\u7ebf\u6e05\u6670\u3001\u5bf9\u51c6\u786e\u5ea6\u8981\u6c42\u9ad8\n\n---\n\n**\u2b50 \u63a8\u8350\u65b9\u68486\uff1a\u5f62\u6001\u5b66\u9aa8\u67b6\u63d0\u53d6 + \u4e2d\u8f74\u7ebf\u8ffd\u8e2a**\n- **\u539f\u7406**\uff1a\u4e8c\u503c\u5316 \u2192 \u5f62\u6001\u5b66\u7ec6\u5316\uff08skeletonization\uff09 \u2192 \u63d0\u53d6\u9ed1\u8272\u533a\u57df\u7684\u4e2d\u8f74\u7ebf \u2192 \u8ffd\u8e2a\u4e2d\u8f74\u7ebf\n- **\u4f18\u70b9**\uff1a\n  - \u2705 \u76f4\u63a5\u5f97\u5230\u8f66\u9053\u4e2d\u5fc3\uff0c\u65e0\u9700\u8ba1\u7b97\n  - \u2705 \u5bf9\u5f2f\u9053\u81ea\u7136\u9002\u5e94\n  - \u2705 \u6591\u9a6c\u7ebf\u4f1a\u88ab\u7ec6\u5316\u4f46\u4e0d\u5f71\u54cd\u4e3b\u8def\u5f84\n- **\u7f3a\u70b9**\uff1a\n  - \u274c \u7ec6\u5316\u7b97\u6cd5\u8ba1\u7b97\u91cf\u5927\n  - \u274c \u5bf9\u65ad\u88c2\u654f\u611f\n  - \u274c \u53ef\u80fd\u4ea7\u751f\u5206\u652f\uff08\u9700\u8981\u540e\u5904\u7406\uff09\n- **\u9002\u7528\u573a\u666f**\uff1a\u8f66\u9053\u8fde\u7eed\u3001\u5f62\u72b6\u590d\u6742\n\n---\n\n### \ud83d\udd25 \u9488\u5bf9\u4f60\u7684\u573a\u666f\uff08\u5f2f\u9053\u591a+\u6591\u9a6c\u7ebf\uff09\u6700\u4f73\u7ec4\u5408\u65b9\u6848\n\n**\u65b9\u6848A\uff1a\u6ed1\u52a8\u7a97\u53e3\u6cd5\uff08\u6700\u4f18\u6548\u679c\uff09**\n\n\u4e8c\u503c\u5316 \u2192 \u53bb\u566a \u2192 \u4ece\u5e95\u90e8\u5f00\u59cb\u6ed1\u52a8\u7a97\u53e3 \u2192 \n\u9010\u5c42\u627e\u8f66\u9053\u50cf\u7d20 \u2192 \u591a\u9879\u5f0f\u62df\u5408 \u2192 \n\u9009\u53d6\u524d\u89c6\u70b9 \u2192 Pure Pursuit\u63a7\u5236\n\n\n**\u65b9\u6848B\uff1a\u5206\u533a\u57df\u91cd\u5fc3\u6cd5\uff08\u5e73\u8861\u65b9\u6848\uff09** \u2b50 \u63a8\u8350\u5feb\u901f\u5b9e\u73b0\n\n\u4e8c\u503c\u5316 \u2192 \u53bb\u566a \u2192 ROI\u5206\u62105-10\u4e2a\u6c34\u5e73\u5e26 \u2192 \n\u6bcf\u5e26\u8ba1\u7b97\u91cd\u5fc3 \u2192 \u8fc7\u6ee4\u5f02\u5e38\u70b9\uff08\u6591\u9a6c\u7ebf\uff09 \u2192 \n\u62df\u5408\u5e73\u6ed1\u66f2\u7ebf \u2192 \u8ddf\u968f\u4e2d\u5fc3\u70b9\n\n**\u65b9\u6848C\uff1a\u50cf\u7d20\u5217\u626b\u63cf\u6cd5\uff08\u5b9e\u65f6\u6027\u5f3a\uff09**\n\n\u4e8c\u503c\u5316 \u2192 \u53bb\u566a \u2192 \u9010\u5217\u626b\u63cf \u2192 \n\u627e\u5de6\u53f3\u8fb9\u754c \u2192 \u8fde\u7eed\u6027\u68c0\u67e5\u8fc7\u6ee4\u6591\u9a6c\u7ebf \u2192 \n\u8ba1\u7b97\u4e2d\u5fc3 \u2192 \u63a7\u5236\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u4ee5\u4e0a\u65b9\u6cd5\u90fd\u4e0d\u5408\u9002\uff0c\u53ef\u4ee5\u9009\u62e9\u5bfb\u627e\u65b0\u7684\u7b97\u6cd5\u548c\u7b97\u6cd5\u8c03\u53c2\u3002\u73b0\u5728\u7684\u76ee\u7684\u662f\u9a8c\u8bc1\u65b9\u6848\u662f\u5426\u53ef\u884c\uff0c\u53ea\u6709\u5927\u81f4\u53ef\u7528\u6211\u4eec\u624d\u8fdb\u4e00\u6b65\u8ffd\u6c42\u7406\u89e3\u8fd9\u4e2a\u4ee3\u7801\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u63a5\u7740\u8f93\u5165\u63d0\u793a\u8bcd\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5e2e\u6211\u5b9e\u73b0\uff1a\u6ed1\u52a8\u7a97\u53e3\u6cd5 + \u591a\u9879\u5f0f\u62df\u5408\u3002\u8981\u6c42\uff1a\u51fd\u6570\u5f0f\u7f16\u7a0b\uff0c\u6dfb\u52a0function docstring\uff0c\u65e0\u9700\u9010\u884c\u6ce8\u91ca\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import Image\nfrom cv_bridge import CvBridge\nimport cv2\nimport numpy as np\nfrom geometry_msgs.msg import Twist\n\ndef extract_roi(image ,roi_start_ratio=0.5):\n    """\u63d0\u53d6\u611f\u5174\u8da3\u533a\u57df\uff08ROI\uff09\n    \n    Args:\n        image: \u8f93\u5165\u7684BGR\u56fe\u50cf\n        roi_start_ratio: \u611f\u5174\u8da3\u533a\u57df\u3002\uff080\u8868\u793a\u6574\u5f20\u90fd\u611f\u5174\u8da3\u30010.5\u8868\u793a\u4e0b\u534a\u90e8\u5206\u611f\u5174\u8da3\uff09\n        \n    Returns:\n        roi_image: ROI\u533a\u57df\u56fe\u50cf\n    """\n    # \u83b7\u53d6\u56fe\u50cf\u5c3a\u5bf8\n    height, width = image.shape[:2]\n    \n    # \u8ba1\u7b97ROI\u8d77\u59cb\u884c\uff08\u4ece\u56fe\u50cf\u4e2d\u90e8\u5f00\u59cb\uff0c\u5173\u6ce8\u524d\u65b9\u5730\u9762\uff09\n    roi_start = int(height * roi_start_ratio)\n    \n    # \u63d0\u53d6ROI\u533a\u57df\uff08\u56fe\u50cf\u4e0b\u534a\u90e8\u5206\uff09\n    roi_image = image[roi_start:height, 0:width]\n    \n    return roi_image\n\ndef preprocess_and_binarize(bgr_image, method ,invert):\n    """\u5b8c\u6574\u7684\u9884\u5904\u7406\u548c\u4e8c\u503c\u5316\u6d41\u7a0b\n\n    otsu\u65b9\u6cd5\u4f1a\u81ea\u52a8\u8ba1\u7b97\u6700\u4f73\u9608\u503c\uff0c\u9002\u5408\u53cc\u5cf0\u5206\u5e03\u7684\u56fe\u50cf\uff08\u5982\u9ed1\u8272\u8f66\u9053+\u7070\u8272\u5730\u9762\uff09\n\n    adaptive\u81ea\u9002\u5e94\u5747\u503c\u6cd5\u9002\u5e94\u5c40\u90e8\u5149\u7167\u53d8\u5316\uff0c\u9002\u5408\u6709\u9634\u5f71\u548c\u5149\u7167\u4e0d\u5747\u7684\u573a\u666f\n\n    invert: \u662f\u5426\u53cd\u5411\u4e8c\u503c\u5316\uff08True=\u4f4e\u4e8e\u9608\u503c\u53d8\u767d\uff0cFalse=\u9ad8\u4e8e\u9608\u503c\u53d8\u767d\uff09\n    \n    Args:\n        bgr_image: \u8f93\u5165\u7684BGR\u5f69\u8272\u56fe\u50cf\n        method: \u4e8c\u503c\u5316\u65b9\u6cd5\uff0c\u53ef\u9009 \'mean\', \'adaptive\'\n        **kwargs: \u5404\u65b9\u6cd5\u7684\u989d\u5916\u53c2\u6570\n            - invert: \u662f\u5426\u53cd\u5411\u4e8c\u503c\u5316\n            - block_size: \u81ea\u9002\u5e94\u65b9\u6cd5\u7684\u90bb\u57df\u5927\u5c0f\n            - C: \u81ea\u9002\u5e94\u65b9\u6cd5\u7684\u5e38\u6570\u504f\u79fb\n        \n    Returns:\n        binary_image: \u4e8c\u503c\u5316\u7ed3\u679c\n    """\n    # \u7070\u5ea6\u5316\n    gray_image = cv2.cvtColor(bgr_image, cv2.COLOR_BGR2GRAY)\n\n    \n    if method == \'adaptive\':\n        # \u9009\u62e9\u4e8c\u503c\u5316\u7c7b\u578b\n        thresh_type = cv2.THRESH_BINARY_INV if invert else cv2.THRESH_BINARY\n        \n        # \u81ea\u9002\u5e94\u5747\u503c\u6cd5\uff1a\u6bcf\u4e2a\u50cf\u7d20\u7684\u9608\u503c\u7531\u5176\u90bb\u57df\u7684\u5747\u503c\u51b3\u5b9a\n        binary_image = cv2.adaptiveThreshold(\n            gray_image,\n            255,                            # \u6700\u5927\u503c\n            cv2.ADAPTIVE_THRESH_MEAN_C,     # \u4f7f\u7528\u90bb\u57df\u5747\u503c\n            thresh_type,                    # \u4e8c\u503c\u5316\u7c7b\u578b\uff08\u6b63\u5411\u6216\u53cd\u5411\uff09\n            11,                             # \u90bb\u57df\u5927\u5c0f\uff08\u5fc5\u987b\u662f\u5947\u6570\uff09\uff0c\u8d8a\u5927\u5bf9\u5149\u7167\u53d8\u5316\u8d8a\u4e0d\u654f\u611f\n            2                               # \u5e38\u6570\u504f\u79fb\u4ece\u5747\u503c\u4e2d\u51cf\u53bb\u7684\u5e38\u6570\uff0c\u7528\u4e8e\u5fae\u8c03\u9608\u503c\n        )\n    elif method == \'mean\':\n        thresh_type = cv2.THRESH_BINARY_INV if invert else cv2.THRESH_BINARY\n        _, binary_image = cv2.threshold(gray_image, gray_image.mean(), 255, thresh_type)\n    else:\n        raise ValueError(f"\u672a\u77e5\u7684\u4e8c\u503c\u5316\u65b9\u6cd5: {method}")\n    \n    return binary_image\n\ndef denoise_binary_image(binary_image, kernel_size=(5, 5)):\n    """\u4f7f\u7528\u5f62\u6001\u5b66\u5f00\u8fd0\u7b97\u53bb\u9664\u4e8c\u503c\u56fe\u50cf\u4e2d\u7684\u566a\u58f0\n    \n    Args:\n        binary_image: \u8f93\u5165\u7684\u4e8c\u503c\u5316\u56fe\u50cf\uff080\u6216255\uff09\n        kernel_size: \u7ed3\u6784\u5143\u7d20\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a(5, 5)\n        \n    Returns:\n        denoised_image: \u53bb\u566a\u540e\u7684\u4e8c\u503c\u56fe\u50cf\n    """\n    # \u521b\u5efa\u7ed3\u6784\u5143\u7d20\uff08\u77e9\u5f62\u6838\uff09\n    kernel = cv2.getStructuringElement(cv2.MORPH_RECT, kernel_size)\n    \n    # \u5f00\u8fd0\u7b97 = \u5148\u8150\u8680\u540e\u81a8\u80c0\n    # \u4f5c\u7528\uff1a\u53bb\u9664\u5c0f\u7684\u767d\u8272\u566a\u70b9\uff08\u5b64\u7acb\u7684\u4eae\u70b9\uff09\n    denoised_image = cv2.morphologyEx(binary_image, cv2.MORPH_OPEN, kernel)\n    \n    return denoised_image\n\ndef visualize_preprocessing(roi_image, binary_image):\n    """\u53ef\u89c6\u5316\u9884\u5904\u7406\u7684\u5404\u4e2a\u9636\u6bb5\n    \n    Args:\n        roi_image: \u611f\u5174\u8da3\u533a\u57df\u7684\u539f\u56fe\uff08ROI\uff09\n        denoised_image: \u53bb\u566a\u540e\u7684\u4e8c\u503c\u5316\u56fe\u50cf\n    """\n    cv2.imshow(\'ROI\', roi_image)\n    cv2.imshow(\'ROI-II\', binary_image)\n    cv2.waitKey(1)\n\n\ndef find_lane_base_positions(binary_image, n_windows=9, edge_detection=True):\n    """\u901a\u8fc7\u76f4\u65b9\u56fe\u627e\u5230\u5de6\u53f3\u8f66\u9053\u7ebf\u7684\u8d77\u59cb\u4f4d\u7f6e\n    \n    Args:\n        binary_image: \u4e8c\u503c\u5316\u56fe\u50cf\uff08\u767d\u8272\u4e3a\u8f66\u9053\u7ebf\uff09\n        n_windows: \u6ed1\u52a8\u7a97\u53e3\u6570\u91cf\n        edge_detection: \u662f\u5426\u68c0\u6d4b\u8fb9\u7f18\u6a21\u5f0f\uff08\u9002\u5408\u5bbd\u9053\u8def\uff09\n        \n    Returns:\n        left_base: \u5de6\u8f66\u9053\u7ebf\u8d77\u59cbx\u5750\u6807\uff08None\u8868\u793a\u672a\u68c0\u6d4b\u5230\uff09\n        right_base: \u53f3\u8f66\u9053\u7ebf\u8d77\u59cbx\u5750\u6807\uff08None\u8868\u793a\u672a\u68c0\u6d4b\u5230\uff09\n    """\n    histogram = np.sum(binary_image[binary_image.shape[0]//2:, :], axis=0)\n    midpoint = histogram.shape[0] // 2\n    \n    if edge_detection:\n        threshold = np.max(histogram) * 0.3\n        white_pixels = np.where(histogram > threshold)[0]\n        \n        if len(white_pixels) == 0:\n            return None, None\n        \n        left_candidates = white_pixels[white_pixels < midpoint]\n        right_candidates = white_pixels[white_pixels >= midpoint]\n        \n        left_base = np.min(left_candidates) if len(left_candidates) > 0 else None\n        right_base = np.max(right_candidates) if len(right_candidates) > 0 else None\n    else:\n        left_half = histogram[:midpoint]\n        right_half = histogram[midpoint:]\n        \n        left_base = np.argmax(left_half) if np.max(left_half) > 0 else None\n        right_base = np.argmax(right_half) + midpoint if np.max(right_half) > 0 else None\n    \n    return left_base, right_base\n\n\ndef detect_road_edges(binary_image):\n    """\u68c0\u6d4b\u5bbd\u9053\u8def\u7684\u5de6\u53f3\u8fb9\u7f18\n    \n    Args:\n        binary_image: \u4e8c\u503c\u5316\u56fe\u50cf\uff08\u767d\u8272\u4e3a\u9053\u8def\uff09\n        \n    Returns:\n        left_edge_x: \u5de6\u8fb9\u7f18x\u5750\u6807\u6570\u7ec4\n        left_edge_y: \u5de6\u8fb9\u7f18y\u5750\u6807\u6570\u7ec4\n        right_edge_x: \u53f3\u8fb9\u7f18x\u5750\u6807\u6570\u7ec4\n        right_edge_y: \u53f3\u8fb9\u7f18y\u5750\u6807\u6570\u7ec4\n    """\n    height, width = binary_image.shape\n    left_edge_x, left_edge_y = [], []\n    right_edge_x, right_edge_y = [], []\n    \n    for y in range(height):\n        row = binary_image[y, :]\n        white_pixels = np.where(row > 127)[0]\n        \n        if len(white_pixels) > 10:\n            left_edge_x.append(white_pixels[0])\n            left_edge_y.append(y)\n            right_edge_x.append(white_pixels[-1])\n            right_edge_y.append(y)\n    \n    return (np.array(left_edge_x), np.array(left_edge_y)), (np.array(right_edge_x), np.array(right_edge_y))\n\n\ndef sliding_window_detection(binary_image, n_windows=9, margin=80, min_pixels=50):\n    """\u4f7f\u7528\u6ed1\u52a8\u7a97\u53e3\u6cd5\u68c0\u6d4b\u8f66\u9053\u7ebf\u50cf\u7d20\n    \n    Args:\n        binary_image: \u4e8c\u503c\u5316\u56fe\u50cf\uff08\u767d\u8272\u4e3a\u8f66\u9053\u7ebf\uff0c0\u6216255\uff09\n        n_windows: \u6ed1\u52a8\u7a97\u53e3\u6570\u91cf\n        margin: \u7a97\u53e3\u5bbd\u5ea6\u7684\u4e00\u534a\uff08\u50cf\u7d20\uff09\n        min_pixels: \u91cd\u65b0\u5b9a\u4f4d\u7a97\u53e3\u6240\u9700\u7684\u6700\u5c0f\u50cf\u7d20\u6570\n        \n    Returns:\n        left_lane_pixels: \u5de6\u8f66\u9053\u7ebf\u50cf\u7d20\u5750\u6807 (x_coords, y_coords)\uff0c\u672a\u68c0\u6d4b\u5230\u5219\u4e3a ([], [])\n        right_lane_pixels: \u53f3\u8f66\u9053\u7ebf\u50cf\u7d20\u5750\u6807 (x_coords, y_coords)\uff0c\u672a\u68c0\u6d4b\u5230\u5219\u4e3a ([], [])\n        window_info: \u7a97\u53e3\u4fe1\u606f\u5217\u8868\uff0c\u7528\u4e8e\u53ef\u89c6\u5316 [(x_center, y_center, width, height), ...]\n    """\n    height, width = binary_image.shape\n    window_height = height // n_windows\n    \n    nonzero = binary_image.nonzero()\n    nonzero_y = np.array(nonzero[0])\n    nonzero_x = np.array(nonzero[1])\n    \n    left_base, right_base = find_lane_base_positions(binary_image, n_windows, edge_detection=True)\n    \n    left_current = left_base\n    right_current = right_base\n    \n    left_lane_indices = []\n    right_lane_indices = []\n    window_info = []\n    \n    for window in range(n_windows):\n        win_y_low = height - (window + 1) * window_height\n        win_y_high = height - window * window_height\n        \n        if left_current is not None:\n            win_xleft_low = left_current - margin\n            win_xleft_high = left_current + margin\n            window_info.append((\'left\', win_xleft_low, win_y_low, win_xleft_high, win_y_high))\n            \n            good_left_indices = ((nonzero_y >= win_y_low) & (nonzero_y < win_y_high) & \n                                 (nonzero_x >= win_xleft_low) & (nonzero_x < win_xleft_high)).nonzero()[0]\n            left_lane_indices.append(good_left_indices)\n            \n            if len(good_left_indices) > min_pixels:\n                left_current = int(np.mean(nonzero_x[good_left_indices]))\n        \n        if right_current is not None:\n            win_xright_low = right_current - margin\n            win_xright_high = right_current + margin\n            window_info.append((\'right\', win_xright_low, win_y_low, win_xright_high, win_y_high))\n            \n            good_right_indices = ((nonzero_y >= win_y_low) & (nonzero_y < win_y_high) & \n                                  (nonzero_x >= win_xright_low) & (nonzero_x < win_xright_high)).nonzero()[0]\n            right_lane_indices.append(good_right_indices)\n            \n            if len(good_right_indices) > min_pixels:\n                right_current = int(np.mean(nonzero_x[good_right_indices]))\n    \n    left_lane_indices = np.concatenate(left_lane_indices) if left_lane_indices else np.array([])\n    right_lane_indices = np.concatenate(right_lane_indices) if right_lane_indices else np.array([])\n    \n    left_x = nonzero_x[left_lane_indices] if len(left_lane_indices) > 0 else np.array([])\n    left_y = nonzero_y[left_lane_indices] if len(left_lane_indices) > 0 else np.array([])\n    right_x = nonzero_x[right_lane_indices] if len(right_lane_indices) > 0 else np.array([])\n    right_y = nonzero_y[right_lane_indices] if len(right_lane_indices) > 0 else np.array([])\n    \n    return (left_x, left_y), (right_x, right_y), window_info\n\n\ndef fit_polynomial(lane_pixels, degree=2):\n    """\u5bf9\u8f66\u9053\u7ebf\u50cf\u7d20\u8fdb\u884c\u591a\u9879\u5f0f\u62df\u5408\n    \n    Args:\n        lane_pixels: \u8f66\u9053\u7ebf\u50cf\u7d20\u5750\u6807 (x_coords, y_coords)\n        degree: \u591a\u9879\u5f0f\u9636\u6570\uff0c\u9ed8\u8ba4\u4e3a2\uff08\u4e8c\u6b21\u591a\u9879\u5f0f\uff09\n        \n    Returns:\n        poly_coeffs: \u591a\u9879\u5f0f\u7cfb\u6570 [a, b, c, ...]\uff0c\u4f7f\u5f97 x = a*y^2 + b*y + c\n                    \u5982\u679c\u62df\u5408\u5931\u8d25\u5219\u8fd4\u56de None\n    """\n    x_coords, y_coords = lane_pixels\n    \n    if len(x_coords) < degree + 1:\n        return None\n    \n    poly_coeffs = np.polyfit(y_coords, x_coords, degree)\n    return poly_coeffs\n\n\ndef calculate_lane_center_line(left_coeffs, right_coeffs, image_height):\n    """\u6839\u636e\u5de6\u53f3\u8f66\u9053\u7ebf\u7684\u591a\u9879\u5f0f\u7cfb\u6570\u8ba1\u7b97\u4e2d\u5fc3\u7ebf\n    \n    Args:\n        left_coeffs: \u5de6\u8f66\u9053\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570 [a, b, c]\n        right_coeffs: \u53f3\u8f66\u9053\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570 [a, b, c]\n        image_height: \u56fe\u50cf\u9ad8\u5ea6\n        \n    Returns:\n        center_coeffs: \u4e2d\u5fc3\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570 [a, b, c]\n        center_points: \u4e2d\u5fc3\u7ebf\u91c7\u6837\u70b9 [(x, y), ...]\n    """\n    if left_coeffs is None or right_coeffs is None:\n        return None, []\n    \n    y_vals = np.linspace(0, image_height - 1, image_height)\n    \n    left_x = np.polyval(left_coeffs, y_vals)\n    right_x = np.polyval(right_coeffs, y_vals)\n    center_x = (left_x + right_x) / 2\n    \n    center_coeffs = np.polyfit(y_vals, center_x, 2)\n    \n    sample_points = 50\n    y_samples = np.linspace(0, image_height - 1, sample_points, dtype=int)\n    x_samples = np.polyval(center_coeffs, y_samples)\n    center_points = list(zip(x_samples.astype(int), y_samples))\n    \n    return center_coeffs, center_points\n\n\ndef calculate_control_command(center_coeffs, image_width, image_height, \n                             lookahead_ratio=0.7, k_p=2.0,\n                             v_straight=1.0, v_curve=0.5, curve_threshold=0.0005):\n    """\u57fa\u4e8e\u4e2d\u5fc3\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570\u8ba1\u7b97\u8fd0\u52a8\u63a7\u5236\u6307\u4ee4\n    \n    Args:\n        center_coeffs: \u4e2d\u5fc3\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570 [a, b, c]\uff0cx = a*y^2 + b*y + c\n        image_width: \u56fe\u50cf\u5bbd\u5ea6\n        image_height: \u56fe\u50cf\u9ad8\u5ea6\n        lookahead_ratio: \u524d\u89c6\u70b9\u4f4d\u7f6e\u6bd4\u4f8b\uff080-1\uff09\uff0c\u8d8a\u5927\u8d8a\u8fdc\n        k_p: \u6bd4\u4f8b\u589e\u76ca\n        v_straight: \u76f4\u9053\u901f\u5ea6 (m/s)\n        v_curve: \u5f2f\u9053\u901f\u5ea6 (m/s)\n        curve_threshold: \u66f2\u7387\u9608\u503c\uff0c\u8d85\u8fc7\u6b64\u503c\u8ba4\u4e3a\u662f\u5f2f\u9053\n        \n    Returns:\n        linear_velocity: \u7ebf\u901f\u5ea6 (m/s)\n        angular_velocity: \u89d2\u901f\u5ea6 (rad/s)\n        lateral_error: \u6a2a\u5411\u504f\u5dee\uff08\u50cf\u7d20\uff09\n        curvature: \u66f2\u7387\n    """\n    if center_coeffs is None:\n        return 0.0, 0.0, 0.0, 0.0\n    \n    lookahead_y = int(image_height * lookahead_ratio)\n    lookahead_x = np.polyval(center_coeffs, lookahead_y)\n    \n    image_center_x = image_width / 2\n    lateral_error = lookahead_x - image_center_x\n    normalized_error = lateral_error / (image_width / 2)\n    \n    a, b, c = center_coeffs\n    curvature = abs(2 * a)\n    \n    if curvature > curve_threshold or abs(normalized_error) > 0.2:\n        linear_velocity = v_curve\n    else:\n        linear_velocity = v_straight\n    \n    angular_velocity = -k_p * normalized_error\n    angular_velocity = np.clip(angular_velocity, -2.0, 2.0)\n    \n    return linear_velocity, angular_velocity, lateral_error, curvature\n\n\ndef visualize_lane_detection(original_image, binary_image, left_pixels, right_pixels, \n                             left_coeffs, right_coeffs, center_coeffs, window_info,\n                             lookahead_point=None, lateral_error=0.0, \n                             linear_vel=0.0, angular_vel=0.0):\n    """\u53ef\u89c6\u5316\u8f66\u9053\u7ebf\u68c0\u6d4b\u7ed3\u679c\n    \n    Args:\n        original_image: \u539f\u59cb\u5f69\u8272\u56fe\u50cf\n        binary_image: \u4e8c\u503c\u5316\u56fe\u50cf\n        left_pixels: \u5de6\u8f66\u9053\u7ebf\u50cf\u7d20 (x_coords, y_coords)\n        right_pixels: \u53f3\u8f66\u9053\u7ebf\u50cf\u7d20 (x_coords, y_coords)\n        left_coeffs: \u5de6\u8f66\u9053\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570\n        right_coeffs: \u53f3\u8f66\u9053\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570\n        center_coeffs: \u4e2d\u5fc3\u7ebf\u591a\u9879\u5f0f\u7cfb\u6570\n        window_info: \u6ed1\u52a8\u7a97\u53e3\u4fe1\u606f\n        lookahead_point: \u524d\u89c6\u70b9\u5750\u6807 (x, y)\n        lateral_error: \u6a2a\u5411\u504f\u5dee\n        linear_vel: \u7ebf\u901f\u5ea6\n        angular_vel: \u89d2\u901f\u5ea6\n        \n    Returns:\n        vis_image: \u53ef\u89c6\u5316\u56fe\u50cf\n    """\n    vis_image = cv2.cvtColor(binary_image, cv2.COLOR_GRAY2BGR)\n    height = vis_image.shape[0]\n    width = vis_image.shape[1]\n    \n    for window in window_info:\n        lane_type, x_low, y_low, x_high, y_high = window\n        color = (0, 255, 0) if lane_type == \'left\' else (255, 0, 0)\n        cv2.rectangle(vis_image, (x_low, y_low), (x_high, y_high), color, 2)\n    \n    left_x, left_y = left_pixels\n    right_x, right_y = right_pixels\n    \n    if len(left_x) > 0:\n        for x, y in zip(left_x, left_y):\n            cv2.circle(vis_image, (int(x), int(y)), 2, (0, 255, 255), -1)\n    \n    if len(right_x) > 0:\n        for x, y in zip(right_x, right_y):\n            cv2.circle(vis_image, (int(x), int(y)), 2, (255, 255, 0), -1)\n    \n    y_vals = np.linspace(0, height - 1, height).astype(int)\n    \n    if left_coeffs is not None:\n        left_fit_x = np.polyval(left_coeffs, y_vals).astype(int)\n        for i in range(len(y_vals) - 1):\n            cv2.line(vis_image, (left_fit_x[i], y_vals[i]), \n                    (left_fit_x[i+1], y_vals[i+1]), (0, 255, 0), 3)\n    \n    if right_coeffs is not None:\n        right_fit_x = np.polyval(right_coeffs, y_vals).astype(int)\n        for i in range(len(y_vals) - 1):\n            cv2.line(vis_image, (right_fit_x[i], y_vals[i]), \n                    (right_fit_x[i+1], y_vals[i+1]), (255, 0, 0), 3)\n    \n    if center_coeffs is not None:\n        center_fit_x = np.polyval(center_coeffs, y_vals).astype(int)\n        for i in range(len(y_vals) - 1):\n            cv2.line(vis_image, (center_fit_x[i], y_vals[i]), \n                    (center_fit_x[i+1], y_vals[i+1]), (0, 0, 255), 4)\n    \n    image_center_x = width // 2\n    cv2.line(vis_image, (image_center_x, 0), (image_center_x, height), (255, 255, 255), 2)\n    \n    if lookahead_point is not None:\n        lx, ly = lookahead_point\n        cv2.circle(vis_image, (int(lx), int(ly)), 10, (255, 0, 255), -1)\n        cv2.arrowedLine(vis_image, (image_center_x, int(ly)), (int(lx), int(ly)), \n                       (255, 0, 255), 3)\n    \n    font = cv2.FONT_HERSHEY_SIMPLEX\n    cv2.putText(vis_image, f\'Error: {lateral_error:.1f}px\', (10, 30), \n                font, 0.6, (255, 255, 255), 2)\n    \n    turn_info = "LEFT" if angular_vel > 0 else "RIGHT" if angular_vel < 0 else "STRAIGHT"\n    cv2.putText(vis_image, f\'Angular: {angular_vel:.3f} ({turn_info})\', (10, 60), \n                font, 0.6, (255, 255, 255), 2)\n    \n    cv2.putText(vis_image, f\'Speed: {linear_vel:.2f} m/s\', (10, 90), \n                font, 0.6, (255, 255, 255), 2)\n    \n    return vis_image\n\n\nclass VisualMotionController(Node):\n    """\u57fa\u4e8e\u89c6\u89c9\u7684\u8f66\u9053\u7ebf\u8ddf\u968f\u63a7\u5236\u8282\u70b9\n    \n    \u529f\u80fd\uff1a\n        - \u63a5\u6536\u6444\u50cf\u5934\u56fe\u50cf\n        - \u6ed1\u52a8\u7a97\u53e3\u6cd5\u68c0\u6d4b\u8f66\u9053\u7ebf\n        - \u591a\u9879\u5f0f\u62df\u5408\u8f66\u9053\u7ebf\n        - \u8ba1\u7b97\u8fd0\u52a8\u63a7\u5236\u6307\u4ee4\n        - \u53d1\u5e03\u901f\u5ea6\u63a7\u5236\u547d\u4ee4\n    """\n    \n    def __init__(self):\n        super().__init__(\'visual_motion_controller\')\n        \n        # \u8ba2\u9605\u6444\u50cf\u5934\u8bdd\u9898\n        self.image_subscription = self.create_subscription(\n            Image,\n            \'/camera\',\n            self.process_and_control,\n            10\n        )\n        \n        # \u53d1\u5e03\u63a7\u5236\u8bdd\u9898\n        self.velocity_publisher = self.create_publisher(\n            Twist,\n            \'/cmd_vel\',\n            10\n        )\n\n        self.bridge = CvBridge()\n        \n        # ========== \u56fe\u50cf\u5904\u7406\u53c2\u6570 ==========\n        self.roi_start_ratio = 0.5\n        \n        # ========== \u8fd0\u52a8\u63a7\u5236\u53c2\u6570 ==========\n        self.lookahead_ratio = 0.7\n        self.k_p = 2.0\n        self.v_straight = 1.0\n        self.v_curve = 0.5\n        self.curve_threshold = 0.0005\n        \n        # ========== \u8c03\u8bd5\u6a21\u5f0f ==========\n        self.debug_mode = False\n        \n        \n    def process_and_control(self, msg):\n        """\u5904\u7406\u56fe\u50cf\u5e76\u8ba1\u7b97\u8fd0\u52a8\u63a7\u5236\u6307\u4ee4\uff08\u4e3b\u56de\u8c03\u51fd\u6570\uff09\n        \n        Args:\n            msg: ROS2\u56fe\u50cf\u6d88\u606f\n        """\n        try:\n            # Step 1: \u56fe\u50cf\u683c\u5f0f\u8f6c\u6362\n            cv_image = self.bridge.imgmsg_to_cv2(msg, \'bgr8\')\n            \n            # Step 2: \u63d0\u53d6ROI\n            roi_image = extract_roi(cv_image, self.roi_start_ratio)\n            \n            # Step 3: \u56fe\u50cf\u9884\u5904\u7406\u548c\u4e8c\u503c\u5316\n            binary_image = preprocess_and_binarize(roi_image, method=\'mean\', invert=True)\n            \n            # Step 4: \u53bb\u566a\n            denoised = denoise_binary_image(binary_image)\n\n            # \u53ef\u89c6\u5316\n            visualize_preprocessing(roi_image, denoised)\n            \n            # Step 5: \u6ed1\u52a8\u7a97\u53e3\u68c0\u6d4b\u8f66\u9053\u7ebf\n            left_pixels, right_pixels, windows = sliding_window_detection(denoised)\n            \n            # Step 6: \u591a\u9879\u5f0f\u62df\u5408\n            left_fit = fit_polynomial(left_pixels)\n            right_fit = fit_polynomial(right_pixels)\n            \n            # Step 7: \u8ba1\u7b97\u4e2d\u5fc3\u7ebf\n            center_fit, center_pts = calculate_lane_center_line(\n                left_fit, right_fit, denoised.shape[0]\n            )\n            \n            # Step 8: \u8ba1\u7b97\u8fd0\u52a8\u63a7\u5236\u6307\u4ee4\n            linear_vel, angular_vel, lateral_error, curvature = calculate_control_command(\n                center_fit,\n                denoised.shape[1],\n                denoised.shape[0],\n                lookahead_ratio=self.lookahead_ratio,\n                k_p=self.k_p,\n                v_straight=self.v_straight,\n                v_curve=self.v_curve,\n                curve_threshold=self.curve_threshold\n            )\n            \n            # Step 9: \u8ba1\u7b97\u524d\u89c6\u70b9\u7528\u4e8e\u53ef\u89c6\u5316\n            lookahead_point = None\n            if center_fit is not None:\n                lookahead_y = int(denoised.shape[0] * self.lookahead_ratio)\n                lookahead_x = np.polyval(center_fit, lookahead_y)\n                lookahead_point = (lookahead_x, lookahead_y)\n            \n            # Step 10: \u53ef\u89c6\u5316\n            vis = visualize_lane_detection(\n                roi_image, denoised,\n                left_pixels, right_pixels,\n                left_fit, right_fit, center_fit,\n                windows,\n                lookahead_point=lookahead_point,\n                lateral_error=lateral_error,\n                linear_vel=linear_vel,\n                angular_vel=angular_vel\n            )\n            cv2.imshow(\'Lane Detection\', vis)\n            cv2.waitKey(1)\n            \n            # Step 11: \u53d1\u5e03\u63a7\u5236\u547d\u4ee4\n            cmd = Twist()\n            if self.debug_mode:\n                cmd.linear.x = 0.0\n                cmd.angular.z = 0.0\n                self.get_logger().info(\'\u8c03\u8bd5\u6a21\u5f0f\uff1a\u8fd0\u52a8\u5df2\u6682\u505c\', throttle_duration_sec=2.0)\n            else:\n                cmd.linear.x = linear_vel\n                cmd.angular.z = angular_vel\n            self.velocity_publisher.publish(cmd)\n            \n        except Exception as e:\n            self.get_logger().error(f\'\u5904\u7406\u56fe\u50cf\u65f6\u51fa\u9519: {str(e)}\')\n            import traceback\n            self.get_logger().error(traceback.format_exc())\n\ndef main(args=None):\n    """\u4e3b\u51fd\u6570"""\n    rclpy.init(args=args)\n    \n    # \u521b\u5efa\u89c6\u89c9\u8fd0\u52a8\u63a7\u5236\u8282\u70b9\n    controller = VisualMotionController()\n    \n    try:\n        # \u542f\u52a8\u8282\u70b9\n        rclpy.spin(controller)\n    except KeyboardInterrupt:\n        controller.get_logger().info(\'\u8282\u70b9\u88ab\u7528\u6237\u4e2d\u65ad\')\n    finally:\n        # \u53d1\u9001\u505c\u6b62\u6307\u4ee4\n        stop_cmd = Twist()\n        controller.velocity_publisher.publish(stop_cmd)\n        # \u6e05\u7406\u8d44\u6e90\n        cv2.destroyAllWindows()\n        controller.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u7531\u4e8e\u4e0d\u540c\u8bbe\u5907\u7b97\u529b\u4e0d\u540c\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4f4e\u7b97\u529b\u8bbe\u5907\u6765\u8bf4\uff0c\u8fd0\u7b97\u65f6\u95f4\u8fc7\u957f\u53ef\u80fd\u4f1a\u51b2\u51fa\u8f66\u9053\u7ebf\uff0c\u9700\u8981\u964d\u4f4e\u8fd0\u52a8\u901f\u5ea6\u3002"})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}function _(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>o});var s=i(96540);const r={},l=s.createContext(r);function t(n){const e=s.useContext(l);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(l.Provider,{value:e},n.children)}},73533:n=>{n.exports=JSON.parse('{"permalink":"/blog/2025/7/30/","source":"@site/blog/2025-7-30.md","title":"ROS2\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f","description":"\u901a\u8fc7ROS2\u5b98\u65b9\u63d0\u4f9b\u7684Gazebo\u865a\u62df\u4eff\u771f\uff0c\u5b9e\u73b0\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f","date":"2025-07-30T00:00:00.000Z","tags":[{"inline":true,"label":"ROS2","permalink":"/blog/tags/ros-2"},{"inline":true,"label":"\u89c6\u89c9","permalink":"/blog/tags/\u89c6\u89c9"},{"inline":true,"label":"\u8fd0\u52a8\u7b97\u6cd5","permalink":"/blog/tags/\u8fd0\u52a8\u7b97\u6cd5"},{"inline":true,"label":"\u4eff\u771f","permalink":"/blog/tags/\u4eff\u771f"}],"readingTime":65.775,"hasTruncateMarker":false,"authors":[{"name":"Allen","title":"normal software engineer","url":"https://github.com/jiangyangcreate","socials":{"github":"https://github.com/jiangyangcreate"},"imageURL":"https://jiangmiemie.com/img/logo-192.svg","key":"jiangmiemie","page":null}],"frontMatter":{"title":"ROS2\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f","date":"2025-7-30","authors":"jiangmiemie","tags":["ROS2","\u89c6\u89c9","\u8fd0\u52a8\u7b97\u6cd5","\u4eff\u771f"],"keywords":["ROS2","\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5","Gazebo","rclpy","\u673a\u5668\u4eba\u4eff\u771f"],"description":"\u901a\u8fc7ROS2\u5b98\u65b9\u63d0\u4f9b\u7684Gazebo\u865a\u62df\u4eff\u771f\uff0c\u5b9e\u73b0\u89c6\u89c9\u8fd0\u52a8\u7b97\u6cd5\u4eff\u771f"},"unlisted":false,"prevItem":{"title":"GithubPage\u667a\u80fdDNS\u89e3\u6790","permalink":"/blog/2025/8/30/"},"nextItem":{"title":"\u50bb\u74dc\u5f0f\u673a\u5668\u5b66\u4e60\u7ade\u8d5b\u63d0\u5347","permalink":"/blog/2025/4/30/"}}')}}]);